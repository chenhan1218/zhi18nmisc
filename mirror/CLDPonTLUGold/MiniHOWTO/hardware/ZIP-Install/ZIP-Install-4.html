<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xml:lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head><title>4. Red Hat 4.2 的安裝</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link 
href="ZIP-Install-5.html" rel="next" title="5. Slackware 2.2 的安裝" />
<link href="ZIP-Install-3.html" 
rel="previous" title="3. 設定 ZIP 磁片" />
<link href="ZIP-Install-1.html" rel="chapter" title="1.聲明" />
<link href="ZIP-Install-2.html" rel="chapter" title="2.介紹" />
<link href="ZIP-Install-3.html" rel="chapter" title="3.設定 ZIP 磁片" />
<link href="ZIP-Install-4.html" rel="chapter" title="4.Red Hat 4.2 的安裝" />
<link href="ZIP-Install-5.html" rel="chapter" title="5.Slackware 2.2 的安裝" />
<link href="ZIP-Install-6.html" rel="chapter" title="6.設立 /etc/fstab " />
<link href="ZIP-Install-7.html" rel="chapter" title="7.Debian 的安裝" />
<link href="ZIP-Install-8.html" rel="chapter" title="8.後言" />
<link href="index.html" rel="start" />
<link href="index.html#content" rel="contents" />
<link href="http://www.tldp.org/HOWTO/mini/ZIP-Install.html" rel="alternate" title="原版" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html"  labels ratings (ca 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html"  labels ratings (n 0 s 0 v 0 l 0))'/>
<link href="../../style.css" rel="stylesheet" type="text/css" />
<link href="ZIP-Install-4.html#ss4.1" rel="section" title="4.1. 個人的設備" />
<link href="ZIP-Install-4.html#ss4.2" rel="section" title="4.2. 套件(Package)的安裝" />
<link href="ZIP-Install-4.html#ss4.3" rel="section" title="4.3. 套件安裝後的問題" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html"  labels ratings (ca 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html"  labels ratings (n 0 s 0 v 0 l 0))'/>
<link href="ZIP-Install.rdf" rel="meta" title="各章節的說明資訊" />
</head>
<body>
<table




>
  <tr
>
    <th
colspan="3" class="HdTitle"
>Mini
      HOWTO：Installing Linux on ZIP disk using ppa ZIP Drive</th>
  </tr
>
  <tr
>
    <td class="TtdL"
><a href="ZIP-Install-3.html" accesskey="P">上一頁(P)</a></td
>
    <td class="TtdC"
></td
>
    <td class="TtdR"
><a href="ZIP-Install-5.html" accesskey="N">下一頁(N)</a></td
>
  </tr
>
</table
>
<hr />

<h1>4. Red Hat 4.2 的安裝</h1>
<p> 任何跟電腦有關的東西，三個月的可被認為是過時且需要更新。 因為我無法
  總是有時間隨著新版的推出而更新本文件，我會盡我最大的努力試著做到至少每二版更改一次。 至於其他的發行版(Distribution)，除非作者們願意送更新的來，它們將維持跟現在的內容一樣。</p>
<h2><a name="ss4.1" id="ss4.1"></a>4.1. 個人的設備</h2>
<p>在安裝時，我擁有且使用</p>
<ul>
  <li> Kernel 2.0.30</li>
  <li> Imoega ppa disk drive (印表機埠版的 ZIP 機)</li>
  <li> Red Hat 4.2</li>
</ul>
<h2><a name="ss4.2" id="ss4.2"></a>4.2. 套件(Package)的安裝</h2>
<p> 當我第一次試圖安裝 Red Hat 到一片 ZIP 磁片時，我覺得直接使用 Red Hat
  的安裝(啟動)磁片(boot disk)會比較容易。 然後我做了。 我做到非常接近到 
  建立一個開機磁片，甚至經由 email 從 Red Hat 裡許多的人那得到幫助。 但
最後在我發現 rpm 中有 '--root' 的選項時，我開始放棄這整個計劃。 </p>
<h3>4.2.1. 要安裝那些套作(Package)</h3>
<p> 在閱讀在一個我在 Red Hat 的備份站(Mirror)上找到的一個檔案時，我發現那些
是要安裝的套件。 那個檔案可以在任何備份站(Mirror)上的 redhat/redhat-4.2/i386/RedHat/base/comps 內找到。</p>
<p>  在這安裝中，我想要包含網路的支援。 但因為 Red Hat 的 X視窗網路設定方
  式，我將必須手工調整，或是相當手動地試著去設定在 /etc/sysconfig/ 內的
網路設置工作稿件(Network setup script)。(參照 4.3.3 節)</p>
<p>  至少在沒有用特殊修改的核心版本(Kernel version)下，在 ZIP 機中編譯任何
  程式是相當慢的，所以我決定不安裝任何的發展軟體套件(Development package)。
  基於空間的考量，我也選擇不安裝 X視窗系統。 稍後，我會試圖去掛上硬碟並建
  立一個與 /usr 的符號連接(Symlink, Symbolic link)，看看我是否可讓 X視窗運
作。</p>
<p>  下面以安裝的順序列出我安裝的套件名單。 那些有打星號的表示從 Red Hat
的勘誤(Errata)中有更新。 在括弧中則是更新的套件號碼。</p>
<p>  例如，NetKit-B-0.09-6 被更新到 NetKit-B-0.09-8，所以內容將是:</p>
<pre class="sample"> *91) NetKit-B-0.09-6 (-8)</pre>
<p> (此表是執行命令 rpm --root /iomega -qa 所產生)</p>
 <pre class="sample">1) setup-1.7-2 2) pamconfig-0.51-2
3) filesystem-1.3-1 4) MAKEDEV-2.2-9 
5) adduser-1.7-1 6) libc-5.3.12-18 
7) SysVinit-2.64-8 8) ash-0.2-8 
9) at-2.9b-2 10) libtermcap-2.0.8-4
11) bash-1.14.7-1 12) bc-1.03-6
13) bdflush-1.5-5 14) cpio-2.4.2-4
15) cracklib-dicts-2.5-1 16) tmpwatch-1.2-1 
17) crontabs-1.5-1 *18) db-1.85-10 (-11)
19) dev-2.5.1-1 20) diffutils-2.7-5
21) etcskel-1.3-1 22) file-3.22-5
23) fileutils-3.16-1 24) findutils-4.1-11
25) grep-2.0-5 26) groff-1.10-8
*27) ld.so-1.7.14-4 (-5) 28) getty_ps-2.0.7h-4
29) gzip-1.2.4-7 30) mingetty-0.9.4-3
*31) initscripts-2.92-1 (93-1) 32) ed-0.2-5
33) info-3.9-1 34) ncurses-1.9.9e-4
35) libg++-2.7.1.4-5 *36) pwdb-0.54-3 (-4)
37) rootfiles-1.5-1 *38) pam-0.57-2 (-4) 
39) redhat-release-4.2-1 40) less-321-3 
41) mount-2.5l-2 42) zlib-1.0.4-1
43) rpm-2.3.11-1 44) e2fsprogs-1.10-0
45) sysklogd-1.3-15 46) tar-1.11.8-11
47) passwd-0.50-7 48) gawk-3.0.2-1
49) gdbm-1.7.3-8 50) gpm-1.10-8
51) hdparm-3.1-2 52) kbd-0.91-9
53) slang-0.99.37-2 54) newt-0.8-1 
55) kbdconfig-1.4-1 56) ncompress-4.2.4-7
*57) sh-utils-1.16-4 (-5) 58) procinfo-0.9-1
*59) logrotate-2.3-3 (4-1) 60) lilo-0.19-1
61) losetup-2.5l-2 62) linuxthreads-0.5-1
*63) mkinitrd-1.6-1 (7-1) 64) mailcap-1.0-3
*65) man-1.4h-5 (j-1) 66) mt-st-0.4-2
67) modules-2.0.0-5 68) mailx-5.5.kw-6 
69) net-tools-1.32.alpha-2 70) procmail-3.10-10
71) procps-1.01-11 72) psmisc-11-4 
73) quota-1.55-4 74) readline-2.0-10
75) sed-2.05-6 76) setconsole-1.0-1
77) sendmail-8.8.5-4 78) shadow-utils-960530-6
79) stat-1.5-5 80) tcsh-6.06-10
81) termcap-9.12.6-5 82) textutils-1.22-1
83) time-1.7-1 84) timeconfig-1.8-1
85) util-linux-2.5-38 86) vim-4.5-2 
87) vixie-cron-3.0.1-14 88) which-1.0-5
89) zoneinfo-96i-4 90) tcp_wrappers-7.5-1
*91) NetKit-B-0.09-6 (-8) *92) lpr-0.18-1 (19-1)
*93) bind-4.9.5p1-2 (9.6-1) *94) bind-utils-4.9.5p1-2 (9.6-1)
*95) wu-ftpd-2.4.2b12-6 (b15-1) 96) anonftp-2.3-3
97) zip-2.1-1 98) unzip-5.12-5
99) statserial-1.1-7 100) minicom-1.75-2 
101) lrzsz-0.12.14-1 102) dip-3.3.7o-9
103) ppp-2.2.0f-3 104) portmap-4.0-3
105) perl-5.003-8 *106) traceroute-1.0.4.4bsd-2 (1.4a5-1)
*107) elm-2.4.25-7 (-8) 108) lynx-2.6-2
109) ncftp-2.3.0-5 110) pine-3.95-2
111) rdate-0.960923-1 112) apache-1.1.3-3
*113) nfs-server-2.2beta16-7 *114) nfs-server-clients-2.2beta16-7
(2.2beta16-8) (2.2beta16-8) 
</pre>
 <p>而且在安裝上面的全部後，我仍然剩下 32MB。
 </p>
 <h4>4.2.1.1. 更新; 勘誤</h4>
<p> 正如許多的 Red Hat 使用者知道，部分的套件可能被發現有一些安全漏洞，或
  任何其他會引起爭論發生的問題。 基於這個理由，Red Hat給這些套件發行更
  新。 我已經更新那些我安裝且有更新的套件，並且在上述的名單中標上星號。
請參考關於<a href="http://www.redhat.com/support/docs/rhl/rh42-errata-general.html">更新套件的Red Hat網頁</a>:</p>
<p>NOTE:在你可以更新那些套件前，你將必須如 3.3.1.1 中描述一樣執行 
ldconfig 。  </p>
<h3> 4.2.2. 如何在使用 rpm 而不用 glint 下安裝</h3>
<p>  在 rpm 中，使用 --root 選項去特定掛載目錄為安裝置的根目錄。 因為安裝前
  (Preinstall)和安裝後(Postinstall)的執行稿(Script)基於不同的根目錄而無法
正確地被執行，我已發現有許多套件無法安裝。 所以使用 --noscripts 選項:</p>
<pre class="sample"> rpm --root /iomega -i --noscripts PACKAGE.i386.rpm</pre>
<p> 我肯定許多人會注意到，你會得到一個錯誤訊息像:</p>
<pre class="sample">failed to open /iomega/var/lib/rpm/packages.rpm
error: cannot open /iomega/var/lib/rpm/packages.rpm</pre>
<p>所以，只要建立 var/lib/rpm 的目錄:</p>
<pre class="sample"> mkdir /iomega/var; mkdir /iomega/var/lib; mkdir /iomega/var/lib/rpm</pre>
<h3>4.2.3. 那個先來， pamconfig 或 pam ?</h3>
<p> 假如任何人試圖安裝 pamconfig ，它將會抱怨關於 pam 的錯誤附屬性(Depen-
  dency)﹔當你再試著安裝 pam 抱怨關於 pamconfig 的錯誤附屬性! 這像雞生
  蛋﹑蛋生雞問題一樣困擾我一陣子，但要感謝 --nodeps 這個旗幟，我們可以強
迫 pamconfig 被安裝; 除了 pamconfig 外，pam 另外有更多的錯誤附屬性。</p>
<pre class="sample"> rpm --root /iomega -i --nodeps --noscripts pamconfig-0.51-2</pre>
<h2><a name="ss4.3" id="ss4.3"></a>4.3. 套件安裝後的問題</h2>
<p> 一旦所有的東西都安裝好後，不幸的是，這磁片並不是功能完整的，假如可以這
  麼說的話。 我的意思是，假如你現在試著從軟磁開機的話，你將會沒有多少進
  展。 一旦 init 試著開始，你將會得到兩個可愛的錯誤; 兩個執行稿被運行且
會抱怨找不到已經安裝的某些檔案。</p>
<h3>4.3.1. 找不到 /etc/ld.so.cache 和 libc.so.5 的問題</h3>
<p> 假如你試著開機，你會得到兩個錯誤，第一個是 /etc/ld.so.cache 檔案失蹤，
第二個是抱怨找不到 libc.so.5 。</p>
<h4>4.3.1.1. /etc/ld.so.cache</h4>
<p> 如許多讀者所提到，我以前的方法並不是如所說的會動。 為了建立這個檔案，<br />
當 ZIP 磁片還掛載時，你將必須執行 ldconfig:</p>
<pre class="sample"> chroot /iomega; /sbin/ldconfig</pre>
<p> 感謝 Javier Rodriguez 的解答。</p>
<h4>4.3.1.2. libc.so.5</h4>
<p> 為了解決找不到 lib 的問題，你將必須建立一個安裝執行稿應該做的符號聯結
(Symlink):</p>
<pre class="sample"> cd /iomega/lib; ln -s libc.so.5.3.12 libc.so.5</pre>
<p> 感謝 Darcy Boese 的解答。</p>
<h3>4.3.2. 設定 root 的密碼</h3>
<p> 正如在 4.3.1.1 中執行 ldconfig 一樣，你可能也要為新系統改變或建立 
root 的密碼:</p>
<pre class="sample">chroot /iomega; passwd root</pre>
<h3>4.3.4. 安裝程式所建立的東西</h3>
<p>  NOTE:
  這是一個非常簡單的設定，一個我尚未能夠測試是否會工作的。 理
論上應該會，但請不要送我不會動的抱怨。</p>
<p> 當我翻閱我的 Red Hat 4.2 光碟片時，我看到一些相當有趣的東西; 安裝程
  式的原始程式碼。 我發現它在 /misc/src/install 和一個有用的 net.c 。 
  在裡面，我發現安裝程式執行時，建立的那些檔案。 大部分只是產生網路支
  援(為什麼叫 net.c)，即使你沒有網路卡，你仍然可用 localhost 當做網路
(加上 Apache 會抱怨無法決定主機名稱(hostname))。 這些檔案包含:</p>
<pre class="sample">/etc/hosts
/etc/HOSTNAME
/etc/resolv.conf
/etc/sysconfig/network
/etc/sysconfig/network-scripts/ifcfg-eth0
(or any other network device you may have.)</pre>
<p>(或你可能有的其他網路裝置。)</p>
<h3>4.3.4. 網路的設定 </h3>
<p> 本文中，我需要有給我的 3COM 3c595 快速乙太網路卡的網路支援。 (這卡
在前幾個月中被用在另一部機器上。)</p>
<p> 首先，我需要一個名字，且因我跑一個自己的 Name Server (這又是另一個
  長故事)，我定了這個名字: dash-dot.wig.org (我就是喜歡它的聲調。) 有
  名稱且沒 IP 也是有點無意義的，所以我用了一個非網際網路保留可用
  192.168.10.0 的網址，我的 Name Server 也用這個。 即使主機名稱通常
  存在 /etc/HOSTNAME 中，Red Hat 會在 /etc/sysconfig/network 中檢查這個
名稱; 所以讓我們從那開始。 我的 /etc/sysconfig/network 的樣本:</p>
<pre class="sample">  NETWORKING=yes
  HOSTNAME=dash-dot
  DOMAINNAME=wig.org
  GATEWAY=
  GATEWAYDEV=eth0
  NS1=192.168.10.7
</pre>
<p> 再來，基本上拷貝同樣的資料到 /etc/HOSTNAME，/etc/resolv.conf，和
/etc/hosts裡:</p>
<ul>
  <li> <code>/etc/HOSTNAME</code>：
  <pre class="sample">dash-dot.wig.org</pre>
  </li>
  <li><code>/etc/resolv.conf</code>：
  <pre class="sample">search wig.org
nameserver ns.wig.org</pre>
  </li>
  <li><code>/etc/hosts</code>：
  <pre class="sample">127.0.0.1 localhost
192.168.10.99 dash-dot.wig.org dash-dot
192.168.10.7 ns.wig.org ns
</pre>
  </li>
</ul>
<p>  Red Hat 在 /etc/sysconfig/network-scripts 的執行稿中設定所有的網路裝置。
  任何網路的設定通常首先經由安裝程式建立，所以我必須手動建立這些設定檔。
  它們全是由 ifcfg-xxx 開頭，其中 xxx 是 ifconfig 啟動的網路介面; 比如是
  ppp0，eth0 等等。 在這個例子中，我必須建立一個叫 ifcfg-eth0 的檔案，內
容包括:</p>
<pre class="sample">  DEVICE=eth0
  ONBOOT=yes
  BOOTPROTO=none
  BROADCAST=192.168.10.255
  NETWORK=192.168.10.0
  NETMASK=255.255.255.0
  IPADDR=192.168.10.99
</pre>
<p> 最後，現在為了讓這個會動，當還在 /etc/sysconfig/network-scripts 的目
錄中時，執行:</p>
<pre class="sample"> ./ifup ifcfg-eth0 boot</pre>
<p> 假如介面被設成在開機('boot')時啟動，這將會啟動設立網路介面的執行稿。</p>
<p> 更進一步的資訊，請參考 NET-3-HOWTO 的文件。</p>
<p></p>
<hr/>
<table




>
  <tr
>
    <td class="BtdL"
><a href="ZIP-Install-3.html" accesskey="P">上一頁(P)</a></td
>
    <td class="BtdC"
><a href="index.html" accesskey="H">目錄(H)</a></td
>
    <td class="BtdR"
><a
href="ZIP-Install-5.html"
>下一頁(N)</a
></td
>
  </tr
>
  <tr
>
    <td class="BtdL"
>設定 ZIP 磁片</td
>
    <td class="BtdC"
><a href="ZIP-Install-4.html" accesskey="T">到頂層(T)</a></td
>
    <td class="BtdR"
>Slackware 2.2 的安裝</td
>
  </tr
>
</table
>
<div> <a href="http://validator.w3.org/check/referer"><img src="../../../valid-xhtml10.png"  alt="符合 XHTML 1.0" width="88" height="31" style="border:0;width:88px;height:31px"/></a> <a href="http://jigsaw.w3.org/css-validator/"><img style="border:0;width:88px;height:31px" src="../../../vcss.png"  alt="符合 CSS"/></a> <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="Explanation of Level Double-A Conformance"><img style="border:0;width:88px;height:32px" src="../../../wcag1AA.gif" alt="Level Double-A conformance icon,  W3C-WAI Web Content Accessibility Guidelines 1.0"/></a> <a href="http://www.w3.org/RDF/" title="RDF 資源描述架構"><img  src="../../../rdf.gif" style="border:0" alt="表示該網頁支援資源描述架構"/></a></div>
</body></html>
