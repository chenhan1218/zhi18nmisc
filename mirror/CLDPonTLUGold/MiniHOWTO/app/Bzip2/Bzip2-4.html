<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xml:lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
 <title>Bzip2 Howto: 配合 tar來使用 bzip2</title>
 <link href="Bzip2-5.html" rel="next" />
 <link href="Bzip2-3.html" rel="previous" />
  <link href="index.html" rel="start" />
 <link href="index.html#content" rel="contents" />
 <link href="Bzip2-1.html" rel="chapter" title="1.簡介" />
 <link href="Bzip2-2.html" rel="chapter" title="2.取得 bzip2" />
 <link href="Bzip2-3.html" rel="chapter" title="3.使用 bzip2" />
 <link href="Bzip2-4.html" rel="chapter" title="4.配合 tar來使用 bzip2" />
 <link href="Bzip2-5.html" rel="chapter" title="5.使用 bzip2 來配合 less" />
 <link href="Bzip2-6.html" rel="chapter" title="6.使用 bzip2 來結合 emacs" />
 <link href="Bzip2-7.html" rel="chapter" title="7.用 bzip2 來配合 wu-ftpd " />
 <link href="Bzip2-8.html" rel="chapter" title="8.使用 bzip2 來配合 grep" />
 <link href="Bzip2-9.html" rel="chapter" title="9.bzip2 配合 X 下的 Netscape 來使用。" />
 <link href="Bzip2-10.html" rel="chapter" title="10.使用 bzip2 來再壓縮其他的壓縮格式" />
 <link href="Bzip2-11.html" rel="chapter" title="11.中譯本" />
 <link href="../../style.css" rel="stylesheet" type="text/css" />
 <link href="http://www.tldp.org/HOWTO/mini/Bzip2.html" rel="alternate" title="原版" />
 <meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html"  labels ratings (ca 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html"  labels ratings (n 0 s 0 v 0 l 0))'/>
 <link href="Bzip2.rdf" rel="meta" title="各章節的說明資訊" />
 <link href="Bzip2-4.html#ss4.1" rel="section" title="4.1 容易設立: " />
 <link href="Bzip2-4.html#ss4.2" rel="section" title="4.2 容易設立，容易使用，不需要 root 的特權: " />
 <link href="Bzip2-4.html#ss4.3" rel="section" title="4.3 同樣是容易使用，但需要 root 來存取。 " />
 <link href="http://www.freenix.fr/linux/HOWTO/mini/Bzip2.html" rel="alternate" title="法文版" />
 <link href="http://jf.gee.kyoto-u.ac.jp/JF/JF.html" rel="alternate" title="日文版" />
 <link href="http://user.tninet.se/~uxm165t/linux_doc.html" rel="alternate" title="瑞典版" />
</head> <body>
<table




>
  <tr
>
    <th
colspan="3" class="HdTitle"
>Mini
      HOWTO：Bzip2</th>
  </tr
>
  <tr
>
    <td class="TtdL"
><a href="Bzip2-3.html" accesskey="P">上一頁(P)</a></td
>
    <td class="TtdC"
></td
>
    <td class="TtdR"
><a href="Bzip2-5.html" accesskey="N">下一頁(N)</a></td
>
  </tr
>
</table
>
<hr />
<h1><a name="bzip2-with-tar" id="bzip2-with-tar"></a> <a name="s4" id="s4">4.</a> 配合 tar來使用 bzip2</h1>

<p>下面有三種配合 tar 使用 bzip2 的方法，也就是</p>
<h2><a name="ss4.1" id="ss4.1">4.1</a> 容易設立:
</h2>

<p>這個方法跟本就不必做設定。執行解開bzip2'd 的 tar包裹，
在現行目錄底下有個 foo.tar.bz2，執行</p>

<pre class="sample">
/path/to/bzip2 -cd foo.tar.bz2 | tar xf -
</pre>

<p>成功了，但可能有常需輸入的小缺點。</p>

<h2><a name="ss4.2" id="ss4.2">4.2</a> 容易設立，容易使用，不需要 root 的特權:
</h2>

<p> 感謝 
<a href="mailto:leonard@sct1.is.belgacom.be">Leonard Jean-Marc</a> 貢獻這個小技巧。也謝謝 
<a href="mailto:rubini@morgana.systemy.it">Alessandro Rubini</a> 從 csh裏分類
出 bash 的。</p>

<p>在你的 .bashrc裏，你可以加入像下面這行:</p>

<pre class="sample">
alias btar='tar --use-compress-program /usr/local/bin/bzip2 '
</pre>

<p>在你的 .tcshrc 或 .cshrc裏，可用下面這行相同的:</p>

<pre class="sample">
alias btar 'tar --use-compress-program /usr/local/bin/bzip2'
</pre>

<h2><a name="ss4.3" id="ss4.3">4.3</a> 同樣是容易使用，但需要 root 來存取。
</h2>

<p>用下面來方法來修補 gnu tar 1.12：</p>

<pre class="sample">
cd tar-1.12/src; patch &lt; /path/to/tar.diff
</pre>


<p>編譯、安裝它，你已準備就緒了。用"which tar" 和 "which bzip2"來確認這兩個
tar 和 bzip2 有在你的 $PATH 裏。要使用新的 tar，只需 </p>
<pre class="sample">
 tar xyf foo.tar.bz2
</pre>


<p>來壓縮檔案。
</p>
<p>要製作新的壓縮檔，同樣地:</p>

<pre class="sample">
 tar cyf foo.tar.bz2 檔名1 檔名2 檔名3...目錄1 目錄2...
</pre>

<p>下面是修補的地方:</p>
<pre class="sample">
*** tar.c       Thu Jun 11 00:09:23 1998
--- tar.c.new   Thu Jun 11 00:14:24 1998
***************
*** 196,201 ****
--- 196,203 ----
    {"block-number", no_argument, NULL, 'R'},
    {"block-size", required_argument, NULL, OBSOLETE_BLOCKING_FACTOR},
    {"blocking-factor", required_argument, NULL, 'b'},
+   {"bzip2", required_argument, NULL, 'y'},
+   {"bunzip2", required_argument, NULL, 'y'},
    {"catenate", no_argument, NULL, 'A'},
    {"checkpoint", no_argument, &amp;checkpoint_option, 1},
    {"compare", no_argument, NULL, 'd'},
***************
*** 372,377 ****
--- 374,380 ----
                PATTERN                at list/extract time, a globbing PATTERN\n\
    -o, --old-archive, --portability   write a V7 format archive\n\
        --posix                        write a POSIX conformant archive\n\
+   -y, --bzip2, --bunzip2             filter the archive through bzip2\n\
    -z, --gzip, --ungzip               filter the archive through gzip\n\
    -Z, --compress, --uncompress       filter the archive through compress\n\
        --use-compress-program=PROG    filter through PROG (must accept -d)\n"),
***************
*** 448,454 ****
     Y  per-block gzip compression */

  #define OPTION_STRING \
!   "-01234567ABC:F:GK:L:MN:OPRST:UV:WX:Zb:cdf:g:hiklmoprstuvwxz"

  static void
  set_subcommand_option (enum subcommand subcommand)
--- 451,457 ----
     Y  per-block gzip compression */

  #define OPTION_STRING \
!   "-01234567ABC:F:GK:L:MN:OPRST:UV:WX:Zb:cdf:g:hiklmoprstuvwxyz"

  static void
  set_subcommand_option (enum subcommand subcommand)
***************
*** 805,810 ****
--- 808,817 ----
        case 'X':
        exclude_option = 1;
        add_exclude_file (optarg);
+       break;
+
+       case 'y':
+       set_use_compress_program_option ("bzip2");
        break;

        case 'z':
</pre>


<hr />

<table




>
  <tr
>
    <td class="BtdL"
><a href="Bzip2-4.html" accesskey="P">上一頁(P)</a></td
>
    <td class="BtdC"
><a href="index.html" accesskey="H">目錄(H)</a></td
>
    <td class="BtdR"
><a
href="Bzip2-5.html"
>下一頁(N)</a
></td
>
  </tr
>
  <tr
>
    <td  class="BtdL"
>使用 bzip2</td
>
    <td class="BtdC"
><a href="Bzip2-5.html" accesskey="T">到頂層(T)</a></td
>
    <td class="BtdR"
>使用 bzip2 來配合 less</td
>
  </tr
>
</table
>
<div> <a href="http://validator.w3.org/check/referer"><img src="../../../valid-xhtml10.png"  alt="符合 XHTML 1.0" class="ImgLogo"/></a> <a href="http://jigsaw.w3.org/css-validator/"><img class="ImgLogo" src="../../../vcss.png"  alt="符合 CSS"/></a> <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="Explanation of Level Double-A Conformance"><img class="ImgLogo" src="../../../wcag1AA.gif" alt="Level Double-A conformance icon,  W3C-WAI Web Content Accessibility Guidelines 1.0"/></a> <a href="http://www.w3.org/RDF/" title="RDF 資源描述架構"><img  src="../../../rdf.gif" class="ImgLogo" alt="表示該網頁支援資源描述架構"/></a> <a href="http://www.icra.org/_en/"><img src="../../../icra_sw.gif" alt="網路內容分級協會" class="ImgLogo"/></a></div>
</body>
</html>
