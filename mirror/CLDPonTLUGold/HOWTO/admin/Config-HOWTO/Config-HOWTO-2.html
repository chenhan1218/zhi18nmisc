<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xml:lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
 <title>2. 一般系統設定</title>
 <link href="Config-HOWTO-3.html" rel="next" title="3. 管理員的一般工作" />
 <link href="Config-HOWTO-1.html" rel="previous" title="1. 導言" />
<link href="../../style.css" rel="stylesheet" type="text/css" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html"  labels ratings (ca 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html"  labels ratings (n 0 s 0 v 0 l 0))'/>
<link href="index.html" rel="start" title="HOWTO：Configuration" />
<link href="index.html#content" rel="contents" />
<link href="http://tldp.org/HOWTO/Config-HOWTO/index.html" rel="alternate" title="原版" />
<link href="Config-HOWTO-1.html" rel="chapter" title="1.導言" />
<link href="Config-HOWTO-2.html" rel="chapter" title="2.一般系統設定" />
<link href="Config-HOWTO-3.html" rel="chapter" title="3.管理員的一般工作" />
<link href="Config-HOWTO-4.html" rel="chapter" title="4.軟件設置" />
<link href="Config-HOWTO-5.html" rel="chapter" title="5.設置軟件 " />
<link href="Config-HOWTO-6.html" rel="chapter" title="6.結束" />
<link href="Config-HOWTO.rdf" rel="meta" title="各章節的說明資訊" />
<link href="Config-HOWTO-2.html#ss2.1" rel="section" title="2.1 安全問題" />
<link href="http://www.seifried.org/lasg" rel="bookmark" title="Linux 安全管理員手冊" />
<link href="http://nic.com/ " rel="bookmark" title="Linux 安全手冊" />
<link href="http://www.cs.hut.fi/ssh/" rel="bookmark" title="Secure Shell" />
<link href="http://srp.stanford.edu/srp/" rel="bookmark" title="Secure Remote Password" />
<link href="Config-HOWTO-2.html#ss2.2" rel="section" title="2.2 工作日誌" />
<link href="Config-HOWTO-2.html#ss2.3" rel="section" title="2.3 鍵盤" />
<link href="Config-HOWTO-2.html#ss2.4" rel="section" title="2.4 啟動和援救軟片" />
<link href="ftp://metalab.unc.edu/pub/Linux/system/recovery" rel="bookmark" title="能找到救援磁片的 FTP 站" />
<link href="Config-HOWTO-2.html#ss2.5" rel="section" title="2.5 內核" />
<link href="http://www.Linuxhq.com/patch/20-p0591.html" rel="bookmark" title="修補 Cyrix 用的核心" />
<link href="http://www.Linuxhq.com/patch/20-p0239.html" rel="bookmark" title="大型游標的內核修補軟件" />
<link href="Config-HOWTO-2.html#ss2.6" rel="section" title="2.6 Sendmail停機 " />
<link href="Config-HOWTO-2.html#ss2.7" rel="section" title="2.7 硬盤性能" />
<link href="http://www.torque.net/" rel="bookmark" title="代用的 ppa 驅動程序" />
<link href="http:// Linux .wauug.org/pub/knaff/mtools" rel="bookmark" title="Mtools" />
<link href="Config-HOWTO-2.html#ss2.8" rel="section" title="2.8 并聯埠 Zip 磁碟機" />
<link href="Config-HOWTO-2.html#ss2.9" rel="section" title="2.9 設備驅動程序" />
<link href="Config-HOWTO-2.html#ss2.10" rel="section" title="2.10 聲卡" />
<link href="Config-HOWTO-2.html#ss2.11" rel="section" title="2.11 登錄信息" />
<link href="Config-HOWTO-2.html#ss2.12" rel="section" title="2.12 主機名稱" />
<link href="Config-HOWTO-2.html#ss2.13" rel="section" title="2.13 滑鼠（Mouse）" />
<link href="Config-HOWTO-2.html#ss2.14" rel="section" title="2.14 加載位置（Mount Points）" />
<link href="Config-HOWTO-2.html#ss2.15" rel="section" title="2.15 lilo(8) 和 LOADLIN.EXE" />
<link href="Config-HOWTO-2.html#ss2.16" rel="section" title="2.16 電子郵件" />
<link href="Config-HOWTO-2.html#ss2.17" rel="section" title="2.17 打印機的設置" />
<link href="Config-HOWTO-2.html#ss2.18" rel="section" title="2.18 SVGATextMode " />
</head> <body   > 
<table >
  <tr>
    <th colspan="3" class="HdTitle">HOWTO：Config</th>
  </tr>
  <tr>
    <td class="TtdL"> <a href="Config-HOWTO-1.html" accesskey="P">上一頁(P)</a> </td>
    <td class="TtdC">&nbsp;</td>
    <td class="TtdR"> <a href="Config-HOWTO-3.html" accesskey="N">下一頁(N)</a> </td>
  </tr>
</table>
<hr />
<h1>2. 一般系統設定</h1>



<h2><a name="ss2.1" id="ss2.1"></a>2.1 安全問題 </h2>

<p>在開始啟動系統之前，首先應該決定要採用何種級別的安全規範。在作出這項決定之前，不要將電腦與網絡連接。
電腦安全是極其重要的問題，但它不屬於這份 HOWTO 的討論範圍。不過，要了解電腦的安全問題可從兩方面著手：&lt;&lt;<a href="http://www.seifried.org/lasg">Linux
安全管理員手冊</a>&gt;&gt;（ Linux
  Security Administrator's Guide）

和&lt;&lt;<a href="http://nic.com/%20">Linux 安全手冊</a>&gt;&gt;（ Linux  Security Guide）
（譯註：此處英文原文有漏） 
下列步驟：使用Shadow password（Shadow Password  HOWTO ）限制網路進入機器（Section 
<a href="Config-HOWTO-3.html#Restricting">限制網路進入Restricting Network Access</a>）、
使用 <a href="http://www.cs.hut.fi/ssh/">Secure
Shell</a> 或使用
<a href="http://srp.stanford.edu/srp/">Secure Remote Password</a> 。祝您好運。</p>

<h2><a name="ss2.2" id="ss2.2"></a>2.2 工作日誌 </h2>

<p>要保證安裝順利，<em>必須</em>確切知道機器裡安裝了什麼，何時作了修改，何時作了清除。因此，在動手之前，首先應該建立一本“工作日誌”，紀錄作為 root 的一切舉動；在我的工作日誌中，有一節專門紀錄所有改動的系統文檔、增加的 .rpms 和安裝的 .tar.gz。理論上，往回追溯以往的任何改變，應該可以回復到最初原始的安裝狀態。</p>
<p>千萬記住，在改動任何系統文件之前，製作備份。更理想的是用 RCS；這樣就能追蹤以往的所有改變。作為 root，決不可隨意改動系統而不加紀錄。</p>

<h2><a name="ss2.3" id="ss2.3"></a>2.3 鍵盤 </h2>


<p>如在安裝時遺漏了這一步驟，或改用了他種鍵盤，則需要：</p>
<ul>
<li> 從/usr/lib/kbd/keymaps/中選取適當的鍵盤表；例如，it.map 就代表義大利鍵盤；
</li>
<li> 編輯/etc/sysconfig/keyboard文檔，使其讀取：KEYTABLE="it";
</li>
<li> 設定鍵盤的重複率和延遲時間，將以下內容加附到 /etc/rc.d/rc.sysinit (Red Hat) 或 /etc/rc.d/rc.boot (Caldera)
  或 /etc/rc.d/boot (S.u.S.E.):
    <pre class="sample">/sbin/kbdrate -s -r 16 -d 500
# or whatever you like --或其他設定的數值
</pre>
</li>
</ul>

<p>要載入鍵盤表，使用/etc/rc.d/init.d/keytable start指令。其他特殊鍵位將在以下各節再作說明。</p>
<p>要在開機時自動設定 NumLock，則在/etc/rc.d/rc.sysinit中加入以下內容：</p>

<pre class="sample">
for tty in /dev/tty[1-9]*; do
  setleds -D +num &lt; $tty
done
</pre>

<h2><a name="ss2.4" id="ss2.4"></a>2.4 啟動和援救軟片 </h2>


<p>為剛安裝好的系統，應該製作兩、三張啟動軟片，以備不時之需。您使用的 Linux 版本可能已經包括了製作這種軟片的指令，否則可用下列指令：</p>


<pre class="sample">
#
#
（譯註：作者似乎忘了填入指令）
</pre>

<p>此外，至少也要製作几片援救軟片。可以在 <a href="ftp://metalab.unc.edu/pub/Linux/system/recovery">FTP</a> 站台找到各種援救軟片；
如果您不知道選用哪一種，我建議您試試 Tomsbtrt。</p>

<h2><a name="ss2.5" id="ss2.5"></a>2.5 內核 </h2>

<p>IMHO，其次首先要做的工作是編制最適合您的系統的內核。編制工作並不困難，但無論如何都先看一看/usr/src/Linux/內的README檔或內核 HOWTO （Kernel  HOWTO ）。注意事項：</p>
<p></p>
<ul>
<li>仔細想清楚需要電腦完成何種工作。一次選定內核，同時作出必要的修補（patch)，遠比每月作一次設置或編譯一次內核來得省事；如果把 Linux
  作為伺服器使用，尤應如此。不要忘記把未來可能會增加的硬件（例如，SCSI、Zip和網路卡等）都先編制在內核內；通常利用模組是最好的辦法；

</li>
<li>如果你的電腦用 Cyrix 芯片，而內核對它的支持不足，則應作出<a href="http://www.Linuxhq.com/patch/20-p0591.html">必要修補</a>，以便提高電腦性能。</li>
<li>使用筆記型電腦的用戶應改進屏幕的視覺效果。我曾經建議修補內核，但SVGATextMode （見 
<a href="#SVGA">SVGATextMode</a>一節）可能是最理想的解決辦法。不論採用何種辦法，都可以在網路上找到<a href="http://www.Linuxhq.com/patch/20-p0239.html">大型游標的內核修補軟件</a>。
</li>
<li>此外，<em>不要</em>將筆記型電腦串行 PCMCIA modem/fax 卡作為模組編譯；將其作為內核的一部分編譯，否則，PCMCIA modem 就無法運作；
</li>
<li>如果使用 PCMCIA 卡，記住務必編譯這些模組；此外，如果使用 PCMCIA 網路卡，不要忘記修改/etc/pcmcia/network.opts；
</li>
<li>如果屏幕顯示來自modprobe的信息，指出不能確定某些模組的位置，這表示需要修改/etc/conf.modules。例如，如果不使用ipx和appletalk模組，則增加下列兩行：

  <pre class="sample">
alias net-pf-4 off
alias net-pf-5 off
</pre>
</li>
<li>為了節省下次配置和編譯內核的時間，不妨將配置設定作為一個文檔妥善保存。注意：
如果內核升級，則這個配置設定檔必然無用，因為它沒有包含新內核的各種要素。
</li>
</ul>
<h2><a name="ss2.6" id="ss2.6"></a>2.6 Sendmail停機 </h2>


<p>有些系統的sendmail會使機器在啟動時停頓兩、三分鐘。原因有二：
（1）機器沒有與網際網路直接連接；（2）直接連接網際網路，並有永久的IP地址。</p>
<p>立即解決第一種問題的辦法是確定/etc/hosts內有下列一行：
</p>
<pre class="sample">
127.0.0.1   localhost
</pre>
<p>造成停頓的第二種原因是往往在/etc/hosts內有內容如下的一行：
</p>
<pre class="sample">
127.0.0.1   localhost   your_host_name
</pre>
<p>可將其分成以下兩行：</p>
<pre class="sample">
127.0.0.1    localhost
w.x.y.z      your_host_name
</pre>
<p>同時請參考
<a href="#Hostname">Hostname</a>一節</p>


<h2><a name="ss2.7" id="ss2.7"></a>2.7 硬盤性能 </h2>

<p>如果<em>謹慎</em>使用 hdparm(8)就會大大提高 (E)IDE 硬盤的性能。假設使用的 Linux 中沒有包含這個軟件，可從
<a href="ftp://metalab.unc.edu/pub/Linux/system/hardware">ftp://metalab.unc.edu/pub/Linux/system/hardware</a>查找；設法在這個網址上找一個稱為hdparm-X.Y.tar.gz的軟件。</p>
<p>由于使用這個軟件的細節取決于硬盤的種類和控制程序，因此在此無法提出通則。使用不當，
可能會損及文檔系統，因此使用之前，務必詳細閱讀 man 說明。以最簡單的例子而言，在/etc/rc.d/rc.sysinit內可增加一行，內容如下：</p>
<pre class="sample">/sbin/hdparm -c1 /dev/hda
#  -- 假定為第一個 IDE 硬盤
</pre>
<p>這行提供了 (E)IDE 32-bit I/O 的支持。關於 -m 選項，hdparm的作者 Mark Lord 告訴我：</p>
<p>

(...) 如果系統內的組件是前几年的產品 [&lt; 1997]，一般都沒有問題。如果是老舊的設備，可能不行（但也許沒問題）。真正發生問題的是
2 - 3 年前在 486 和 （早期）586 母板上廣泛使用的 CMD0646 和 RZ1000 這兩種晶片。
</p>
<p>下列設置應可使用于最近的電腦：</p>
<pre class="sample">
/sbin/hdparm -c1 -A1 -m16 -d1 /dev/hda
</pre>

<h2><a name="ss2.8" id="ss2.8"></a>2.8 并聯埠 Zip 磁碟機
</h2>

<p>利用最近內核（2.x.x）所帶的驅動程序就可使用并聯埠的 Zip 磁碟機。在設置內核時，務必加裝使用 SCSI 和 SCSI 磁盤的功能。注意：打印機和 Zip 磁碟機共用并聯埠時可能會發生衝突，因此最好使用內核模組設置。在
<a href="http://www.torque.net/">http://www.torque.net/</a> 上還有一個代用的 ppa 驅動程序。</p>
<p>Zip 磁片出售時已經格式化，其分割為 /dev/sda4。在設定 Zip 磁碟機時，在 /etc/rc.d/rc.sysinit 檔中加附下列內容：</p>


<pre class="sample">
# Enable the Zip drive  -- 設定 Zip 磁碟機
/sbin/modprobe ppa
</pre>

<p>Zip 磁片可在/etc/fstab中加列以下內容或通過 Mtools 在/etc/mtools.conf中增加下列內容加載：</p>


<pre class="sample">
drive z: file="/dev/sda4" exclusive
</pre>

<p>此外，mzip指令也可用于彈出、查詢機況、讀寫和附加密碼于 Zip 磁片；詳情請查閱man
mzip和 <a href="http://%20Linux%20.wauug.org/pub/knaff/mtools">Mtools</a>。</p>

<h2><a name="ss2.9" id="ss2.9"></a>2.9 設備驅動程序
</h2>

<p>列在/dev中（或連接到實際設備驅動程序）的設備可能並不確切。檢查滑鼠、數據機和光碟驅動程序對應的設備為何，然後作出下列設定：</p>


<pre class="sample">
/dev# ln -s ttyS0 mouse; ln -s ttyS1 modem; ln -s hdb cdrom; ln -s sda4 zip
</pre>
<p>在多數筆記本電腦上，鼠標的設置是/dev/psaux：在設置 X11 時應將此列入考慮。</p>

<p>不妨將這些設置都通過 chmod 666 改變屬性，使所有使用者均可使用這些設備。</p>


<h2><a name="ss2.10" id="ss2.10"></a>2.10 聲卡
</h2>


<p>我只有一張舊聲卡 Sound Blaster 16；即使您的聲卡與我的不同，不過下列方法也可引導您如何設置聲卡。</p>
<p>我將聲卡的驅動程序作為模組(sb.o)編入內核。然後將下列內容列入/etc/conf.modules：</p>


<pre class="sample">
options sb io=0x220 irq=5 dma=1 dma16=5 mpu_io=0x330
alias sound sb
</pre>

<p>要啟動聲卡，首先運行modprobe sound，或者使用 RedHat 的工具sndconfig。</p>

<h2><a name="ss2.11" id="ss2.11"></a>2.11 登錄信息
</h2>

<p>如要自設登錄信息，首先檢查/etc/rc.d/rc.local是否覆蓋/etc/issue和/etc/motd的內容。（RedHat 覆蓋內容）如屬肯定，請打開文本編輯器。</p>
<p>如要使登錄信息帶有顏色，可在rc.local中列入下列內容：</p>


<pre class="sample">
# put a real escape character instead of ^[. To do this:
# emacs: ^Q ESC   vi: ^V ESC   joe:  ` 0 2 7   jed: ` ESC
ESC="^["  # a real escape character
BLUE="$ESC[44;37m"
NORMAL="$ESC[40;37m"
CLEAR="$ESC[H$ESC[J"

> /etc/issue
echo "$CLEAR" >> /etc/issue
echo "$BLUE   Welcome to MyServer (192.168.1.1) " >> /etc/issue
echo "$NORMAL " >> /etc/issue
echo "" >> /etc/issue
  </pre>

<h2> <a name="ss2.12" id="ss2.12"></a>2.12 主機名稱 </h2>

<p>只運行hostname new_host_name指令也許不夠。要解決sendmail死機的問題，可採用下列步驟（只適用于單機）：</p>
<ul>
<li> 編輯/etc/sysconfig/network和改變其中的主機名稱（例如new_host_name.localdomain）；</li>
<li> 相應地編輯/etc/HOSTNAME；
</li>
<li> 將新機名編入/etc/hosts；
  <pre class="sample">
127.0.0.1       localhost  new_host_name.locadomain
</pre>
</li></ul>


<h2><a name="ss2.13" id="ss2.13"></a>2.13 滑鼠（Mouse） </h2>


<p>gpm 的滑鼠功能對在主控台進行剪貼至為有用，也可在一些應用中使用滑鼠。在 Red Hat 系統中，檢查有否一個稱為/etc/sysconfig/mouse 的文檔，內容如下：</p>
<pre class="sample">
MOUSETYPE="Microsoft"
XEMU3=yes
</pre>

<p>此外，還得有一個/etc/rc.d/init.d/gpm檔，其中還可設定一些指令。我設定的指令如下：
</p>
<pre class="sample">
...
  daemon gpm -t $MOUSETYPE -d 2 -a 5 -B 132
   # two-button mouse -- 雙按鈕滑鼠
...
</pre>

<p>顯而易見，其中設置當然得與滑鼠的類型相符。在多數筆記型型電腦中， MOUSETYPE 應設為 “PS/2”。</p>
<p>在Caldera系統中，只要在/etc/rc.d/rc.boot中加入此行即可：
</p>
<pre class="sample">
/usr/bin/gpm
</pre>
  <p>在S.u.S.E.中，在/etc/rc.config中加入gpm部分；在Debian系統中，則需修改
/etc/gpm.conf。</p>
<p>如果喜歡用Ctrl按鈕使用主控台的菜單，則需設置gpm-root。修改
/etc/gpm-root.conf中的預設菜單，然後從/etc/rc.d/rc.local啟動
gpm-root。</p>

<h2><a name="ss2.14" id="ss2.14"></a>2.14 加載位置（Mount Points） </h2>


<p>為方便使用，應對軟盤、其他設備和NFS的輸出目錄設定加載位置。例如，可採用下列辦法：</p>
<pre class="sample">
/mnt# mkdir floppy; mkdir cdrom; mkdir win; mkdir zip; mkdir server
</pre>
  <p>此行設定了 DOS/Win 軟盤（ext2磁片）、CD-ROM、Windows 分割區、平行口 Zip 驅動器和 NFS 目錄的加載位置。</p>
<p>然後修改 /etc/fstab 檔，并增加下列內容：</p>
<pre class="sample">
/dev/fd0        /mnt/floppy     auto            user,noauto 0 1
/dev/cdrom      /mnt/cdrom      iso9660         ro,user,noauto 0 1
/dev/zip        /mnt/zip        vfat            user,noauto,exec 0 1
/dev/hda1       /mnt/win        vfat            user,noauto 0 1
server:/export  /mnt/server     nfs             defaults
</pre>

<p>顯而易見，第一欄必須使用正確的設備名稱。最近發表的內核已經支持 fat32；<a href="http://bmrc.berkeley.edu/people/chaffee/fat32.html">以前的內核需要修補</a>。有關這方面的進一步資料，可查詢
man mount。</p>
<p>注意第一行中的“auto”文檔系統格式；這表示可加載 ext2 和 vfat（DOS/Windows）兩種系統格式製作的磁片。mtools也是相當好用的工具。</p>

<h2><a name="ss2.15" id="ss2.15"></a>2.15 lilo(8) 和 LOADLIN.EXE </h2>


<p>許多使用者在電腦上同時運行 Linux 和 DOS/Windows 兩套操作系統，並在開機時選用其中之一；這應在安裝時作出設定，如果當時沒有設定，
可採取下列辦法解決。首先假定 /dev/hda1中裝有 DOS/Windows， 
/dev/hda2 中裝有 Linux .</p>
<pre class="sample">
將 /dev/hda 作為默認設備！

Command (m for help):a
Partition number (1-4): 2

Command (m for help):w
</pre>
<p>經過這項設定， Linux 分割區成為啟動操作系統。然後在/etc/lilo.conf中作出設定：</p>
<pre class="sample">
boot = /dev/hda2
compact      # may conflict with "linear"  --可能與“linear”衝突
delay = 100  # 10 seconds  --等待10秒
linear       # gets rid of the "1024 cylinder" problem --解決1024磁圈的問題
# message = /boot/bootmesg.txt 
# write your own, if you will --自訂開機信息
root = current
# boot  Linux  by default as this entry comes first --默認的內核
image = /boot/vmlinuz  
  label =  Linux 
  read-only
# append="mem=128M"  
# to see more memory than 64M  --如果記憶內存大於64M
other = /dev/hda1
  table = /dev/hda
  label = dos
</pre>
  <p>運行/sbin/lilo后就大功告成。由于lilo是安裝中極其重要的部分，
無論如何應該詳細閱讀有關這方面的資料。</p>
<p>如果不打算重作設定，而要從 DOS/Windows 內啟動 Linux ，可把 LOADLIN.EXE
放入一個屬於 DOS 路徑的子目錄（DOS 分割區）；然後將內核拷貝到該子目錄，例如C:\TEMP\VMLINUZ。利用下面簡單的
.BAT檔就可啟動 Linux：</p>
<pre class="sample">
rem    Linux .bat
smartdrv /C
loadlin c:\temp\vmlinuz root=/dev/hda2 ro
</pre>
  <p>如使用 Windows 9X，則設定這個.BAT檔的特性，使其從 MS-DOS 狀態啟動。</p>

<h3>安全考量</h3>


<p>在安裝 Linux 之前，先製作一張 MBR 區的備份磁片，以防不測。先運行restorrb（包括在FIPS的軟件包內），
或以下面的指令製作 Linux 的死機解救磁片：</p>
<pre class="sample">
rescue:
</pre>
  <p>然後至少製作兩片有MBR檔的磁片。如果一旦故障停機，
可用下列指令恢復原先的 MBR：
</p>
  <pre class="sample">
rescue:
</pre>
  <p>當然，這要在/mnt已加載包含MBR的磁片。否則，利用 DOS 的解救磁片運行FDISK /MBR。</p>


<h2><a name="ss2.16" id="ss2.16"></a>2.16 電子郵件 </h2>


<p>如何閱讀以 HTML 格式或含有其他各種文件格式的電子郵件呢？首先要有兩個文檔：/etc/mime.types
和/etc/mailcap。第一個文檔列出文件的格式及其擴展名：</p>

<pre class="sample">
application/postscript          ps eps
image/jpeg                      jpe jpeg jpg
text/html                       html
</pre>

<p>而第二個文檔規定如何顯示這種文檔的格式。</p>
<p>有時有的電子郵件使用 Microsoft Outlook 發送，其內容含有多重 MIME 格式。閱讀這類電子郵件需要在etc/mailcap中加入下列兩行：</p>
<pre class="sample">
text/plain; less %s; needsterminal
text/html; lynx -force_html %s; needsterminal
</pre>


<h2><a name="ss2.17" id="ss2.17"></a>2.17 打印機的設置 </h2>


<p>就我所知，各種 Linux 版本均有設置打印機的工具（printtool，yast或magicfilter）；
否則可用基本的手動設定。</p>
<p>假定要用非 PostScript 打印機（也非“Windows-only”的打印機）來打印原始文件（例如 C 程序的原始碼文本）和利用 GhostScript 來打印 PostScript 文檔（此處假定已安裝了 GhostScript）。</p>
<p>設定打印機的步驟如下：</p>
<p></p>
<ul>
<li> 檢查并行口的打印機：
  <pre class="sample">
~# echo "hello, world" > /dev/lp0
~# echo "hello, world" > /dev/lp1</pre>
    記下聯機的打印機和端口。
  
</li><li> 設定兩個 spool 子目錄：
  <pre class="sample">
/var/spool/lpd/# mkdir raw; mkdir postscript
</pre>
</li><li> 如果打印機印出的結果有“台階”現象（多數 InkJet 打印機都有這種現象），則需要一個過濾器。試印下面兩列：
  <pre class="sample">
~# echo "first line" > /dev/lp1 ; echo "second line" > /dev/lp1
</pre>
    如果印出的結果如下：
  <pre class="sample">
first line
          second line
</pre>
    將此文檔作為/var/spool/lpd/raw/filter保存：
  <pre class="sample">
#!/bin/sh
# 這個過濾器可消除“台階”現象
awk '{print $0, "\r"}'
</pre>
    運行chmod 755 /var/spool/lpd/raw/filter使其成為可執行文檔。
</li>
<li> 要製作用于PostScript仿真的過濾器，則將過濾器定名為 /var/spool/lpd/postscript/filter:
  <pre class="sample">
#!/bin/sh

DEVICE=djet500
RESOLUTION=300x300
PAPERSIZE=a4
SENDEOF=

nenscript -TUS -ZB -p- |
if [ "$DEVICE" = "PostScript" ]; then
        cat -
else
        gs -q -sDEVICE=$DEVICE \
                -r$RESOLUTION \
                -sPAPERSIZE=$PAPERSIZE \
                -dNOPAUSE \
                -dSAFER \
                -sOutputFile=- -
fi

if [ "$SENDEOF" != "" ]; then
        printf "\004"
fi
</pre>
    （上例使用 HP DeskJet 打印機。如為他種打印機，則作出相應修改。）
</li><li> 最後在/etc/printcap內增加下列內容：
  <pre class="sample">
# /etc/printcap
lp|ps|PS|PostScript|djps:\
        :sd=/var/spool/lpd/postscript:\
        :mx#0:\
        :lp=/dev/lp1:\
        :if=/var/spool/lpd/postscript/filter:\
        :sh:
raw:\
        :sd=/var/spool/lpd/raw:\
        :mx#0:\
        :lp=/dev/lp1:\
        :if=/var/spool/lpd/raw/filter:\
        :sh:
</pre>
</li></ul>

<p>其他更為複雜或少見的打印設置，請參考 Printing-HOWTO。</p>
<p>注意：如使用printtool，Printtool選取的 GSDEVICE 可以用于打印，但不一定是最好的選擇。不妨對postscript.cfg檔作些修改；例如，把 GSDEVICE 內cdj500 改為 djet500，就可加快打印的速度。</p>

<h2> <a name="ss2.18" id="ss2.18"></a>2.18 SVGATextMode </h2>


<p>放在
<a href="ftp://tsx-11.mit.edu/pub/ Linux /sources/sbin">ftp://tsx-11.mit.edu/pub/ Linux /sources/sbin</a>上的工具軟件對改變主控台的屏幕分辨率、字體和游標的形狀非常有用。
在主控台上工作時，需要使用重音字體的文字（譯註：如歐洲文字）
或需要改變筆記本電腦游標的大小都可使用這套軟件。</p>
<p>從默認的 VGA 參數開始，首先編輯/etc/TextConfig或/etc/TextMode。
使用歐洲文字的用戶應該對其中含有“LoadFont”一節感到慶幸。</p>


<pre class="sample">
Option "LoadFont"
FontProg "/usr/bin/setfont"
FontPath "/usr/lib/kbd/consolefonts"
FontSelect "lat1u-16.psf"   8x16 9x16 8x15 9x15
FontSelect "lat1u-14.psf"   8x14 9x14 8x13 9x13
FontSelect "lat1u-12.psf"   8x12 9x12 8x11 9x11
FontSelect "lat1u-08.psf"   8x8  9x8  8x7  9x7
</pre>

<p>完成這項設定之後，運行SVGATextMode "80x34x9"。如果覺得一切運行順利，從/etc/TextMode中刪除警告，并將下行寫入
etc/rc.d/rc.sysinit：</p>
<pre class="sample">
# SVGATextMode
/usr/sbin/SVGATextMode "80x34x9"
</pre>
  <p>注意：方塊游標只在有些模式下有效；在我的筆記本電腦上，其數值為“80x32x9”。</p>

<hr/>
<table >
  <tr>
    <td class="BtdL"> <a href="Config-HOWTO-1.html" accesskey="P">上一頁(P)</a> </td>
    <td class="BtdC"> <a href="index.html" accesskey="H">目錄(H)</a> </td>
    <td class="BtdR"> <a href="Config-HOWTO-3.html">下一頁(N)</a> </td>
  </tr>
  <tr>
    <td class="BtdL">導言</td>
    <td class="BtdC"><a href="Config-HOWTO-2.html"  accesskey="T">到頂層(T)</a></td>
    <td class="BtdR">管理員的一般工作</td>
  </tr>
</table>
<div> <a href="http://validator.w3.org/check/referer"><img src="../../../valid-xhtml10.png"  alt="符合 XHTML 1.0" class="ImgLogo"/></a> <a href="http://jigsaw.w3.org/css-validator/"><img class="ImgLogo" src="../../../vcss.png"  alt="符合 CSS"/></a> <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="Explanation of Level Double-A Conformance"><img class="ImgLogo" src="../../../wcag1AA.gif" alt="Level Double-A conformance icon,  W3C-WAI Web Content Accessibility Guidelines 1.0"/></a> <a href="http://www.w3.org/RDF/" title="RDF 資源描述架構"><img  src="../../../rdf.gif" class="ImgLogo" alt="表示該網頁支援資源描述架構"/></a> <a href="http://www.icra.org/_en/"><img src="../../../icra_sw.gif" title="網路內容分級協會" alt="網路內容分級協會" class="ImgLogo"/></a></div>
</body>
</html>
