<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xml:lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
 <title> Linux 的 Database-SQL-RDBMS HOWTO 文件 (PostgreSQL 物件關聯資料庫系統): 移植 PostgreSQL 到視窗 95 / 視窗 NT</title>
 <link href="PostgreSQL-HOWTO-27.html" rel="next" />
 <link href="PostgreSQL-HOWTO-25.html" rel="previous" />
   <link href="index.html" rel="start" title="HOWTO：Database-SQL-RDBMS HOWTO for Linux" />
 <link href="index.html#content" rel="contents" />
 <link href="index.html#appendix" rel="appendix" title="附錄" />
 <link href="http://www2.tw.postgresql.org/" rel="alternate" title="來源處" />
 <link href="PostgreSQL-HOWTO-1.html" rel="chapter" title="1.引言" />
 <link href="PostgreSQL-HOWTO-2.html" rel="chapter" title="2.物理定律適用於電腦軟件！" />
 <link href="PostgreSQL-HOWTO-3.html" rel="chapter" title="3.PostgreSQL 是什麼？" />
 <link href="PostgreSQL-HOWTO-4.html" rel="chapter" title="4.哪個較好？PostgreSQL 還是 MySQL？" />
 <link href="PostgreSQL-HOWTO-5.html" rel="chapter" title="5.何處取得 ?" />
 <link href="PostgreSQL-HOWTO-6.html" rel="chapter" title="6.PostgreSQL 快速安裝指引" />
 <link href="PostgreSQL-HOWTO-7.html" rel="chapter" title="7.快速開始指引" />
 <link href="PostgreSQL-HOWTO-8.html" rel="chapter" title="8.PostgreSQL 支援超過 200 Gig 的超級資料庫" />
 <link href="PostgreSQL-HOWTO-9.html" rel="chapter" title="9.憑什麼相信 PostgreSQL？Regression 測試套件為用戶建立信心" />
 <link href="PostgreSQL-HOWTO-10.html" rel="chapter" title="10.資料庫保安" />
 <link href="PostgreSQL-HOWTO-11.html" rel="chapter" title="11.PostgreSQL 的前端 GUI 工具（圖像使用者界面）" />
 <link href="PostgreSQL-HOWTO-12.html" rel="chapter" title="12.PostgreSQL 的介面驅動程式" />
 <link href="PostgreSQL-HOWTO-13.html" rel="chapter" title="13.PostgreSQL 的 Perl 資料庫介面 (Database Interface, DBI) " />
 <link href="PostgreSQL-HOWTO-14.html" rel="chapter" title="14.PostgreSQL 管理工具 " />
 <link href="PostgreSQL-HOWTO-15.html" rel="chapter" title="15.PostgreSQL 用的中央處理器" />
 <link href="PostgreSQL-HOWTO-16.html" rel="chapter" title="16.只使用一個顯示器 (monitor) 來設定多台 PostgreSQL 電腦" />
 <link href="PostgreSQL-HOWTO-17.html" rel="chapter" title="17.PostgreSQL 的萬維網應用程式伺服器" />
 <link href="PostgreSQL-HOWTO-18.html" rel="chapter" title="18.PostgreSQL 的應用程式和工具" />
 <link href="PostgreSQL-HOWTO-19.html" rel="chapter" title="19.資料庫設計工具—實體關係圖 (Entity Relation Tool) 工具" />
 <link href="PostgreSQL-HOWTO-20.html" rel="chapter" title="20.PostgreSQL 的互聯網資料庫設計/完成工具—EARP" />
 <link href="PostgreSQL-HOWTO-21.html" rel="chapter" title="21.PHP Hypertext PreProcessor—PostgreSQL 的伺服器端 html 嵌入命令稿語言" />
 <link href="PostgreSQL-HOWTO-22.html" rel="chapter" title="22.PostgreSQL 的 Python 介面" />
 <link href="PostgreSQL-HOWTO-23.html" rel="chapter" title="23.PostgreSQL 和萬維網的閘路 (gateway) — WDB-P95" />
 <link href="PostgreSQL-HOWTO-24.html" rel="chapter" title="24.&quot;C&quot;, &quot;C++&quot;, ESQL/C 語言介面和 PostgreSQL 的逐位運算元 (Bitwise Operators)" />
 <link href="PostgreSQL-HOWTO-25.html" rel="chapter" title="25.PostgreSQL 的日文假名碼 (Kanji Code)" />
 <link href="PostgreSQL-HOWTO-26.html" rel="chapter" title="26.移植 PostgreSQL 到視窗 95 / 視窗 NT" />
 <link href="PostgreSQL-HOWTO-27.html" rel="chapter" title="27.通信論壇" />
 <link href="PostgreSQL-HOWTO-28.html" rel="chapter" title="28.文件和參考書" />
 <link href="PostgreSQL-HOWTO-29.html" rel="chapter" title="29.PostgreSQL 的技術支援" />
 <link href="PostgreSQL-HOWTO-30.html" rel="chapter" title="30.經濟和商業方面" />
 <link href="PostgreSQL-HOWTO-31.html" rel="chapter" title="31.其他資料庫的名單" />
 <link href="PostgreSQL-HOWTO-32.html" rel="chapter" title="32.萬維網搜尋提示" />
 <link href="PostgreSQL-HOWTO-33.html" rel="chapter" title="33.結論" />
 <link href="PostgreSQL-HOWTO-34.html" rel="chapter" title="34.FAQ—有關 PostgreSQL 的問題" />
 <link href="PostgreSQL-HOWTO-35.html" rel="chapter" title="35.本文件的其他格式" />
 <link href="PostgreSQL-HOWTO-36.html" rel="chapter" title="36.版權和授權" />
 <link href="PostgreSQL-HOWTO-37.html" rel="appendix" title="附錄甲—ANSI/ISO SQL 1992 語法 " />
 <link href="PostgreSQL-HOWTO-38.html" rel="appendix" title="附錄乙—初學者 SQL 導引 " />
 <link href="PostgreSQL-HOWTO-39.html" rel="appendix" title="附錄丙—Linux 快速安裝指引 " />
 <link href="PostgreSQL-HOWTO-40.html" rel="appendix" title="附錄丁—安裝 Midgard" />
 <meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html"  labels ratings (ca 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html"  labels ratings (n 0 s 0 v 0 l 0))'/>
 <link href="PostgreSQL-HOWTO.rdf" rel="meta" title="各章節的說明資訊" />
 <link href="../../style.css" rel="stylesheet" type="text/css" />
 <link href="PostgreSQL-HOWTO-26.html#ss26.1" rel="section" title="26.1 NT 版的作者 " />
 <link href="PostgreSQL-HOWTO-26.html#ss26.2" rel="section" title="26.2 安裝 Cygwin 套件" />
 <link href="PostgreSQL-HOWTO-26.html#ss26.3" rel="section" title="26.3 設定 Bash 視窗 " />
 <link href="PostgreSQL-HOWTO-26.html#ss26.4" rel="section" title="26.4 安裝 Andy Piper 工具" />
 <link href="PostgreSQL-HOWTO-26.html#ss26.5" rel="section" title="26.5 安裝 Ludovic Lange 的 Cygwin32 IPC 套件" />
 <link href="PostgreSQL-HOWTO-26.html#ss26.6" rel="section" title="26.6 安裝 PostgreSQL" />
</head> <body   > 
<table >
  <tr>
    <th colspan="3" class="HdTitle">HOWTO：Database-SQL-RDBMS
      HOWTO for Linux</th>
  </tr>
  <tr>
    <td class="TtdL"> <a href="PostgreSQL-HOWTO-25.html" accesskey="P">上一頁(P)</a> </td>
    <td class="TtdC">&nbsp;</td>
    <td class="TtdR"> <a href="PostgreSQL-HOWTO-27.html" accesskey="N">下一頁(N)</a> </td>
  </tr>
</table>
<hr />
<h1>26. 移植 PostgreSQL 到視窗 95 / 視窗 NT</h1>

<p>視窗 NT 版的 PostgreSQL 二元檔可在以下地方找到︰</p>
<ul>
<li> 視窗 NT PostgreSQL 二元檔 
<a href="http://www.askesis.nl">http://www.askesis.nl</a></li>
<li> 
<a href="http://www.postgresql.org">http://www.postgresql.org</a></li>
</ul>

<p>下載可執行檔，將它解壓，並從第十三步開始跟從
<a href="#installpgsql">安裝 PostgreSQL</a>。</p>
<p>如果你想重新編譯原程式碼，請跟從以下指示。移植到視窗 NT 要使用 Cygnus 
cygwin32 套件，它包括視窗 NT/95 的 gcc、gmake。</p>
<ul>
<li> Cygwin 32 套件在 
<a href="http://www.cygnus.com/misc/gnu-win32">http://www.cygnus.com/misc/gnu-win32</a>
找到</li>
</ul>

<p>到此網頁取得 cdk.exe 檔（gnu-win32 的自我解壓檔）
（譯按︰此工具已改名為 cygwin，網址為 
<a href="http://sourceware.cygnus.com">http://sourceware.cygnus.com</a>。）</p>
<h2><a name="ss26.1" id="ss26.1"></a>26.1 NT 版的作者
</h2>

<p>PostgreSQL NT 版的作者為—</p>
<ul>
<li> Daniel Horak 
<a href="mailto:horak@mmp.plzen-city.cz">horak@mmp.plzen-city.cz</a></li>
<li> Joost Kraaijeveld
<a href="mailto:JKraaijeveld@askesis.nl">JKraaijeveld@askesis.nl</a></li>
<li> Kevin Lo
<a href="mailto:kevlo@FreeBSD.org">kevlo@FreeBSD.org</a></li>
<li> NT 版的網頁在 
<a href="http://www.freebsd.org/~kevlo/postgres/portNT.html">http://www.freebsd.org/~kevlo/postgres/portNT.html</a></li>
</ul>

<h2><a name="ss26.2" id="ss26.2"></a>26.2 安裝 Cygwin 套件
</h2>

<p></p>
<ol>
<li> 下載 
<a href="ftp://go.cygnus.com/pub/sourceware.cygnus.com/cygwin/latest/full.exe">ftp://go.cygnus.com/pub/sourceware.cygnus.com/cygwin/latest/full.exe</a></li>
<li> 執行 full.exe，安裝到 c:\Unix\Root 目錄。</li>
<li> 執行 Cygwin，鍵入‘mount --help’以閱讀文件。你可用 -f
選項強制掛上。之後執行“umount / " 和“mount c:\Unix\Root /”</li>
</ol>

<h2><a name="ss26.3" id="ss26.3"></a>26.3 設定 Bash 視窗
</h2>

<p>安裝 Cygwin 套件後，請進行以下工作以設定工作環境︰</p>
<p>1. 安裝 Vi 編輯器‘Vim’。請參閱
<a href="http://metalab.unc.edu/LDP/HOWTO/Vim-HOWTO.html">http://metalab.unc.edu/LDP/HOWTO/Vim-HOWTO.html</a></p>
<p>2. cygwin bash 的預定視窗是一個廿四行，底色為黑色的視窗。要設定 bash
視窗的底色和大小，按開始->控制台->MS DOS 主控台，把底色設定為黑色，
大小改為七十行。</p>
<p>（或）右擊視窗標題列，改變內容。</p>
<p>3. 編輯 c:\cygnus\cywinb20 中的 cygnus.bat 和作以下設定—
</p>
<pre class="sample">
set HOME=c:\cygnus\cygwinb20
bash --login
</pre>

<p>及編輯 &nbsp;/.bash_profile 加上這幾行
</p>
<pre class="sample">
set -o vi
PATH=$PATH:/usr/local/bin:/usr/bin
export PATH
</pre>

<p>4. 要啟用指令列歷史編輯，鍵入—</p>
<p>bash$ set -o vi</p>
<p>使用 l、k、j、h，你可用 vi
指令編輯指令列歷史。你可重覆和修改之前的指令，以節省打字時間。</p>
<p>5. 你可用以下指令掛上磁碟機 / 目錄—</p>
<p>
</p>
<pre class="sample">
bash$ umount /
bash$ mount "c:\cygnus"  /
bash$ mount "c:\cygnus\cygwin-b20\postgres" /usr/local/pgsql
</pre>

<p>6. 用以下指令閱讀線上求助訊息—
</p>
<pre class="sample">
bash$ mount --help
bash$ ls --help
</pre>


<h2><a name="ss26.4" id="ss26.4"></a>26.4 安裝 Andy Piper 工具
</h2>

<p></p>
<ol>
<li>到 
<a href="ftp://ftp.xemacs.org/pub/xemacs/aux/">ftp://ftp.xemacs.org/pub/xemacs/aux/</a> 下載 
cygwin-b20-local.tar.bz2 到 
c:/Unix/Root 目錄。 </li>
<li> cd c:/Unix/Root; bunzip2 cygwin-b20-local.tar.bz2 </li>
<li> tar -xvf cygwin-b20-local.tar </li>
<li> cd /local/bin; sh check_cygwin_setup.sh </li>
<li> 完成第四步後，你會看到以下訊息︰

<pre class="sample">
You don't have /bin would you like to mount cygwin as /bin?" 
[ y/n ]   
選‘n’，其他問題則選‘y’。
</pre>
</li>
<li> mount c:/Unix/Root/cygwin-b20/H-i586-cygwin32/i586-cygwin32/bin 
/bin </li>
<li> cd c:/Unix/Root/cygwin-b20/H-i586-cygwin32/i586-cygwin32; mkdir 
libexec share 
man etc sbin info </li>
<li> cp -R /local/{ bin,libexec,share,man,etc,sbin,info,include }</li>
</ol>

<h2><a name="ss26.5" id="ss26.5"></a>26.5 安裝 Ludovic Lange 的 Cygwin32 IPC 套件
</h2>

<p></p>
<ol>
<li> 到 
<a href="http://www.multione.capgemini.fr/tools/pack_ipc">http://www.multione.capgemini.fr/tools/pack_ipc</a> 下載 
cygwin32_ipc-1.03.tgz 到 c:/Unix/Root 目錄。</li>
<li> tar -zxvf cygwin32_ipc-1.03.tgz </li>
<li> cd cygwin32_ipc-1.03/src and run 'make' </li>
<li> mkdir -p c:/usr/local/{bin,include,lib,include/sys} 

<pre class="sample">
cp /cygwin32_ipc-1.03/bin/* c:/usr/local/bin 
cp /cygwin32_ipc-1.03/include/sys/* c:/usr/local/include/sys 
cp /cygwin32_ipc-1.03/lib/* c:/usr/local/lib 
cp c:/usr/local/bin/* /bin 
cp c:/Unix/Root/cygwin-b20/H-i586-cygwin32/bin/* /bin 
</pre>
mount c:/usr/local/bin /usr/local/bin 

<pre class="sample">
mount c:/usr/local/include /usr/local/include 
mount c:/usr/local/lib /usr/local/lib 
cp /local/lib/* /usr/local/lib 
</pre>
</li>
</ol>

<h2> <a name="ss26.6" id="ss26.6"></a>26.6 安裝 PostgreSQL 
</h2>

<ol>
<li> 下載最新的 PostgreSQL 源程式碼</li>
<li> Postgres 把所有檔案當作二元檔，所以會遇到 lf/cf 
問題，我們要做第二至五步︰

<pre class="sample">
mkdir -p c:/Postgres/{Source,Binary} 
mkdir c:/Postgres/Binary/pgsql 
mkdir -p /usr/src/pgsql 
mkdir -p /usr/local/pgsql 
</pre>
</li>
<li> 把 Postgres 源程式碼拷貝到 c:/Postgres/Source 目錄，之後
tar -zxvf postgresql-6.5.3.tar.gz </li>
<li> mv postgresql-6.5.3 pgsql </li>
<li> 現在掛上各個目錄—

<pre class="sample">
mount -b c:/Postgres/Binary/pgsql /usr/local/pgsql 
mount c:/Postgres/Source/pgsql /usr/src/pgsql 
mount c:/Unix/Root/cygwin-b20/share /sw/cygwin-b20/share 
</pre>
</li>
<li> mkdir -p /usr/local/pgsql/{bin,include,lib,data} </li>
<li> cd /usr/src/pgsql/src/win32 </li>
<li> 拷貝標頭檔—

<pre class="sample">
cp un.h c:/Unix/Root/cygwin-b20/H-i586-cygwin32/i586-cygwin32/include/sys 
cp endian.h c:/Unix/Root/cygwin-b20/H-i586-cygwin32/i586-cygwin32/include 
cp tcp.h c:/Unix/Root/cygwin-b20/H-i586-cygwin32/i586-cygwin32/include/netinet 
</pre>
</li>
<li> ln -s /usr/local/lib /usr/src/pgsql/src/backend/libpostgres.a </li>
<li> cd /usr/src/pgsql/src, 之後執行 './configure' </li>
<li> make > make.txt 2>&amp;1 </li>
<li> make install  > make.install.txt 2>&amp;1 </li>
<li> cp /usr/local/pgsql/lib/pq.dll /usr/local/pgsql/bin </li>
<li> 在 make install 之後你要把 bin 和 lib 目錄中的文字檔轉換，以清除 cr/lf 
和 eof 之類東西。</li>
<li> 在 / 目錄使用任何編輯器產生 .bashrc 如下︰

<pre class="sample">
PATH=$PATH:/usr/local/pgsql/bin:/usr/local/bin 
PGDATA=/usr/local/pgsql/data 
PGLIB=/usr/local/pgsql/lib 
LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/local/lib 
export LD_LIBRARY_PATH PATH PGDATA PGLIB 
</pre>
</li>
<li> source /.bashrc, 之後執行 'initdb --username=xxxx' 
要注意資料庫系統的擁有人不可以是 root/administrator。</li>
<li> 編輯 /usr/local/pgsql/data/pg_hba.conf 檔，如︰

<pre class="sample">
host        all     163.17.11.109   255.255.255.0   trust 
</pre>
</li>
<li> ipc-daemon.exe&amp; </li>
<li> postmaster -i&amp; </li>
<li> 執行 ' psql -h host_name template1'</li>
</ol>

<hr/>
<div> <a href="http://validator.w3.org/check/referer"><img src="../../../valid-xhtml10.png"  alt="符合 XHTML 1.0" class="ImgLogo"/></a> <a href="http://jigsaw.w3.org/css-validator/"><img class="ImgLogo" src="../../../vcss.png"  alt="符合 CSS"/></a> <a href="http://www.icra.org/_en/"><img src="../../../icra_sw.gif" title="網路內容分級協會" alt="網路內容分級協會" class="ImgLogo"/></a></div>
</body>
</html>
