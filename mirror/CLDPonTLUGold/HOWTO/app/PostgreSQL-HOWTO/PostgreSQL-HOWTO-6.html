<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xml:lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
 <title> Linux 的 Database-SQL-RDBMS HOWTO 文件 (PostgreSQL 物件關聯資料庫系統): PostgreSQL 快速安裝指引 </title>
 <link href="PostgreSQL-HOWTO-7.html" rel="next" />
 <link href="PostgreSQL-HOWTO-5.html" rel="previous" />
  <link href="index.html" rel="start" title="HOWTO：Database-SQL-RDBMS HOWTO for Linux" />
 <link href="index.html#content" rel="contents" />
 <link href="index.html#appendix" rel="appendix" title="附錄" />
 <link href="http://www2.tw.postgresql.org/" rel="alternate" title="來源處" />
 <link href="PostgreSQL-HOWTO-1.html" rel="chapter" title="1.引言" />
 <link href="PostgreSQL-HOWTO-2.html" rel="chapter" title="2.物理定律適用於電腦軟件！" />
 <link href="PostgreSQL-HOWTO-3.html" rel="chapter" title="3.PostgreSQL 是什麼？" />
 <link href="PostgreSQL-HOWTO-4.html" rel="chapter" title="4.哪個較好？PostgreSQL 還是 MySQL？" />
 <link href="PostgreSQL-HOWTO-5.html" rel="chapter" title="5.何處取得 ?" />
 <link href="PostgreSQL-HOWTO-6.html" rel="chapter" title="6.PostgreSQL 快速安裝指引" />
 <link href="PostgreSQL-HOWTO-7.html" rel="chapter" title="7.快速開始指引" />
 <link href="PostgreSQL-HOWTO-8.html" rel="chapter" title="8.PostgreSQL 支援超過 200 Gig 的超級資料庫" />
 <link href="PostgreSQL-HOWTO-9.html" rel="chapter" title="9.憑什麼相信 PostgreSQL？Regression 測試套件為用戶建立信心" />
 <link href="PostgreSQL-HOWTO-10.html" rel="chapter" title="10.資料庫保安" />
 <link href="PostgreSQL-HOWTO-11.html" rel="chapter" title="11.PostgreSQL 的前端 GUI 工具（圖像使用者界面）" />
 <link href="PostgreSQL-HOWTO-12.html" rel="chapter" title="12.PostgreSQL 的介面驅動程式" />
 <link href="PostgreSQL-HOWTO-13.html" rel="chapter" title="13.PostgreSQL 的 Perl 資料庫介面 (Database Interface, DBI) " />
 <link href="PostgreSQL-HOWTO-14.html" rel="chapter" title="14.PostgreSQL 管理工具 " />
 <link href="PostgreSQL-HOWTO-15.html" rel="chapter" title="15.PostgreSQL 用的中央處理器" />
 <link href="PostgreSQL-HOWTO-16.html" rel="chapter" title="16.只使用一個顯示器 (monitor) 來設定多台 PostgreSQL 電腦" />
 <link href="PostgreSQL-HOWTO-17.html" rel="chapter" title="17.PostgreSQL 的萬維網應用程式伺服器" />
 <link href="PostgreSQL-HOWTO-18.html" rel="chapter" title="18.PostgreSQL 的應用程式和工具" />
 <link href="PostgreSQL-HOWTO-19.html" rel="chapter" title="19.資料庫設計工具—實體關係圖 (Entity Relation Tool) 工具" />
 <link href="PostgreSQL-HOWTO-20.html" rel="chapter" title="20.PostgreSQL 的互聯網資料庫設計/完成工具—EARP" />
 <link href="PostgreSQL-HOWTO-21.html" rel="chapter" title="21.PHP Hypertext PreProcessor—PostgreSQL 的伺服器端 html 嵌入命令稿語言" />
 <link href="PostgreSQL-HOWTO-22.html" rel="chapter" title="22.PostgreSQL 的 Python 介面" />
 <link href="PostgreSQL-HOWTO-23.html" rel="chapter" title="23.PostgreSQL 和萬維網的閘路 (gateway) — WDB-P95" />
 <link href="PostgreSQL-HOWTO-24.html" rel="chapter" title="24.&quot;C&quot;, &quot;C++&quot;, ESQL/C 語言介面和 PostgreSQL 的逐位運算元 (Bitwise Operators)" />
 <link href="PostgreSQL-HOWTO-25.html" rel="chapter" title="25.PostgreSQL 的日文假名碼 (Kanji Code)" />
 <link href="PostgreSQL-HOWTO-26.html" rel="chapter" title="26.移植 PostgreSQL 到視窗 95 / 視窗 NT" />
 <link href="PostgreSQL-HOWTO-27.html" rel="chapter" title="27.通信論壇" />
 <link href="PostgreSQL-HOWTO-28.html" rel="chapter" title="28.文件和參考書" />
 <link href="PostgreSQL-HOWTO-29.html" rel="chapter" title="29.PostgreSQL 的技術支援" />
 <link href="PostgreSQL-HOWTO-30.html" rel="chapter" title="30.經濟和商業方面" />
 <link href="PostgreSQL-HOWTO-31.html" rel="chapter" title="31.其他資料庫的名單" />
 <link href="PostgreSQL-HOWTO-32.html" rel="chapter" title="32.萬維網搜尋提示" />
 <link href="PostgreSQL-HOWTO-33.html" rel="chapter" title="33.結論" />
 <link href="PostgreSQL-HOWTO-34.html" rel="chapter" title="34.FAQ—有關 PostgreSQL 的問題" />
 <link href="PostgreSQL-HOWTO-35.html" rel="chapter" title="35.本文件的其他格式" />
 <link href="PostgreSQL-HOWTO-36.html" rel="chapter" title="36.版權和授權" />
 <link href="PostgreSQL-HOWTO-37.html" rel="appendix" title="附錄甲—ANSI/ISO SQL 1992 語法 " />
 <link href="PostgreSQL-HOWTO-38.html" rel="appendix" title="附錄乙—初學者 SQL 導引 " />
 <link href="PostgreSQL-HOWTO-39.html" rel="appendix" title="附錄丙—Linux 快速安裝指引 " />
 <link href="PostgreSQL-HOWTO-40.html" rel="appendix" title="附錄丁—安裝 Midgard" />
 <meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html"  labels ratings (ca 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html"  labels ratings (n 0 s 0 v 0 l 0))'/>
 <link href="PostgreSQL-HOWTO.rdf" rel="meta" title="各章節的說明資訊" />
 <link href="../../style.css" rel="stylesheet" type="text/css" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.1" rel="section" title="6.1 安裝和測試 " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.2" rel="section" title="6.2 PostgreSQL RPMs " />
 <link href="http://www.ramifordistat.net/postgres" rel="bookmark" title="Installation Steps" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.3" rel="section" title="6.3 Maximum RPM" />
 <link href="http://www.RPM.org " rel="bookmark" title="http://www.RPM.org " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.4" rel="section" title="6.4 例子 RPM " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.5" rel="section" title="6.5 測試 PyGreSQL—Python 介面 " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.6" rel="section" title="6.6 測試 Perl—Perl 介面" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.7" rel="section" title="6.7 測試 libpq, libpq++ 介面 " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.8" rel="section" title="6.8 測試 Java 介面 " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.9" rel="section" title="6.9 測試 ecpg 介面" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.10" rel="section" title="6.10 測試 SQL 的例子—自訂資料型態和函數" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.11" rel="section" title="6.11 測試 Tcl/TK 介面 " />
 <link href="PostgreSQL-HOWTO-6.html#ss6.12" rel="section" title="6.12 測試 ODBC 介面 " />
 <link href="http://www.insightdist.com/psqlodbc/" rel="bookmark" title="win32 pgsql odbc 驅動程式" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.13" rel="section" title="6.13 測試 MPSQL Motif-worksheet 介面" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.14" rel="section" title="6.14 確認" />
 <link href="PostgreSQL-HOWTO-6.html#ss6.15" rel="section" title="6.15 緊急除錯" />
</head> <body   > 
<table >
  <tr>
    <th colspan="3" class="HdTitle">HOWTO：Database-SQL-RDBMS
      HOWTO for Linux</th>
  </tr>
  <tr>
    <td class="TtdL"> <a href="PostgreSQL-HOWTO-5.html" accesskey="P">上一頁(P)</a> </td>
    <td class="TtdC">&nbsp;</td>
    <td class="TtdR"> <a href="PostgreSQL-HOWTO-7.html" accesskey="N">下一頁(N)</a> </td>
  </tr>
</table>
<hr />
<h1> 6. PostgreSQL 快速安裝指引 </h1>

<p>這節會幫你在小於五分鐘內快速安裝和啟動這資料庫。</p>

<h2><a name="ss6.1" id="ss6.1"></a>6.1 安裝和測試
</h2>

<p>安裝、測試、確認和執行 PostgreSQL 的步驟
以 root 身份簽入</p>
<pre class="sample">
# cd /mnt/cdrom/RedHat/RPMS
# man rpm
# ls postgre*.rpm
# rpm -qpl postgre*.rpm | less （觀看檔案名單）
# rpm -qpi postgre*.rpm （觀看套件資料）
# cat /etc/passwd | grep postgres
</pre>

<p>注意︰如果你看到一個‘postgres’使用者，你可能要備份和清除 postgres 的家目錄 &nbsp;postgres
  和刪除這名用者，或把他改名為‘postgres2’之類。安裝時需要乾乾淨淨。 </p>
<pre class="sample">
:
# rpm -i postgre*.rpm （必須安裝所有套件，即客戶端、開發、資料和主套件來使 
pgaccess 正常工作）
# man chkconfig
# chkconfig --add postgresql  （用來在開機時開始 pg。）
# /etc/rc.d/init.d/postgresql start （啟動 postgresql）
# man xhost
# xhost +  （讓 pgaccess 使用顯示裝置）
# su - postgres
bash$ man createdb
bash$ createdb mydatabase
bash$ man psql
bash$ psql mydatabase
……在 psql 中可按上 / 下箭咀來編輯歷史記錄或 \s

bash$ export DISPLAY=&lt;主機名>:0.0
bash$ man pgaccess
bash$ pgaccess mydatabase
</pre>

<p>現在你可以在 pgaccess 或 psql 高速下達各種 SQL 指令了！！
</p>
<pre class="sample">
bash$ cd /usr/doc/postgresql*
</pre>

<p>在此閱讀所有 FAQ，使用者、程式設計員、管理手冊和指引。
</p>

<h2><a name="ss6.2" id="ss6.2"></a>6.2 PostgreSQL RPMs
</h2>

<p>此外，請看"<a href="http://www.ramifordistat.net/postgres">Installation Steps</a>"。</p>
<p>PostgreSQL RPM 由 Lamar Owen 維護，位於
<a href="mailto:lamar.owen@wgcr.org">lamar.owen@wgcr.org</a>
在 
<a href="http://www.postgresql.org">http://www.postgresql.org</a> 可找到更多 PostgreSQL 的資料。</p>
<h2><a name="ss6.3" id="ss6.3"></a>6.3 Maximum RPM
</h2>

<p>熟習 RedHat RPM 套件管理員以管理 PostgreSQL 安裝。在 
<a href="http://www.RPM.org">http://www.RPM.org</a> 下載‘Maximum RPM’一書，找尋檔名
maximum-rpm.ps.gz。
在 Linux 使用 gv 指令閱讀它—</p>
<pre class="sample">
# gv maximum-rpm.ps.gz
</pre>

<p>有一個 rpm2deb 可把 RPM 套件轉換為 Debian Linux 套件
</p>

<h2> <a name="ss6.4" id="ss6.4"></a>6.4 例子 RPM 
</h2>

<p>測試 PostgreSQL 的各種介面需要例子。從以下地方安裝 PostgreSQL 例子目錄—</p>
<ul>
<li> Linux 光碟 - postgresql-*examples.rpm</li>
<li> postgresql-*examples.rpm  
<a href="http://www.aldev.8m.com">http://www.aldev.8m.com</a> 
或 
<a href="http://aldev.webjump.com">http://aldev.webjump.com</a></li>
<li> PostgreSQL 原程式碼 postgresql*.src.rpm，在 examples、testing 或 
tutorial 目錄尋找。</li>
</ul>
<h2> <a name="ss6.5" id="ss6.5"></a>6.5 測試 PyGreSQL—Python 介面 
</h2>

<p>安裝 examples 套件，請參閱 
<a href="#Examples RPM">例子 RPM</a>，之後—</p>
<pre class="sample">
bash$ cd /usr/lib/pgsql/python
bash$ createdb thilo
bash$ psql thilo
thilo=> create table test (aa char(30), bb char(30) );
thilo=> \q
bash$ /usr/bin/python
>>> import _pg
>>> db = _pg.connect('thilo', 'localhost')
>>> db.query("INSERT INTO test VALUES ('ping', 'pong')")
>>> db.query("SELECT * FROM test")
eins|zwei
----+----
ping|pong
(1 row)
>>>CTRL+D
bash$
……好像行了—現在正式安裝它
bash$ su - root
# cp /usr/lib/pgsql/python/_pg.so /usr/lib/python1.5/lib-dynload
</pre>
<h2> <a name="ss6.6" id="ss6.6"></a>6.6 測試 Perl—Perl 介面 
</h2>

<p>安裝 examples 套件，請參閱 
<a href="#Examples RPM">例子 RPM</a>，之後—</p>
<pre class="sample">
root# chown -R postgres.postgres /var/lib/pgsql/examples
bash$ cd /var/lib/pgsql/examples/perl5
bash$ perl ./example.pl
</pre>

<p>注意︰如果以上指令失敗了請做如此做︰全域變數 @INC 要在包括 site_perl 目錄中的 
  Pg.pm 模組，所以要如下使用
  -I 選項。
</p>
<pre class="sample">
bash$ perl -I/usr/lib/perl5/site_perl/5.004/i386-linux-thread ./example.pl
</pre>

<p>……你的 perl 已在存取 PostgreSQL 資料庫！！
</p>

<p>要使用 perl 介面，請參閱 example.pl 檔。</p>
<h2> <a name="ss6.7" id="ss6.7"></a>6.7 測試 libpq, libpq++ 介面 
</h2>

<p>安裝 examples 套件，請參閱 
<a href="#Examples RPM">例子 RPM</a>，之後—</p>
<pre class="sample">
root# chown -R postgres.postgres /var/lib/pgsql/examples
bash$ cd /var/lib/pgsql/examples/libpq
bash$ gcc testlibpq.c -I/usr/include/pgsql -lpq
bash$ export PATH=$PATH:.
bash$ a.out

bash$ cd /var/lib/pgsql/examples/libpq++
bash$ g++ testlibpq0.cc -I/usr/include/pgsql -I/usr/include/pgsql/libpq++
-lpq++ -lpq -lcrypt
bash$ ./a.out （注意︰不須理會錯誤訊息—如下）
> create table foo (aa int, bb char(4));
No tuples returned...
status = 1
Error returned: fe_setauthsvc: invalid name: , ignoring...
> insert into foo values ('4535', 'vasu');
No tuples returned...
status = 1
Error returned: fe_setauthsvc: invalid name: , ignoring...
> select * from foo;
aa   |bb   |
-----|-----|
4535 |vasu |
Query returned 1 row.
>
>CTRL+D
bash$
</pre>

<p>……你直接用 C/C++ 介面來存取 PostgreSQL 資料庫！！
</p>

<h2> <a name="ss6.8" id="ss6.8"></a>6.8 測試 Java 介面 
</h2>

<p>安裝 examples 套件，請參閱 
<a href="#Examples RPM">例子 RPM</a> 
和安裝以下東西。</p>
<ul>
<li> 從 
<a href="ftp://ftp.redhat.com/pub/contrib/i386">ftp://ftp.redhat.com/pub/contrib/i386</a> 或 
<a href="http://www.blackdown.org">http://www.blackdown.org</a> 取得 JDK jdk-*glibc*.rpm </li>
<li> 從 
<a href="ftp://ftp.redhat.com/pub/contrib/i386">ftp://ftp.redhat.com/pub/contrib/i386</a> 取得 
postgresql-jdbc-*.rpm</li>
</ul>
<pre class="sample">
root# chown -R postgres.postgres /var/lib/pgsql/examples
bash$ cd /var/lib/pgsql/examples/jdbc
bash$ echo $CLASSPATH
 --> 應顯示 CLASSPATH=/usr/lib/pgsql/jdbc7.0-1.2.jar:.:/home/java/jdk1.2.2/lib:/usr/lib/pgsql:/usr/lib/pgsql/classes.zip:/usr/lib/pgsql/pg.jar

而 jdbc*.jar 的版本號碼要正確。
*.jar 檔要放在 /usr/lib/pgsql 和  /usr/libjdk*/lib 目錄中。

bash$ export CLASSPATH=/usr/lib/pgsql/jdbc7.0-1.2.jar:.:/home/java/jdk1.2.2/lib:/usr/lib/pgsql:/usr/lib/pgsql/classes.zip:/usr/lib/pgsql/pg.jar

編輯所有 psql.java 檔，把‘package’的行變為評論。
bash$ javac psql.java
bash$ java psql jdbc:postgresql:template1 postgres &lt; password &gt;[1] select * from pg_tables;
tablename       tableowner      hasindexes      hasrules
pg_type postgres        true    false   false
pg_attribute    postgres        true    false   false
[2]
CTRL+C
bash$
</pre>

<p>……你直接用 Java 介面來存取 PostgreSQL 資料庫！
</p>

<h2> <a name="ss6.9" id="ss6.9"></a>6.9 測試 ecpg 介面 
</h2>

<p>安裝 examples 套件，請參閱 
<a href="#Examples RPM">例子 RPM</a>，之後—</p>
<pre class="sample">
root# chown -R postgres.postgres /var/lib/pgsql/examples
bash$ cd /var/lib/pgsql/examples/ecpg
bash$ ecpg test1.pgc -I/usr/include/pgsql
bash$ cc test1.c -I/usr/include/pgsql -lecpg -lpq -lcrypt
bash$ createdb mm
bash$ ./a.out
</pre>

<p>……你直接用嵌入式 SQL 來存取 PostgreSQL 資料庫！
</p>

<h2> <a name="ss6.10" id="ss6.10"></a>6.10 測試 SQL 的例子—自訂資料型態和函數 
</h2>

<p>安裝 examples 套件，請參閱 
<a href="#Examples RPM">例子 RPM</a>，之後—</p>
<pre class="sample">
root# chown -R postgres.postgres /var/lib/pgsql/examples
bash$ cd /var/lib/pgsql/examples/sql
未寫好…
</pre>
<h2><a name="ss6.11" id="ss6.11"></a>6.11 測試 Tcl/TK 介面
</h2>

<p>Tck/Tk 的例子是 pgaccess 程式。
使用一個文字編輯器閱讀 /usr/bin/pgaccess 檔案—</p>
<pre class="sample">
bash$ view /usr/bin/pgaccess
bash$ export DISPLAY=&lt;你電腦的主機名>:0.0
bash$ createdb mydb
bash$ pgaccess mydb
</pre>
<h2><a name="ss6.12" id="ss6.12"></a>6.12 測試 ODBC 介面
</h2>

<p></p>
<ol>
<li> 請先取得 <a href="http://www.insightdist.com/psqlodbc/">win32
    pgsql 
odbc 驅動程式</a></li>
<li> 另外請參閱 /usr/lib/libpsqlodbc.a</li>
</ol>
<h2><a name="ss6.13" id="ss6.13"></a>6.13 測試 MPSQL Motif-worksheet 介面
</h2>

<p>在 
<a href="http://www.mutinybaysoftware.com">http://www.mutinybaysoftware.com</a> 取得 RPM。</p>
<h2><a name="ss6.14" id="ss6.14"></a>6.14 確認
</h2>

<p>要確認 PostgreSQL 的高品質，執行 Regression 測試套件︰
以 root 身份簽入</p>
<pre class="sample">
# rpm -i postgresql*test.rpm
閱讀 README 檔或安裝源程式，它已有 regress 目錄
# rpm -i postgresql*.src.rpm
# cd /usr/src/redhat/SPECS
# more postgresql*.spec （以察看需要安裝哪些 RPM 套件）
# rpm -bp postgresql*.spec （…這樣會準備該套件）

Regression 測試需要 Makefiles 和類似 *fmgr*.h 的標頭檔，可用以下指令
產生—
# rpm --short-circuit -bc postgresql*.spec （走捷徑！）
看到‘make -C common  SUBSYS.o’後按 CTRL-C 終止工作。這時候 configure 
已經成功，所有 Makefiles 和標頭檔也已產生。你不再需要讓它繼續下去。
# cd /usr/src/redhat/BUILD
# chown -R postgres postgresql*
# su - postgres
bash$ cd /usr/src/redhat/BUILD/postgresql-6.5.3/src/test/regress
bash$ more README
bash$ make clean; make all runtest
bash$ more regress.out
</pre>
<h2><a name="ss6.15" id="ss6.15"></a>6.15 緊急除錯
</h2>

<p>有時除錯嵌補會在主要的推出 PostgreSQL 
的主要版本之後出現。你可依據自己需要，自行進行修補。請跟從以下步驟︰
到 postgresql 程式碼的目錄
</p>
<pre class="sample">
                # rpm -i postgresql*.src.rpm
                # cd /usr/src/postgresql6.5.3
                # man patch
                # patch -p0 &lt; patchfile
                # make clean
                # make
</pre>


<p>嵌補檔是在</p>
<ul>
<li><a href="ftp://ftp.postgresql.org/pub/patches">PostgreSQL
  嵌補</a></li>
</ul>

<hr />
<div> <a href="http://validator.w3.org/check/referer"><img src="../../../valid-xhtml10.png"  alt="符合 XHTML 1.0" class="ImgLogo"/></a> <a href="http://jigsaw.w3.org/css-validator/"><img class="ImgLogo" src="../../../vcss.png"  alt="符合 CSS"/></a> <a href="http://www.icra.org/_en/"><img src="../../../icra_sw.gif" title="網路內容分級協會" alt="網路內容分級協會" class="ImgLogo"/></a></div>
</body>
</html>
