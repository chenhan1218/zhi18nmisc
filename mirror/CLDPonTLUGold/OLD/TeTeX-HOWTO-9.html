<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>The teTeX HOWTO: Linux-teTeX 部份指導: Appendix B: 安裝 CTAN 的 teTeX 套件 </TITLE>
 <LINK HREF="TeTeX-HOWTO-10.html" REL=next>
 <LINK HREF="TeTeX-HOWTO-8.html" REL=previous>
 <LINK HREF="TeTeX-HOWTO.html#toc9" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="TeTeX-HOWTO-10.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="TeTeX-HOWTO-8.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="TeTeX-HOWTO.html#toc9"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="ctan-install"></A> <A NAME="s9">9. Appendix B: 安裝 CTAN 的 teTeX 套件 </A></H2>

<P>一般而言，安裝 teTeX 套件並不比安裝 Linux 的程式集難，請看以下： 
<A HREF="#generic-CTAN">一般 CTAN 套件</A><P>如果你屬於下面情形之一，應該考慮安裝來自那些 CTAN的 teTeX 檔案套件：
<UL>
<LI>你的系統並非標準的 Linux</LI>
<LI>在你的系統上你沒有管理者的主權</LI>
<LI>你需要最近的 teTeX 或 LaTeX 版本</LI>
<LI>你沒有足夠的磁碟空間完整的安裝</LI>
<LI>你不要在 <CODE>/usr</CODE> 中安裝 teTeX</LI>
<LI>你想要與網路上的其他的 UNIX 相容系統或平台分享你的 teTeX。這種情況，更應該直接由 <EM>原始來源檔</EM> 套件自行安裝。請看以下：
<A HREF="#generic-CTAN">安裝來源檔套件 </A></LI>
<LI>你要使用 teTeX 最新公開 Type 1 字型的版本，它比較早的版本中所包含的字型較好。</LI>
</UL>
<P>可執行檔的完整安裝需要約 40-50   Mb 的磁碟空間，直接由來源碼安裝則需要大約 75 Mb，所以你應該在開始編譯之前，確定有足夠的磁碟空間。雖然在 X 視窗中，可以預覽結果，你不需要一定要安裝X 視窗系統，也不需要安裝 GCC 編譯程式，全部所你需要是一個能夠編輯簡單的 ASCII 文件的編輯程式。夠簡單吧 ?
<P>你能從 
<A HREF="TeTeX-HOWTO-8.html#ctan-list">附錄 A</A>中，任何一個 CTAN 檔案庫，取回這些檔案，  在下面的例子中，那些檔案是從 CTAN  檔案庫， 
<A HREF="ftp://ftp.tex.ac.uk">ftp.tex.ac.uk</A>，被取回的。
<P>
<H2><A NAME="ss9.1">9.1 二進位檔案套件的安裝</A>
</H2>

<P>
<P>
<H3><A NAME="minimal-installation"></A> 最小的安裝 </H3>

<P>
<P>首先，用 FTP 連到 
<A HREF="ftp://ftp.tex.ac.uk/ctan/tex-archive/systems/unix/teTeX/contrib">ftp.tex.ac.uk</A> 並 <CODE>cd</CODE> 到下列目錄：y
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/
</PRE>

取回這些檔案
<PRE>
INSTALL.bin
install.sh
</PRE>

把他們放在你要安裝 teTeX 的最上層的目錄中，舉例來說， <CODE>/var/teTeX</CODE> 如果你計劃在 <CODE>/var</CODE> 中安裝 teTeX 。
<P>把 <CODE>INSTALL.bin</CODE> 檔案印出來，並繼續保存它，因為它描述該如何安裝一個最小的 teTeX 系統。最小的安裝只需要 10-15  MB的磁碟空間， 但是如果有可能，建議你安裝完整的 teTeX 系統。對於最小的安裝，你將會需要那些檔案：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/base/latex-base.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/base/tetex-base.tar.gz
</PRE>

你也將會需要上述兩個檔案庫之一的 teTeX 的可執行檔，取回這個檔案：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/binaries/i386-linux.tar.gz
</PRE>

如果你的系統使用 Linux  ELF shared libraries ， <CODE>ld.so</CODE>的版本至少要 1.73 以上， clibs 則至少要 5.09 以上，如果沒有，取回：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/binaries/i386-linuxaout.tar.gz
</PRE>

這是使用較老的 a.out 靜態程式庫編譯成的可執行檔。
<P>然後，依 <CODE>INSTALL.bin</CODE>,指示，在最上層的 teTeX 安裝目錄中執行命令：
<PRE>
sh ./install.sh
</PRE>

( 確定那些 teTeX 檔案也在那裡 )  ，片刻之後，安裝程式會警告你，你正在失去一些
teTeX 檔案，然而，你只想安裝一個最小的 teTeX 系統，所以你不用理睬警告，繼續
安裝。至於如何設定，參考底下
<A HREF="#base-config">基本系統設定</A>。
<P>要安裝那些其餘的程式集, 請參考下一節。
<P>
<P>
<H3><A NAME="complete-installation"></A> 完整安裝 </H3>

<P>為了要安裝完整teTeX 的系統，除了取回上述那些檔案，還要取回下列的檔案：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/doc/ams-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/bibtex-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/eplain-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/fonts-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/general-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/generic-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/latex-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/makeindex-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/metapost-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/programs-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/ams-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/dc-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/ec-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/misc-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/postscript-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/sauter-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/amstex.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/bibtex.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/eplain.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/latex-extra.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/metapost.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/pictex.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/pstricks.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/texdraw.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/xypic.tar.gz
</PRE>

所有這些檔案，應該被放在你要安裝 teTeX 系統的最上層的目錄之內，和最小的安裝一樣，執行命令：
<PRE>
sh ./install.sh
</PRE>
<H2><A NAME="base-config"></A> <A NAME="ss9.2">9.2 基本系統設定 </A>
</H2>

<P>決定要那一種　teTeX 之後，執行 <CODE>install.sh</CODE> 會出現一些選項的目錄，唯一需要的設定，就是 " D "  選項，即選擇要在那埵w裝　teTeX　系統的最上層的目錄，當然在這個目錄中，你必須擁有寫入的權利，舉例來說，你正在你的家目錄裡安裝teTeX ，你必須指定teTeX 安裝的目錄為：
<PRE>
/home/john.q.public/teTeX
</PRE>

然後回到主要的目錄之後，再選 " I " 選項，繼續安裝，這目錄可以不存在，<CODE>install.sh</CODE> 會自動產生這目錄。
<P>即使你計劃只使用 Postscript 格式、 Type 1 字型或偶而使用 Computer Modern 字型，你還是可以考慮另一個選項，設定一個其它的目錄，存放產生的字型，你還要有這目錄的寫入權利。接上面例子，你能指定：
<PRE>
/home/john.q.public/texfonts
</PRE>

或者，你想讓系統上的所有的使用者，都能使用這些產生的字型，就把這放字型的目錄令為：
<PRE>
/var/texfonts
</PRE>

我建議 <EM>不要 </EM> 把這目錄令為<CODE>/var/tmp/texfonts</CODE> ，因為有可能在系統重新啟動之後，這些字型會被刪除掉，而在下次要使用這些字型時，又要重新製造。
<P>
<P>在選了 " I " 選項後，  <CODE>install.sh</CODE> 會繼續安裝，設定不同的允許權，連結檔案目錄，並編譯檔案，最後結束跳出，並會提醒你，把teTeX 的執行檔目錄，加入<CODE>$PATH</CODE>環境變數中，man pages 和 info 檔所在目錄，分別加入<CODE>$MANPATH</CODE>和<CODE>$INFOPATH</CODE> 環境變數中，例如，如果你使用<CODE>bash</CODE> shell ，則把下列指令加入<CODE>~/.profile</CODE>中：
<PRE>
export PATH=$PATH:"/home/john.q.public/teTeX/bin"
export MANPATH=$MANPATH":/home/john.q.public/teTeX/man"
export INFOPATH$=INFOPATH":/home/john.q.public/teTeX/info"
</PRE>

如果你使用別種 shell ，則加入 &nbsp;/.profile 中。然後簽出再簽入，使環境變數重新登錄，再執行：
<PRE>
texconfig confall
</PRE>

以確定安裝是正確的。
<P>接著，你能為特定的硬體設定 teTeX ，參考底下
<A HREF="#post-install">安裝完後設定的細節</A><P>
<H2><A NAME="generic-CTAN"></A> <A NAME="ss9.3">9.3 CTAN 來源碼套件的安裝</A>
</H2>

<P>要從程式碼自行編譯安裝 teTeX V. 0.4 ，先用 <CODE>ftp</CODE> 到 CTAN，如
<A HREF="ftp://ftp.tex.ac.uk">ftp://ftp.tex.ac.uk</A> ，抓取：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/INSTALL.src
ctan/tex-archive/systems/unix/teTeX/distrib/sources/README.texmf-src
ctan/tex-archive/systems/unix/teTeX/distrib/sources/teTeX-lib-0.4pl8.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/sources/teTeX-src-0.4pl7.tar.gz
</PRE>
<P>先看 <CODE>INSTALL.src</CODE>中的指示，再用 <CODE>su</CODE>變為系統管理者，然後在一個你有讀，寫，執行等權利的目錄中，解開這些檔案。
<P>記得<CODE>tar</CODE>要用<CODE>p</CODE>選項，而且也要記得在<CODE>bash</CODE>中 unset ，<CODE>noclobber</CODE>選項，你可以這樣下命令：
<PRE>
set +o noclobber
</PRE>

<CODE>+o</CODE> 就是 <CODE>設定</CODE> <EM>取消</EM>一個變數，就像預期會作用，但是沒發生一樣。
<P>解開 <CODE>teTeX-lib-0.4pl8.tar.gz</CODE> 會產生<CODE>./teTeX</CODE>的目錄，解開 <CODE>teTeX-src-0.4pl7.tar.gz</CODE> 會產生 <CODE>teTeX-src-0.4</CODE> 的目錄，列印<CODE>INSTALL.src</CODE> ，而且保存在手邊，以便為下列那些的步驟使用。再 <CODE>切換</CODE> 到 <CODE>./teTeX-src-0.4</CODE> 的目錄，依 <CODE>INSTALL.src</CODE> 的說明，修改<CODE>./Makefile</CODE>。你還須要把 teTeX 所在的絕對目錄，令為 <CODE>TETEXDIR</CODE> 的環境變數，這目錄將會是你解開來源碼和程式庫檔案所在目錄的<CODE>teTeX</CODE>子目錄。舉例來說，如果你在自己的家目錄解開這些檔，就把<CODE>TETEXDIR</CODE> 令為：
<PRE>
/home/john.q.public/teTeX
</PRE>

剩下<CODE>Makefile</CODE>的其他選項就和一般差不多，除非你使用一個非標準化的編譯器和程式庫的設定，或者要編譯器做更多的最佳化，或其他原因，否則只要 GCC 的版本為 2.7.2或更新的就可以了。因為編譯過程，<CODE>dialog</CODE>程式使用到 ncurses 程式庫，所以還要檢查<CODE>USE_DIALOG</CODE>，<CODE>USE_NCURSES</CODE>和<CODE>HAVE_NCURSES</CODE>
的變數，是否設定正確。在安裝套件堙A就以經包含了<CODE>ncurses</CODE> 程式庫，所以 <CODE>Makefile</CODE> 可能會很順利，如果你沒有 <CODE>ncurses</CODE> ，可供連結編譯，<CODE>texconfig</CODE> 依然能執行。
<P>如果到這堙A每件事都很正確，你就能在最上層的來源目錄裡，執行 <CODE>make world</CODE> ，等到teTeX  的執行檔造出來，安裝就完成了，這可能要花幾個小時。
<P>在安裝完成之後，要把 teTeX 目錄加入
<CODE>$PATH ， $MANPATH</CODE>， <CODE>$INFOPATH</CODE>那些環境變數之中，承上例，只要在<CODE>~/.bash_profile</CODE> 檔案加入：
<PRE>
export PATH=$PATH":/home/john.q.public/teTeX/bin/i386-linux"
export MANPATH=$MANPATH":/home/john.q.public/teTeX/man"
export INFOPATH=$INFOPATH":/home/john.q.public/teTeX/info"
</PRE>

用來源碼安裝和用以編譯好的二進位碼安裝， <CODE>$PATH</CODE> 變數是不同的，前者的可執行檔的路徑是 <CODE>teTeX/bin/i386-linux</CODE> ，而後者是<CODE>teTeX/bin</CODE>。
<P>到這堙A你能執行 <CODE>texconfig confall</CODE> ，確定那些路徑已經正確地被設定，然後進行如同和用安裝可執行檔的步驟一樣，參考 
<A HREF="#post-install">安裝完後設定的細節</A>。
<P>
<H2><A NAME="post-install"></A> <A NAME="ss9.4">9.4 安裝完後設定的細節 </A>
</H2>

<P>首先參考 Thomas Esser 的<CODE>README</CODE> 檔案，它包含許多，如何設定teTeX 的輸出裝置 ( 也就是，印表機 ) 的暗示。 <CODE>README</CODE>檔案位於目錄：
<PRE>
/usr/lib/teTeX/texmf/doc/tetex
</PRE>

用下列命令瀏覽這檔案（ 在此是使用 Slackware 套件 ）：
<PRE>
less /usr/lib/teTeX/texmf/doc/tetex/README
</PRE>

或用這命令列印出來：
<PRE>
cat /usr/lib/teTeX/texmf/doc/tetex/README >/dev/lp0
</PRE>

假定你的印表機被連接到 <CODE>/dev/lp0</CODE>。
如果不是，則適當的修改成連接的裝置。
<P>或者使用 <CODE>lpr</CODE>命令：
<PRE>
lpr /usr/lib/teTeX/texmf/doc/tetex/README
</PRE>

你應該在安裝 Linux 時，已經順便安裝印表機 daemon 了，如果沒有，再依安裝過程，重新安裝一次。
<P>印出 <CODE>teTeX-FAQ.</CODE> ，並放在手邊，它包含許多如何設定teTeX 的印表機驅動程式的暗示，在比較新的 teTeX 版本中，則可直接由<CODE>texconfig</CODE>看到 <CODE>teTeX-FAQ</CODE> 。
<P>然後，你要定義一個目錄儲存你的自己的 TeX 格式檔案。teTeX 會搜尋，在系統內的<CODE>/etc/profile</CODE>檔，被列在 <CODE>$TEXINPUTS</CODE> 環境變數中那些目錄內的 TeX 輸入檔案：
<PRE>
export TEXINPUTS=".:~/texinputs:"
</PRE>

個別的使用者，則把它加入他們的<CODE>~/.profile</CODE> 中，或加入<CODE>~/.bash_profile</CODE> ，如果使用  <CODE>bash</CODE> 的話。<CODE>$TEXINPUTS</CODE> 環境變數，告訴teTeX ，到使用者的家目錄之下的<CODE>~/texinputs</CODE> 目錄，去尋找使用者的個別 TeX 格式檔案，<EM>要確實的</EM> 在目錄前面和後面加上冒號，也就是把搜尋到的結果，附加到你的目錄。首先你必須使 teTeX     去搜尋部分的格式檔案，然後它再使用你編輯過的標準格式檔案的部分版本。
<P>如果你以管理者的身份安裝teTeX ，把<CODE>/usr/lib/teTeX/bin</CODE> 目錄，加入系統的路徑，若你是自己個人要安裝，把 teTeX 的執行檔的目錄，放到<CODE>~/.profile</CODE>
或<CODE>~/.bash_profile</CODE>中<CODE>$PATH</CODE>的<EM>前面</EM>：
<PRE>
export PATH="~/tetex/bin:"$PATH
</PRE>

現在以 <CODE>root</CODE>身份簽入，並依<CODE>teTeX-FAQ</CODE>指示，執行<CODE>texconfig</CODE>，而且選擇與你系統連接的印表機，確定你在 teTeX 中，是否正確的設定好印表機和印表機解析度。
<P>最後執行<CODE>texhash</CODE> ，以確定 teTeX  的內在資料庫是最新的，資料庫實際上是一個<CODE>ls-lR</CODE>檔案，每一次改變系統結構<EM>必須</EM> 執行 <CODE>texhash</CODE>，否則 teTeX 將不能夠找出你改變的地方。
<P>
<HR>
<A HREF="TeTeX-HOWTO-10.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="TeTeX-HOWTO-8.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="TeTeX-HOWTO.html#toc9"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
