<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>中文 UPS Howto: 請注意已過時的資訊</TITLE>
 <LINK HREF="UPS-HOWTO-3.html" REL=next>
 <LINK HREF="UPS-HOWTO-1.html" REL=previous>
 <LINK HREF="UPS-HOWTO.html#toc2" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="UPS-HOWTO-3.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="UPS-HOWTO-1.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="UPS-HOWTO.html#toc2"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s2">2. 請注意已過時的資訊</A></H2>

<P>我剛剛發現底下有一些資料已經過時了。其中來自
<A HREF="http://sunsite.unc.edu/pub/Linux/system/daemons/init/sysvinit-2.64.tar.gz">the latest sysvinit package</A>
的 <CODE>init</CODE> daemon 比起我所能描述的還要簡陋。
儘管看起來目前的版本與該程式完成時的版本相容，但當中仍然有一些對 UPS
<B>相當重要</B> 的支援沒有文件說明。
<P>底下所簡述的控制機制只能讓 <CODE>powerd</CODE> 送給 <CODE>init</CODE> <CODE>powerfail</CODE> 或
<CODE>powerok</CODE> 這兩個訊息之一而已。<CODE>init</CODE> 接到 <CODE>powerfail</CODE> 
訊息時執行一個命令，而當它接到 <CODE>powerok</CODE> 時則執行另一個命令。
這將導至 <CODE>powerd</CODE> 在處理低電力訊號及其他特殊狀況時產生邏輯上的複雜性。
<P>較新版本的 <CODE>init</CODE> (像是 2.58 版) 就比較精良了。
它可以在接到訊號時選擇 <CODE>三個</CODE> script 中之一來執行。如此一來， <CODE>init</CODE>
可以在接到電源斷電訊號時執行 <CODE>powerfail</CODE> script ，可以執行一個
<CODE>powerfailnow</CODE> script 做立即的關機 ，以及一個 <CODE>powerok</CODE> script
來停止任何正在進行的關機動作。這樣比起要我們自行處理這些機制要簡單多了。
<P>儘管這堣j部分的討論仍假設使用舊的 <CODE>init</CODE> 通訊方式，
我已加入了兩個新的章節來描述新的連線方法。這兩個章節是 
<@ref>ciroTrust Energy Protector 400/650</A> 及 
<@ref>ciroTrust Energy Protector 400/650</A><@ref>apc700APC Smart-UPS 700</A>。其中前者特別詳細。二者都包含了一個 <CODE>powerd.c</CODE> 檔，
它可以在收到低電力訊號時送訊號給 <CODE>init</CODE> 以進行緊急關機，
就像是 <CODE>/etc/inittab</CODE> 檔中那幾行所寫的一樣。其餘的，
我所能告訴您的就只有請您看看 <CODE>init</CODE> 的原始碼了。
<P>就我所知的，在以下所列的 UPS 軟體套件中有許多也採用了新式的連線方式。
<P>
<HR>
<A HREF="UPS-HOWTO-3.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="UPS-HOWTO-1.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="UPS-HOWTO.html#toc2"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
