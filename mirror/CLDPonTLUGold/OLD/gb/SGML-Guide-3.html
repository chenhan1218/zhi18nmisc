<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>SGML-Tools 使用说明中译版: 使用 SGML-Tools 撰写文件</TITLE>
 <LINK HREF="SGML-Guide-2.html" REL=previous>
 <LINK HREF="SGML-Guide.html#toc3" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<IMG SRC="img/next.gif" ALT="Next">
<A HREF="SGML-Guide-2.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="SGML-Guide.html#toc3"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s3">3. 使用 SGML-Tools 撰写文件</A></H2>

<P>使用 SGML-Tools DTD 撰写文件的过程大部分是非常容易的，而且有点类似 LaTeX．
然而，仍然有些限制要注意．这一节我将介绍 SGML 文件的撰写．
SGML 文件□例(及写作指引)请参阅 <CODE>example.sgml</CODE> 档案，你可以拿来当作自己文件的□本．
在此我将讨论 SGML 的各项功能，但是以原始文件作为□例不是很有可读性．
因此，印出 <CODE>example.sgml</CODE> 的原始码(编排後的输出)，如此你就有真实的参考□例。
<P>
<H2><A NAME="ss3.1">3.1 基本概念</A>
</H2>

<P>仔细看□例文件的原始文件，你会注意到里面有许多以角括号(<CODE>&lt;</CODE> 及 <CODE>&gt;</CODE>)标示的「标签(tags)」．
标签单纯地指出某组成元素的起始，这里所谓的组成元素是一节，一段，一句斜体的文句，列表中的一个项目，以及诸如此类的结构．
使用标签就像使用 LaTeX 指令如 <CODE>\item</CODE> 或是 <CODE>\section{...}</CODE> 等一般．
<P>举个简单的例子，要产生这一段 <B>粗体文字</B>，我在原始码中键入
<BLOCKQUOTE><CODE>
<PRE>
举个简单的例子，要产生这一段 &lt;bf>粗体文字&lt;/bf>, ...
</PRE>
</CODE></BLOCKQUOTE>

<CODE>&lt;bf></CODE> 是这段粗体文字的开头，而 <CODE>&lt;/bf></CODE> 是结尾．
你也可以使用这个简略形式：
<BLOCKQUOTE><CODE>
<PRE>
举个简单的例子，要产生这一段 &lt;bf/粗体文字/, ...
</PRE>
</CODE></BLOCKQUOTE>

就是用斜线将粗体文字包住．(当然，如果被包含的文字含有线，你就必须使用长的形式，
例如 Unix 的档案名称．)
<P>关於特殊字元还有其它得要注意的问题
(这就是为什麽如果你仔细观察原始文件就会注意到这些看起来很怪异 "&amp;" 表示式；我将简短地说明这些符号)．
<P>在某些情况下，特定的组成元素之结尾标签是可选用的．
例如，你在某一节的开始使用 <CODE>&lt;sect></CODE> 这个标签，然而，该节的结尾标签
(可以出现在该节主体本身结束的地方，而不只是该节的名称後面!)
是可选用的而当你在同一个层次开始另外一节的时候也就暗示著该节的结束．
一般来说你不需要担心这些细节；只要跟著使用在 <CODE>example.sgml</CODE> 指引里的□例就可以了。
<P>
<H2><A NAME="ss3.2">3.2 特殊字元</A>
</H2>

<P>很明显的，角括号它们本身就是 SGML 原始文件里的特殊字元．另外还有其它该注意的字元．
例如，假设你想键入由角括号所涵盖的表示式，像这样: <CODE>&lt;foo></CODE>．
为了表示左边的角括号，你必须使用 <CODE>&amp;lt;</CODE> 这个组成元素，
这是一个会展开成左括号字元的「巨集」．因此，我在原始文件中键入
<BLOCKQUOTE><CODE>
<PRE>
angle brackets around it, as so: &lt;tt>&amp;lt;foo>&lt;/tt>.
</PRE>
</CODE></BLOCKQUOTE>

一般来说，以结合字元(&amp;)作为开始表示这是一个特殊的巨集．
例如，产生 % 符号的 <CODE>&amp;percnt;</CODE>
产生 | 的 <CODE>&amp;verbar;</CODE> 等等．
对於所有的「特殊字元」都有结合巨集可以表示它们．
<P>通常，你不需要使用结合巨集表示某特殊字元，然而，在某些情况下这是必须的。最常用的是：
<UL>
<LI>Use <CODE>&amp;amp;</CODE> for the ampersand (&amp;), </LI>
<LI>Use <CODE>&amp;lt;</CODE> for a left bracket (&lt;),</LI>
<LI>Use <CODE>&amp;gt;</CODE> for a right bracket (&gt;),</LI>
<LI>Use <CODE>&amp;lt;/</CODE> for a left bracket with a slash 
(<CODE>&lt;/</CODE>)</LI>
<LI>Use <CODE>&amp;dollar;</CODE> for a dollar sign ($),</LI>
<LI>Use <CODE>&amp;num;</CODE> for a hash (#),</LI>
<LI>Use <CODE>&amp;percnt;</CODE> for a percent (%),</LI>
<LI>Use <CODE>&amp;tilde;</CODE> for a tilde (~),</LI>
<LI>Use <CODE>``</CODE> and <CODE>''</CODE> for quotes, or use
<CODE>&amp;ldquo;</CODE> for &ldquo;, <CODE>&amp;rdquo;</CODE> for &rdquo;.</LI>
</UL>
<P>完整的特殊字元列表可以查看其中一个替换档．
通常 LaTeX 最会抱怨特殊字元，所以查阅 
<CODE>$SGMLTOOLSLIB/rep/latex/general</CODE> 会是个好的开始．
<CODE>$SGMLTOOLSLIB</CODE> 定义在 SGML 转换程序的最前面．
<P>
<H2><A NAME="ss3.3">3.3 Verbatim 与 Code 环境</A>
</H2>

<P>当我们正讨论特殊字元这个主题时，我也必须提到「verbatim 环境」，
用来在输出中含入不加变动的文字(空白字元以及缩排，和诸如此类)．
<CODE>verb</CODE> 这个组成元素就是做此用途的．它看起来就像这样：
<BLOCKQUOTE><CODE>
<PRE>
&lt;verb>
 Some literal text to include as example output.
&lt;/verb>
</PRE>
</CODE></BLOCKQUOTE>

<CODE>verb</CODE> 环境不允许你在其内容中使用<EM>任何东西</EM>．
特别地，在 <CODE>verb</CODE> 环境中你必须：
<UL>
<LI>使用 <CODE>&amp;amp;</CODE> 代表 <CODE>&amp;</CODE></LI>
<LI>使用 <CODE>&amp;lt;/</CODE> 代表 <CODE>&lt;/</CODE></LI>
<LI>不要在 <CODE>verb</CODE> 环境中使用 <CODE>\end{verbatim}</CODE>，
因为这是 LaTeX 用来结束 <CODE>verbatim</CODE> 环境的．
(未来应该可能完全的隐藏底层的文字编排，但目前的解析器还不支援．)</LI>
</UL>

<CODE>code</CODE> 环境非常类似 <CODE>verb</CODE> 环境，除了在文字周围加入分隔线
<HR>
<PRE>
这是 code 环境的例子．
</PRE>
<HR>
<P>你应该在任何 <CODE>verb</CODE> 环境的周围使用 <CODE>tscreen</CODE> 环境，像这样：
<BLOCKQUOTE><CODE>
<PRE>
&lt;tscreen>&lt;verb>
这是一段例句．
&lt;/verb>&lt;/tscreen>
</PRE>
</CODE></BLOCKQUOTE>

<CODE>tscreen</CODE> 是一个环境单纯地缩排并设定预设字型为 <CODE>tt</CODE>．
这使得□例要论在 LaTeX 以及纯文字的版本中看起来好多了．
你可以使用 <CODE>tscreen</CODE> 而不加 <CODE>verb</CODE>，不过，如果你在□例中使用任何的特殊字元那麽你就需要它们两个．
<CODE>tscreen</CODE> 与特殊字元无关．□例请参阅 <CODE>example.sgml</CODE>．
<P><CODE>quote</CODE> 环境类似 <CODE>tscreen</CODE>，除了不将预设字型设为 <CODE>tt</CODE>．所以，你可以使用 <CODE>quote</CODE> 於与电脑无关的引用，如：
<BLOCKQUOTE><CODE>
<PRE>
&lt;quote>
Here is some text to be indented, as in a quote.
&lt;/quote>
</PRE>
</CODE></BLOCKQUOTE>

这会产生：
<BLOCKQUOTE>
Here is some text to be indented, as in a quote.
</BLOCKQUOTE>
<P>
<H2><A NAME="ss3.4">3.4 文件内容概观</A>
</H2>

<P>在我们深入研究细节之前，我要开始介绍 linuxdoc DTD 定义的文件概观．文件如何设立的□例请仔细观看 <CODE>example.sgml</CODE>．
<P>
<H3>序文</H3>

<P>在文件的「序文」中你设立像是标题以及文件型态(style)的东西．Linux HOWTO 文件看起来应该像：
<BLOCKQUOTE><CODE>
<PRE>
&lt;!doctype linuxdoc system>

&lt;article>

&lt;title>Linux Foo HOWTO
&lt;author>阿伟, &lt;tt/cwhuang@phys.ntu.edu.tw/
&lt;date>v1.0, 14 August 1997
&lt;abstract>
这份文件说明了如何使用 &lt;tt/foo/ 这个工具．
&lt;/abstract>

&lt;toc>
</PRE>
</CODE></BLOCKQUOTE>
<P>这些组成项目可以酌予增减但须按此顺序．第一行告诉 SGML 解析程式使用 linuxdoc DTD．
<CODE>&lt;article></CODE> 这个标签规定文件使用「article」此种文件型态．
(原先的 QWERTZ DTD 还定义 「report」以及「book」等型态；我并没有修改它们以在 SGML-Tools 中使用)．
<P><CODE>title</CODE>, <CODE>author</CODE>, 以及 <CODE>date</CODE> 这些标签的意义应该是很明显的，
在 <CODE>date</CODE> 标签中包含文件的版本编号以及最後修改时间．
<P><CODE>abstract</CODE> 标签设定文件顶端<EM>在内容之前</EM>印出的文字．
如果你不想含入内容列表(<CODE>toc</CODE> 标签)，那麽你可能不需要 <CODE>abstract</CODE>．
<P>
<H3>章节与段落</H3>

<P>在序文之後，你就可以准备进入文件本身．有下列的分节指令可以使用：
<UL>
<LI><CODE>sect</CODE>: 最顶层的章节 (也就是 1, 2, 等等) </LI>
<LI><CODE>sect1</CODE>: 第二层的次章节 (也就是  1.1, 1.2, 等等)</LI>
<LI><CODE>sect2</CODE>: 第三层的小章节</LI>
<LI><CODE>sect3</CODE>: 第四层的小小节</LI>
<LI><CODE>sect4</CODE>: 第五层的小小小节</LI>
</UL>

它们相当於 LaTeX 中对应的 <CODE>section</CODE>, <CODE>subsection</CODE> 等等．
<P>在 <CODE>sect</CODE>  (或 <CODE>sect</CODE>, <CODE>sect</CODE> 等等) 标签之後跟著是该节的名称．
例如，在文件的顶端，序文之後的是此标签：
<BLOCKQUOTE><CODE>
<PRE>
&lt;sect>简介
</PRE>
</CODE></BLOCKQUOTE>

而在此节开始的地方(段落)，有个标签是：
<BLOCKQUOTE><CODE>
<PRE>
&lt;sect2>段落
</PRE>
</CODE></BLOCKQUOTE>

在一节的标签之後，你开始文件的主体．然而，你必须以一个 <CODE>&lt;p></CODE> 标签开始，像这样：
<BLOCKQUOTE><CODE>
<PRE>
&lt;sect>简介
&lt;p>
这是一份 SGML-Tools 文件处理的使用者指引....
</PRE>
</CODE></BLOCKQUOTE>

这是告诉解析程式你已完成一节的标题并且准备好开始本文主体．
其後，新的段落是以空白行开始(就如同 TeX)．例如，
<BLOCKQUOTE><CODE>
<PRE>
这是第一段的结尾．

而我们从这里开始新的一段．
</PRE>
</CODE></BLOCKQUOTE>

没有什麽理由要在每个段落的前面使用 <CODE>&lt;p></CODE> 标签；只要在分节指令後面的第一个段落开始处加就行．
<P>
<H3>文件结尾</H3>

<P>在文件结束的地方，你必须使用这个标签：
<BLOCKQUOTE><CODE>
<PRE>
&lt;/article>
</PRE>
</CODE></BLOCKQUOTE>
<P>以告诉解析程式你已经完成 <CODE>article</CODE> 这个组成元素(涵盖整份文件)．
<H2><A NAME="cross-ref"></A> <A NAME="ss3.5">3.5 交互参考</A>
</H2>

<P>现在我们要进入系统的其它功能．交互参考很容易．例如，如果你想要制作某一节的交互参考，你得像这样标示该节:
<BLOCKQUOTE><CODE>
<PRE>
&lt;sect1>简介&lt;label id="sec-intro">
</PRE>
</CODE></BLOCKQUOTE>

接著你就可以在文件中的某个地方式用这个表示式参照该节：
<BLOCKQUOTE><CODE>
<PRE>
请参考&lt;ref id="sec-intro" name="简介">一节的介绍．
</PRE>
</CODE></BLOCKQUOTE>

这将会以 <CODE>sec-intro</CODE> 标记的节号替换掉这个 <CODE>ref</CODE> 标签．
对於 groff 以及 HTML 转换 <CODE>name</CODE> 这个参数是必须的．
SGML-Tools 使用的 groff 巨集设定目前并未支援交互参考，而且它常常以名称取代数字参照某一节．
<P>例如，本节是
<A HREF="#cross-ref">交互参考</A>．
<P>在全球资讯网上使用的通用资源定位器，即 URL 也有组成元素 <CODE>url</CODE>．
这个元素应该用来参照其它文件，FTP 上的档案等等．例如：
<BLOCKQUOTE><CODE>
<PRE>
你可从此取得 Linux HOWTO 文件
&lt;url url="http://sunsite.unc.edu/mdw/HOWTO/" 
   name="The Linux HOWTO INDEX">．
</PRE>
</CODE></BLOCKQUOTE>

<CODE>url</CODE> 这个参数指定这个 URL 本身．连结会自动加入到 HTML 文件中．
可选用的 <CODE>name</CODE> 参数指定应该加上连结的文字(HTML 转换)或是为 URL 描述命名(LaTeX 或 groff)．如果没有给 <CODE>name</CODE> 参数，会使用这个 URL 本身．
<P>例如，你可以从这里取得 SGML-Tools 套件<BR>
<CODE>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/utils/text/sgml-tools-0.99.0.tar.gz">ftp://sunsite.unc.edu/pub/Linux/utils/text/sgml-tools-0.99.0.tar.gz</A></CODE>.
<P>一个有用的变形是 <CODE>htmlurl</CODE>，除了 HTML 文件在其它每种文件中这个 URL 部份将不会出现．
它用在像是个人的电子邮件位址；你可以写
<BLOCKQUOTE><CODE>
<PRE>
&lt;htmlurl url="mailto:esr@snark.thyrsus.com"
      name="esr@snark.thyrsus.com">
</PRE>
</CODE></BLOCKQUOTE>

而在纯文字输出中获得「esr@snark.thyrsus.com」
而不是重复的「esr@snark.thyrsus.com &lt;mailto:esr@snark.thyrsus.com&gt;」
但是在 HTML 文件中仍然保有适当的 URL 部份．
<P>
<H2><A NAME="ss3.6">3.6 字型</A>
</H2>

<P>基本上，SGML-Tools 支援与 LaTeX 相同的字型．
注意，无论如何，纯文字的转换(经由 <CODE>groff</CODE>)不理会有关字型的资讯．
所以，你可以尽可能的使用多种字型，这对 LaTeX 的转换会有好处．
但是在纯文字的版本中不要指望能用字型点出重点．
<P>特别是，前面描述过的 <CODE>tt</CODE> 这个标签可以用来获致宽度固定的「打字机」字型，
这应该用在所有的电子邮递位址，机器名称，档案名称等等．
例如：
<BLOCKQUOTE><CODE>
<PRE>
Here is some &lt;tt>typewriter text&lt;/tt> to be included in the document.
</PRE>
</CODE></BLOCKQUOTE>

相当於：
<BLOCKQUOTE><CODE>
<PRE>
Here is some &lt;tt/typewriter text/ to be included in the document.
</PRE>
</CODE></BLOCKQUOTE>

记得如果被包含的文字不含有斜线你可以使用简略形式．
<P>其它的字型有 <B>粗体字</B> 用的 <CODE>bf</CODE> 以及 <EM>斜体字</EM> 用的 <CODE>em</CODE>．
另外还支援数种字型，但是我不建议你使用它们，因为它们会被转换成像 HTML 不支援的字型．
粗体，打字机体，以及斜体应该能满足你的需要．
<P>
<H2><A NAME="ss3.7">3.7 列表</A>
</H2>

<P>此系统支援数种不同的列表．它们是：
<UL>
<LI><CODE>itemize</CODE> 像这样的告示列表</LI>
<LI><CODE>enum</CODE> 数字列表</LI>
<LI><CODE>descrip</CODE> 描述列表</LI>
</UL>

在 <CODE>itemize</CODE> 或是 <CODE>enum</CODE> 里的项目必须以 <CODE>item</CODE> 标签加以标示．
在 <CODE>descrip</CODE> 里的项目必须以 <CODE>tag</CODE> 标示．
例如，
<BLOCKQUOTE><CODE>
<PRE>
&lt;itemize>
&lt;item>这是一个项目．
&lt;item>这是第二个项目．
&lt;/itemize>
</PRE>
</CODE></BLOCKQUOTE>

看起来像是这样：
<UL>
<LI>这是一个项目．</LI>
<LI>这是第二个项目．</LI>
</UL>

在 <CODE>enum</CODE> 中
<BLOCKQUOTE><CODE>
<PRE>
&lt;enum>
&lt;item>这是第一个项目．
&lt;item>这是第二个项目．
&lt;/enum>
</PRE>
</CODE></BLOCKQUOTE>

你应看得出来，列表可以是巢状的．细节请参阅□例文件．
<P><CODE>descrip</CODE> 列表稍有不同，而且有点难看，但是在某些情况下你可能会想使用它：
<BLOCKQUOTE><CODE>
<PRE>
&lt;descrip>
&lt;tag/Gnats./ Annoying little bugs that fly into your cooling fan.
&lt;tag/Gnus./ Annoying little bugs that run on your CPU.
&lt;/descrip>
</PRE>
</CODE></BLOCKQUOTE>

最後看起来像：
<DL>
<DT><B>Gnats.</B><DD><P>Annoying little bugs that fly into your cooling fan.
<DT><B>Gnus.</B><DD><P>Annoying little bugs that run on your CPU.
</DL>
<P>
<H2><A NAME="ss3.8">3.8 更进一步的资讯</A>
</H2>

<P>
<OL>
<LI>QWERTZ 使用者指引可以从这里取得
<CODE>
<A HREF="ftp://ftp.cs.cornell.edu/pub/mdw/SGML">ftp://ftp.cs.cornell.edu/pub/mdw/SGML</A></CODE>.
QWERTZ (以及 SGML-Tools) 还支援像是数学公式，表格，图形等许多特性．
如果你想用 SGML 写一般的文件，我建议你用原来的 QWERTZ DTD 而不要用修改过的 linuxdoc DTD，
因为这是我特别用来写 Linux HOWTOs 及其它类似文件用的．
</LI>
<LI>Tom Gordon 的 QWERTZ tools 可在此找到：
<CODE>
<A HREF="ftp://ftp.gmd.de/GMD/sgml">ftp://ftp.gmd.de/GMD/sgml</A></CODE>.
</LI>
<LI>更多关於 SGML 的资讯可以在下面这些网页找到：
<UL>
<LI><CODE>
<A HREF="http://www.w3.org/hypertext/WWW/MarkUp/SGML/">SGML and the Web</A></CODE></LI>
<LI><CODE>
<A HREF="http://www.sil.org/sgml/sgml.html">SGML Web Page</A></CODE></LI>
<LI><CODE>
<A HREF="http://www.yahoo.com/Computers_and_Internet/Information_and_Documentation/Data_Formats/SGML/">Yahoo's SGML Page</A></CODE></LI>
</UL>

</LI>
<LI>James Clark 的 <CODE>sgmls</CODE> 解析器，及後来的 <CODE>nsgmls</CODE> 还有其它工具可在这找到：
<CODE>
<A HREF="ftp://ftp.jclark.com">ftp://ftp.jclark.com</A></CODE> 以及 <CODE>
<A HREF="http://www.jclark.com">James Clark's WWW Page</A></CODE>.
</LI>
<LI><CODE>emacs psgml</CODE> 可在此找到：
<CODE>
<A HREF="ftp://ftp.lysator.liu.se/pub/sgml">ftp://ftp.lysator.liu.se/pub/sgml</A></CODE>．这个工具提供许多 SGML 的功能．
</LI>
<LI>你可以寄电子邮件到
<CODE>
<A HREF="mailto:majordomo@via.ecp.fr">majordomo@via.ecp.fr</A></CODE> 
以参与 SGML-Tools mailing list，内容写 <CODE>subscribe sgml-tools</CODE>．
Mailing list 的地址是
<CODE>
<A HREF="mailto:sgml-tools@via.ecp.fr">sgml-tools@via.ecp.fr</A></CODE>．
</LI>
<LI>关於 <CODE>LyX</CODE> 的更多资讯可以在此找到：
<CODE>
<A HREF="http://wsiserv.informatik.uni-tuebingen.de/~ettrich/">LyX WWW Page</A></CODE>.  <CODE>LyX</CODE> 是一个给 LaTeX 用的高阶文字处理器前端．
具半所见即所得界面，会自动产生许多 LaTeX 的样式及格局．
可以增快 LaTeX 的学习而且使复杂的格局变简单且直接．
</LI>
</OL>
<HR>
<IMG SRC="img/next.gif" ALT="Next">
<A HREF="SGML-Guide-2.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="SGML-Guide.html#toc3"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
