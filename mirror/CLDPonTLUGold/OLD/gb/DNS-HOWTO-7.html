<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.16">
 <TITLE>DNS HOWTO 中译版: Bind version 8</TITLE>
 <LINK HREF="DNS-HOWTO-8.html" REL=next>
 <LINK HREF="DNS-HOWTO-6.html" REL=previous>
 <LINK HREF="DNS-HOWTO.html#toc7" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="DNS-HOWTO-8.html"><IMG SRC="img/next.png" ALT="Next"></A>
<A HREF="DNS-HOWTO-6.html"><IMG SRC="img/prev.png" ALT="Previous"></A>
<A HREF="DNS-HOWTO.html#toc7"><IMG SRC="img/toc.png" ALT="Contents"></A>
<HR>
<H2><A NAME="bind8"></A> <A NAME="s7">7.</A> <A HREF="DNS-HOWTO.html#toc7">Bind version 8</A></H2>

<P>Bind version 8 是最新的 bind 技术．我还没有尝试使用，但 David E. Smith &lt;
<A HREF="mailto:dave@bureau42.ml.org">dave@bureau42.ml.org</A>&gt; 有．他写了这小节的其馀部份．</P>
<P>没有太多的不同．除了使用 <CODE>named.conf</CODE> 而不是 <CODE>named.boot</CODE>, 其馀都相同．
而且 bind 8 包含了一个 perl 指令稿来将旧格式的档案转换成新的．
例如一份暂存专用名称伺服器的 <CODE>named.boot</CODE> (旧格式):</P>
<P>
<HR>
<PRE>
directory /var/named
cache   .                                       root.hint
primary 0.0.127.IN-ADDR.ARPA                    127.0.0.zone
primary localhost                               localhost.zone
</PRE>
<HR>
</P>
<P>在指令列下，于 <CODE>bind8/src/bin/named</CODE> 目录中键入:</P>
<P>
<HR>
<PRE>
named-bootconf.pl &lt; named.boot > named.conf
</PRE>
<HR>
</P>
<P>这会产生 <CODE>named.conf</CODE>:</P>
<P>
<HR>
<PRE>
// generated by named-bootconf.pl

options {
        directory "/var/named";
};

zone "." {
        type hint;
        file "root.hint";
};

zone "0.0.127.IN-ADDR.ARPA" {
        type master;
        file "127.0.0.zone";
};

zone "localhost" {
        type master;
        file "localhost.zone";
};
</PRE>
<HR>
</P>

<P>它将 <CODE>named.boot</CODE> 中的每样东西都转换过来，然而它并未加入所有 bind 8 所允许的新强化及配置选项．
这里有份较完整的 <CODE>named.conf</CODE> 做同样的事，但是效率更好一点．</P>
<P>
<HR>
<PRE>
// This is a configuration file for named (from BIND 8.1 or later).
// It would normally be installed as /etc/named.conf.
// The only change made from the `stock' named.conf (aside from this
// comment :) is that the directory line was uncommented, since I
// already had the zone files in /var/named.

options {
        directory "/var/named";
        check-names master warn;                /* default. */
        datasize 20M;
};

zone "localhost" IN {
        type master;
        file "localhost.zone";
        check-names fail;
        allow-update { none; };
        allow-transfer { any; };
};

zone "0.0.127.in-addr.arpa" IN {
        type master;
        file "127.0.0.zone";
        check-names fail;
        allow-update { none; };
        allow-transfer { any; };
};

zone "." IN {
        type hint;
        file "root.hint";
};
</PRE>
<HR>
</P>

<P><CODE>bind8/src/bin/named/test</CODE> 里有这个范例，以及领域档案的拷贝，许多人可以直接拿来修改使用．</P>
<P>领域档案及 <CODE>root.hint</CODE> (<CODE>root.cache</CODE>) 完全相同，更新它们的指令也是．</P>

<HR>
<A HREF="DNS-HOWTO-8.html"><IMG SRC="img/next.png" ALT="Next"></A>
<A HREF="DNS-HOWTO-6.html"><IMG SRC="img/prev.png" ALT="Previous"></A>
<A HREF="DNS-HOWTO.html#toc7"><IMG SRC="img/toc.png" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
