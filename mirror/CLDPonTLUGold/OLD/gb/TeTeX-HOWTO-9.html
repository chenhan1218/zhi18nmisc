<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>The teTeX HOWTO: Linux-teTeX 部份指导: Appendix B: 安装 CTAN 的 teTeX 套件 </TITLE>
 <LINK HREF="TeTeX-HOWTO-10.html" REL=next>
 <LINK HREF="TeTeX-HOWTO-8.html" REL=previous>
 <LINK HREF="TeTeX-HOWTO.html#toc9" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="TeTeX-HOWTO-10.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="TeTeX-HOWTO-8.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="TeTeX-HOWTO.html#toc9"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="ctan-install"></A> <A NAME="s9">9. Appendix B: 安装 CTAN 的 teTeX 套件 </A></H2>

<P>一般而言，安装 teTeX 套件并不比安装 Linux 的程式集难，请看以下： 
<A HREF="#generic-CTAN">一般 CTAN 套件</A><P>如果你属於下面情形之一，应该考虑安装来自那些 CTAN的 teTeX 档案套件：
<UL>
<LI>你的系统并非标准的 Linux</LI>
<LI>在你的系统上你没有管理者的主权</LI>
<LI>你需要最近的 teTeX 或 LaTeX 版本</LI>
<LI>你没有足够的磁碟空间完整的安装</LI>
<LI>你不要在 <CODE>/usr</CODE> 中安装 teTeX</LI>
<LI>你想要与网路上的其他的 UNIX 相容系统或平台分享你的 teTeX。这种情况，更应该直接由 <EM>原始来源档</EM> 套件自行安装。请看以下：
<A HREF="#generic-CTAN">安装来源档套件 </A></LI>
<LI>你要使用 teTeX 最新公开 Type 1 字型的版本，它比较早的版本中所包含的字型较好。</LI>
</UL>
<P>可执行档的完整安装需要约 40-50   Mb 的磁碟空间，直接由来源码安装则需要大约 75 Mb，所以你应该在开始编译之前，确定有足够的磁碟空间。虽然在 X 视窗中，可以预览结果，你不需要一定要安装X 视窗系统，也不需要安装 GCC 编译程式，全部所你需要是一个能够编辑简单的 ASCII 文件的编辑程式。够简单吧 ?
<P>你能从 
<A HREF="TeTeX-HOWTO-8.html#ctan-list">附录 A</A>中，任何一个 CTAN 档案库，取回这些档案，  在下面的例子中，那些档案是从 CTAN  档案库， 
<A HREF="ftp://ftp.tex.ac.uk">ftp.tex.ac.uk</A>，被取回的。
<P>
<H2><A NAME="ss9.1">9.1 二进位档案套件的安装</A>
</H2>

<P>
<P>
<H3><A NAME="minimal-installation"></A> 最小的安装 </H3>

<P>
<P>首先，用 FTP 连到 
<A HREF="ftp://ftp.tex.ac.uk/ctan/tex-archive/systems/unix/teTeX/contrib">ftp.tex.ac.uk</A> 并 <CODE>cd</CODE> 到下列目录：y
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/
</PRE>

取回这些档案
<PRE>
INSTALL.bin
install.sh
</PRE>

把他们放在你要安装 teTeX 的最上层的目录中，举例来说， <CODE>/var/teTeX</CODE> 如果你计划在 <CODE>/var</CODE> 中安装 teTeX 。
<P>把 <CODE>INSTALL.bin</CODE> 档案印出来，并继续保存它，因为它描述该如何安装一个最小的 teTeX 系统。最小的安装只需要 10-15  MB的磁碟空间， 但是如果有可能，建议你安装完整的 teTeX 系统。对於最小的安装，你将会需要那些档案：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/base/latex-base.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/base/tetex-base.tar.gz
</PRE>

你也将会需要上述两个档案库之一的 teTeX 的可执行档，取回这个档案：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/binaries/i386-linux.tar.gz
</PRE>

如果你的系统使用 Linux  ELF shared libraries ， <CODE>ld.so</CODE>的版本至少要 1.73 以上， clibs 则至少要 5.09 以上，如果没有，取回：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/binaries/i386-linuxaout.tar.gz
</PRE>

这是使用较老的 a.out 静态程式库编译成的可执行档。
<P>然後，依 <CODE>INSTALL.bin</CODE>,指示，在最上层的 teTeX 安装目录中执行命令：
<PRE>
sh ./install.sh
</PRE>

( 确定那些 teTeX 档案也在那里 )  ，片刻之後，安装程式会警告你，你正在失去一些
teTeX 档案，然而，你只想安装一个最小的 teTeX 系统，所以你不用理睬警告，继续
安装。至於如何设定，参考底下
<A HREF="#base-config">基本系统设定</A>。
<P>要安装那些其馀的程式集, 请参考下一节。
<P>
<P>
<H3><A NAME="complete-installation"></A> 完整安装 </H3>

<P>为了要安装完整teTeX 的系统，除了取回上述那些档案，还要取回下列的档案：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/doc/ams-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/bibtex-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/eplain-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/fonts-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/general-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/generic-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/latex-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/makeindex-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/metapost-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/doc/programs-doc.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/ams-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/dc-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/ec-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/misc-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/postscript-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/fonts/sauter-fonts.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/amstex.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/bibtex.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/eplain.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/latex-extra.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/metapost.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/pictex.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/pstricks.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/texdraw.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/goodies/xypic.tar.gz
</PRE>

所有这些档案，应该被放在你要安装 teTeX 系统的最上层的目录之内，和最小的安装一样，执行命令：
<PRE>
sh ./install.sh
</PRE>
<H2><A NAME="base-config"></A> <A NAME="ss9.2">9.2 基本系统设定 </A>
</H2>

<P>决定要那一种　teTeX 之後，执行 <CODE>install.sh</CODE> 会出现一些选项的目录，唯一需要的设定，就是 " D "  选项，即选择要在那□安装　teTeX　系统的最上层的目录，当然在这个目录中，你必须拥有写入的权利，举例来说，你正在你的家目录里安装teTeX ，你必须指定teTeX 安装的目录为：
<PRE>
/home/john.q.public/teTeX
</PRE>

然後回到主要的目录之後，再选 " I " 选项，继续安装，这目录可以不存在，<CODE>install.sh</CODE> 会自动产生这目录。
<P>即使你计划只使用 Postscript 格式、 Type 1 字型或偶而使用 Computer Modern 字型，你还是可以考虑另一个选项，设定一个其它的目录，存放产生的字型，你还要有这目录的写入权利。接上面例子，你能指定：
<PRE>
/home/john.q.public/texfonts
</PRE>

或者，你想让系统上的所有的使用者，都能使用这些产生的字型，就把这放字型的目录令为：
<PRE>
/var/texfonts
</PRE>

我建议 <EM>不要 </EM> 把这目录令为<CODE>/var/tmp/texfonts</CODE> ，因为有可能在系统重新启动之後，这些字型会被删除掉，而在下次要使用这些字型时，又要重新制造。
<P>
<P>在选了 " I " 选项後，  <CODE>install.sh</CODE> 会继续安装，设定不同的允许权，连结档案目录，并编译档案，最後结束跳出，并会提醒你，把teTeX 的执行档目录，加入<CODE>$PATH</CODE>环境变数中，man pages 和 info 档所在目录，分别加入<CODE>$MANPATH</CODE>和<CODE>$INFOPATH</CODE> 环境变数中，例如，如果你使用<CODE>bash</CODE> shell ，则把下列指令加入<CODE>~/.profile</CODE>中：
<PRE>
export PATH=$PATH:"/home/john.q.public/teTeX/bin"
export MANPATH=$MANPATH":/home/john.q.public/teTeX/man"
export INFOPATH$=INFOPATH":/home/john.q.public/teTeX/info"
</PRE>

如果你使用别种 shell ，则加入 &nbsp;/.profile 中。然後签出再签入，使环境变数重新登录，再执行：
<PRE>
texconfig confall
</PRE>

以确定安装是正确的。
<P>接著，你能为特定的硬体设定 teTeX ，参考底下
<A HREF="#post-install">安装完後设定的细节</A><P>
<H2><A NAME="generic-CTAN"></A> <A NAME="ss9.3">9.3 CTAN 来源码套件的安装</A>
</H2>

<P>要从程式码自行编译安装 teTeX V. 0.4 ，先用 <CODE>ftp</CODE> 到 CTAN，如
<A HREF="ftp://ftp.tex.ac.uk">ftp://ftp.tex.ac.uk</A> ，抓取：
<PRE>
ctan/tex-archive/systems/unix/teTeX/distrib/INSTALL.src
ctan/tex-archive/systems/unix/teTeX/distrib/sources/README.texmf-src
ctan/tex-archive/systems/unix/teTeX/distrib/sources/teTeX-lib-0.4pl8.tar.gz
ctan/tex-archive/systems/unix/teTeX/distrib/sources/teTeX-src-0.4pl7.tar.gz
</PRE>
<P>先看 <CODE>INSTALL.src</CODE>中的指示，再用 <CODE>su</CODE>变为系统管理者，然後在一个你有读，写，执行等权利的目录中，解开这些档案。
<P>记得<CODE>tar</CODE>要用<CODE>p</CODE>选项，而且也要记得在<CODE>bash</CODE>中 unset ，<CODE>noclobber</CODE>选项，你可以这样下命令：
<PRE>
set +o noclobber
</PRE>

<CODE>+o</CODE> 就是 <CODE>设定</CODE> <EM>取消</EM>一个变数，就像预期会作用，但是没发生一样。
<P>解开 <CODE>teTeX-lib-0.4pl8.tar.gz</CODE> 会产生<CODE>./teTeX</CODE>的目录，解开 <CODE>teTeX-src-0.4pl7.tar.gz</CODE> 会产生 <CODE>teTeX-src-0.4</CODE> 的目录，列印<CODE>INSTALL.src</CODE> ，而且保存在手边，以便为下列那些的步骤使用。再 <CODE>切换</CODE> 到 <CODE>./teTeX-src-0.4</CODE> 的目录，依 <CODE>INSTALL.src</CODE> 的说明，修改<CODE>./Makefile</CODE>。你还须要把 teTeX 所在的绝对目录，令为 <CODE>TETEXDIR</CODE> 的环境变数，这目录将会是你解开来源码和程式库档案所在目录的<CODE>teTeX</CODE>子目录。举例来说，如果你在自己的家目录解开这些档，就把<CODE>TETEXDIR</CODE> 令为：
<PRE>
/home/john.q.public/teTeX
</PRE>

剩下<CODE>Makefile</CODE>的其他选项就和一般差不多，除非你使用一个非标准化的编译器和程式库的设定，或者要编译器做更多的最佳化，或其他原因，否则只要 GCC 的版本为 2.7.2或更新的就可以了。因为编译过程，<CODE>dialog</CODE>程式使用到 ncurses 程式库，所以还要检查<CODE>USE_DIALOG</CODE>，<CODE>USE_NCURSES</CODE>和<CODE>HAVE_NCURSES</CODE>
的变数，是否设定正确。在安装套件□，就以经包含了<CODE>ncurses</CODE> 程式库，所以 <CODE>Makefile</CODE> 可能会很顺利，如果你没有 <CODE>ncurses</CODE> ，可供连结编译，<CODE>texconfig</CODE> 依然能执行。
<P>如果到这□，每件事都很正确，你就能在最上层的来源目录里，执行 <CODE>make world</CODE> ，等到teTeX  的执行档造出来，安装就完成了，这可能要花几个小时。
<P>在安装完成之後，要把 teTeX 目录加入
<CODE>$PATH ， $MANPATH</CODE>， <CODE>$INFOPATH</CODE>那些环境变数之中，承上例，只要在<CODE>~/.bash_profile</CODE> 档案加入：
<PRE>
export PATH=$PATH":/home/john.q.public/teTeX/bin/i386-linux"
export MANPATH=$MANPATH":/home/john.q.public/teTeX/man"
export INFOPATH=$INFOPATH":/home/john.q.public/teTeX/info"
</PRE>

用来源码安装和用以编译好的二进位码安装， <CODE>$PATH</CODE> 变数是不同的，前者的可执行档的路径是 <CODE>teTeX/bin/i386-linux</CODE> ，而後者是<CODE>teTeX/bin</CODE>。
<P>到这□，你能执行 <CODE>texconfig confall</CODE> ，确定那些路径已经正确地被设定，然後进行如同和用安装可执行档的步骤一样，参考 
<A HREF="#post-install">安装完後设定的细节</A>。
<P>
<H2><A NAME="post-install"></A> <A NAME="ss9.4">9.4 安装完後设定的细节 </A>
</H2>

<P>首先参考 Thomas Esser 的<CODE>README</CODE> 档案，它包含许多，如何设定teTeX 的输出装置 ( 也就是，印表机 ) 的暗示。 <CODE>README</CODE>档案位於目录：
<PRE>
/usr/lib/teTeX/texmf/doc/tetex
</PRE>

用下列命令浏览这档案（ 在此是使用 Slackware 套件 ）：
<PRE>
less /usr/lib/teTeX/texmf/doc/tetex/README
</PRE>

或用这命令列印出来：
<PRE>
cat /usr/lib/teTeX/texmf/doc/tetex/README >/dev/lp0
</PRE>

假定你的印表机被连接到 <CODE>/dev/lp0</CODE>。
如果不是，则适当的修改成连接的装置。
<P>或者使用 <CODE>lpr</CODE>命令：
<PRE>
lpr /usr/lib/teTeX/texmf/doc/tetex/README
</PRE>

你应该在安装 Linux 时，已经顺便安装印表机 daemon 了，如果没有，再依安装过程，重新安装一次。
<P>印出 <CODE>teTeX-FAQ.</CODE> ，并放在手边，它包含许多如何设定teTeX 的印表机驱动程式的暗示，在比较新的 teTeX 版本中，则可直接由<CODE>texconfig</CODE>看到 <CODE>teTeX-FAQ</CODE> 。
<P>然後，你要定义一个目录储存你的自己的 TeX 格式档案。teTeX 会搜寻，在系统内的<CODE>/etc/profile</CODE>档，被列在 <CODE>$TEXINPUTS</CODE> 环境变数中那些目录内的 TeX 输入档案：
<PRE>
export TEXINPUTS=".:~/texinputs:"
</PRE>

个别的使用者，则把它加入他们的<CODE>~/.profile</CODE> 中，或加入<CODE>~/.bash_profile</CODE> ，如果使用  <CODE>bash</CODE> 的话。<CODE>$TEXINPUTS</CODE> 环境变数，告诉teTeX ，到使用者的家目录之下的<CODE>~/texinputs</CODE> 目录，去寻找使用者的个别 TeX 格式档案，<EM>要确实的</EM> 在目录前面和後面加上冒号，也就是把搜寻到的结果，附加到你的目录。首先你必须使 teTeX     去搜寻部分的格式档案，然後它再使用你编辑过的标准格式档案的部分版本。
<P>如果你以管理者的身份安装teTeX ，把<CODE>/usr/lib/teTeX/bin</CODE> 目录，加入系统的路径，若你是自己个人要安装，把 teTeX 的执行档的目录，放到<CODE>~/.profile</CODE>
或<CODE>~/.bash_profile</CODE>中<CODE>$PATH</CODE>的<EM>前面</EM>：
<PRE>
export PATH="~/tetex/bin:"$PATH
</PRE>

现在以 <CODE>root</CODE>身份签入，并依<CODE>teTeX-FAQ</CODE>指示，执行<CODE>texconfig</CODE>，而且选择与你系统连接的印表机，确定你在 teTeX 中，是否正确的设定好印表机和印表机解析度。
<P>最後执行<CODE>texhash</CODE> ，以确定 teTeX  的内在资料库是最新的，资料库实际上是一个<CODE>ls-lR</CODE>档案，每一次改变系统结构<EM>必须</EM> 执行 <CODE>texhash</CODE>，否则 teTeX 将不能够找出你改变的地方。
<P>
<HR>
<A HREF="TeTeX-HOWTO-10.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="TeTeX-HOWTO-8.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="TeTeX-HOWTO.html#toc9"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
