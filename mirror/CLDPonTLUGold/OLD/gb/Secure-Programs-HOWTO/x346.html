<HTML
><HEAD
><TITLE
>信号</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="Linux和Unix安全编程HOWTO"
HREF="book1.html"><LINK
REL="UP"
TITLE="Linux和Unix安全特性概要"
HREF="c211.html"><LINK
REL="PREVIOUS"
TITLE="套接字和网络连接"
HREF="x337.html"><LINK
REL="NEXT"
TITLE="配额与限制"
HREF="x354.html"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux和Unix安全编程HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x337.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 3. Linux和Unix安全特性概要</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x354.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN346"
>信号</A
></H1
><P
>信号是类Unix操作系统世界里“中断”的一种简单形式，而且是Unix中古老的一部分。进程可以对另一个进程设置“信号”（即使用kill(1)或kill(2)），这样其它的进程就会异步地接收到信号并进行处理。进程要拥有向某些其它进程发送信号的许可必须具有root权限，或者发送进程的真实或有效用户ID等于接收进程的真实或保存的set-user-ID。</P
><P
>虽然信号是Unix中古老的一部分，但在不同的实现下语义有所不同。从根本上说，它们涉及到“在处理一个信号时出现另一个信号会发生什么？”一类的问题。较早的Linux libc 5对某些信号操作使用一组与新的GNU libc库不同的语义。要了解更多信息，请参考glibc的FAQ（在某些系统中可以在<TT
CLASS="FILENAME"
>/usr/doc/glibc-*/FAQ</TT
>找到其本地拷贝）。</P
><P
>对于新程序，应该只使用POSIX信号系统（这依然是基于BSD上的工作）；它受到广泛的支持，而且不会有某些早期信号系统具有的问题。POSIX信号系统是基于使用数据类型sigset_t，它可以通过一组操作来处理：sigemptyset()、sigfillset()、sigaddset()、sigdelset()和sigismember()。可以从sigsetops(3)中读到这些信息。然后用sigaction(2)、sigaction(2)、sigprocmask(2)、sigpending(2)和sigsuspend(2)来建立一个处理信号的程序（参见相应的man帮助页以了解更多信息）。</P
><P
>一般应该使信号处理程序很小而且简单，同时小心对待竞争状态。由于信号天生就是异步的，所以很容易导致竞争状态。</P
><P
>对于服务器程序有一个通用约定：如果接收到SIGHUP，应该关闭所有日志文件、重新打开并读入配置文件，然后重新打开日志文件。这样就支持服务器不暂停地完成重新配置，以及无数据丢失的日志轮转。如果要编写的服务器程序可以使用该约定，请支持这一约定。</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x337.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x354.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>套接字和网络连接</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c211.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>配额与限制</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>