<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>从源代码打造一个最小化的Linux系统实作篇: Glibc库</TITLE>
 <LINK HREF="BuildMin-7.html" REL=next>
 <LINK HREF="BuildMin-5.html" REL=previous>
 <LINK HREF="BuildMin.html#toc6" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="BuildMin-7.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-5.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc6"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s6">6. Glibc库</A></H2>

<P>下一步我们要安装<CODE>init</CODE>，但是同运行在Linux上几乎全部的程序一样，
<CODE>init</CODE>使用了GNU C语言库glibc所提供库函数，因此我们先得把这个东东
安装上．
<P>
<P>Glibc库是一个很大而且很复杂的软件包．在我那个旧型的带8兆内存的386sx/16机器
上，得花掉我90个小时来完成编译工作．但是在我那带有64兆内存的赛杨(Celeron)
433上只花掉了33分钟．如果您只有8兆内存(或者少得让人打颤的容量)的话，那就
做好苦熬的准备吧．
<P>
<P>glibc的安装文档建议在不同的独立分离目录里面编译．这样做就能够让您很轻松
地再次编译，因为您可以该目录下面接著编译．您可能也会想这么做，因为可以为
您节省大约265兆的磁盘空间哦!
<P>
<P>跟平常一样，把<CODE>glibc-2.1.3.tar.gz</CODE>(或者其它版本)这个tar包解压到
<CODE>/mnt/target/usr/src</CODE>这个目录下面．接下来，我们得把附加库也解压
到glibc库目录下面．所以先<CODE>cd glibc-2.1.3</CODE>，然后接著在这个目录下面
把<CODE>glibc-crypt-2.1.3.tar.gz</CODE>和<CODE>glibc-linuxthreads-2.1.3.tar.gz</CODE>
这两个tar包解开．
<P>
<P>现在我们就可以生成编译目录，设置选项，执行make编译和安装glibc库了．这些
都是我所使用过的命令，但是最好您自己阅读一下文档，确认最适合您的状况的
做法．然而在您开始前，您可能需要执行<CODE>df</CODE>命令来查看一下还有多少
剩余空间．您还可以在编译并安装完毕glibc库之后再执行一次看看这玩意儿到底
得占多大地儿．
<P>
<P>
<PRE>
        cd ..
        mkdir glibc-build
        ../glibc-2.1.3/configure --enable-add-ons --prefix=/usr
        make
        make install_root=/mnt/target install
</PRE>
<P>
<P>注意了，我们还有别的方法来告知一个软件包该装到什么地方．
<P>
<HR>
<A HREF="BuildMin-7.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-5.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc6"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
