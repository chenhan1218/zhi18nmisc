<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>从源代码打造一个最小化的Linux系统实作篇: Util-linux (getty 和login)</TITLE>
 <LINK HREF="BuildMin-11.html" REL=next>
 <LINK HREF="BuildMin-9.html" REL=previous>
 <LINK HREF="BuildMin.html#toc10" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="BuildMin-11.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-9.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc10"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s10">10. Util-linux (getty 和login)</A></H2>

<P>软件包util-linux包含有<CODE>agetty</CODE>和<CODE>login</CODE>．我们需要这两个
程序才能登录系统(log in)和得到命令行提示符(bash prompt)．在安装之后，
请在目标系统的<CODE>/sbin</CODE>目录下为<CODE>agetty</CODE>建立一个符号连接到
<CODE>getty</CODE>．<CODE>getty</CODE>是所有Unix类系统当中被认为应该呆在那个
地方的程序之一，所以生成连接的主意要强于改动<CODE>inittab</CODE>来运行
<CODE>agetty</CODE>．
<P>
<P>对于util-linux这个包，我剩下的一个问题就是该包的编译．这个包还包含
有<CODE>more</CODE>这个程序，而我没法让<CODE>make</CODE>进程给<CODE>more</CODE>
在目标系统上做一个指向ncurses 5库的连接，而不是在源头系统上指向
ncurses 4库的连接．我会努力克服这个困难的．
<P>
<P>您还得在目标系统上准备一个密码文件<CODE>/etc/passwd</CODE>．<CODE>login</CODE>
登录程序正是通过查询该文件来确认您是否允许登录的．因为此次我们只是
打造一个玩具系统，所以我们可以只设置根系统用户就够了，而且不需要任何
密码!! 只需要在目标系统的密码文件<CODE>/etc/passwd</CODE>加上如下一行即可∶
<P>
<P>
<PRE>
root::0:0:root:/root:/bin/bash
</PRE>
<P>
<P>所有的域是通过冒号(:)分隔开的，自左向右分别代表∶用户名称(user id)，
密码密串(password)，用户号码(user number)，用户群组号码(group number)，
用户真实姓名(user's name)，用户主目录(home directory)和缺省命令解释器
(default shell)．
<P>
<HR>
<A HREF="BuildMin-11.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-9.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc10"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
