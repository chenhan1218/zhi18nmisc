<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>如何变更 xterm 的主题: 动态主题</TITLE>
 <LINK HREF="Xterm-Title-4.html" REL=next>
 <LINK HREF="Xterm-Title-2.html" REL=previous>
 <LINK HREF="Xterm-Title.html#toc3" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="Xterm-Title-4.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Xterm-Title-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Xterm-Title.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s3">3. 动态主题</A></H2>

<P>许多人发现这在显示一些动态资讯时相当有用, 比如 使用者所登入的主机名称,
现行的工作目录, 等等.
<P>
<P>
<H2><A NAME="ss3.1">3.1 xterm 溢位序列</A>
</H2>

<P>一个已在执行的 xterm 的视窗及图示的主题都可以透过溢位序列来变更.
下列列出跟这个设定有关的序列:
<UL>
<LI><CODE>ESC]0;<B>string</B>BEL</CODE> -- 设定图示及视窗的主题为
<B>string</B></LI>
<LI><CODE>ESC]1;<B>string</B>BEL</CODE> -- 设定图示名为 <B>string</B></LI>
<LI><CODE>ESC]2;<B>string</B>BEL</CODE> -- 设定视窗主题为
<B>string</B></LI>
</UL>

在这里 <CODE>ESC</CODE> 是指 <B>escape</B> 字元 (\033), 而<CODE>BEL</CODE> 是指
<B>bell</B> 字元 (\007).
<P>
<P>在 xterm 里头就可以使得视窗及图示的主题变更.
<P>
<P><B>注意</B>: 这些序列可以应用到大部份 xterm 衍生的程式,
比如 <CODE>nxterm</CODE>, <CODE>color-xterm</CODE> 及 <CODE>rxvt</CODE>. 其他的
终端机类型大都使用不一样的序列; 参考附录所列举的□例.
如要参考 xterm 所有的溢位序列参考这个档案
<A HREF="http://www.giccs.georgetown.edu/~ric/howto/Xterm-Title/ctlseq2.txt">ctlseq2.txt</A>,
这会随著 xterm 的套件发行, 或
<A HREF="http://www.giccs.georgetown.edu/~ric/howto/Xterm-Title/xterm.seq">xterm.seq</A>, 随著
<A HREF="http://www.rxvt.org/">rxvt</A> 套件发行.
<P>
<P>
<H2><A NAME="ss3.2">3.2 印出这些序列</A>
</H2>

<P>有些资讯在命令解译器的生命周期中是自始至终都不变的,
比如 主机名称 及 使用者名称, 那麽在命令解译器的初始启动档
(rc file) 用 echo 指令印出这些字串就够了:
<BLOCKQUOTE><CODE>
<PRE>
echo -n "\033]0;${USER}@${HOST}\007"
</PRE>
</CODE></BLOCKQUOTE>

应该会产生像 <CODE>username@hostname</CODE> 这样的主题,
假设命令解译器的变数 <CODE>$USER</CODE> 及 <CODE>$HOST</CODE> 都已设定正确的话.
<CODE>echo</CODE> 所需的选项依命令解译器使用的类型而有所不同 (参考下面的说明).
<P>
<P>有些资讯在命令解译器的生命周期中是一直在变的,
比如 现行工作目录, 这些溢位资讯就必须在每次提示字元变化时随著改变. 
这下子字串就会在每次你输入命令时更新,
而且你还可以追踪保留 现行目录, 使用者名, 主机名, 等资讯.
部份命令解译器提供这类用途的特殊功能,
有些则没有. 而我们就必须直接插入主题溢位资讯到题示字串中.
这会在下一节中说明
<P>
<P>
<HR>
<A HREF="Xterm-Title-4.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Xterm-Title-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Xterm-Title.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
