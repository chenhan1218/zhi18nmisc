<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>Linux ``Linux-DOS-Win95-OS2'' mini-HOWTO: 安装程序</TITLE>
 <LINK HREF="Linux+DOS+Win95+OS2-1.html" REL=previous>
 <LINK HREF="Linux+DOS+Win95+OS2.html#toc2" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<IMG SRC="../img/next.gif" ALT="Next">
<A HREF="Linux+DOS+Win95+OS2-1.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Linux+DOS+Win95+OS2.html#toc2"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s2">2. 安装程序</A></H2>

<P>
<DL>
<DT><B>注：</B><DD><P>括号内的数字为我用于 1.2 GB硬盘内的 MB 数。
</DL>

现在我们开始安装：
<OL>
<LI>运行 Linux Slakware CD 上的 <CODE>view.exe</CODE>
生成 Linux Boot 和 Linux Root 软盘。Linux 的启动盘称为
“Root disk” 和 “Ramdisk”。此後此盘称为 Ramdisk (Root)。</LI>
<LI>将原盘上需要保存的资料制作备份。</LI>
<LI>用 MSDOS 安装盘 disk 1 启动。</LI>
<LI>当出现 “<CODE>Starting MSDOS</CODE>” 时，按 F5，不运行 <CODE>config.sys</CODE> and <CODE>autoexec.bat</CODE>。</LI>
<LI>运行 <CODE>a:\fdisk.exe</CODE>。</LI>
<LI>删除所有分割区（屏幕提示：
       
DELETING / MODIFYING OF ANY PARTITION
WILL RESULT IN THE LOSS OF ALL DATA ON THE DISK!）。
</LI>
<LI>添加 MSDOS 主分割区 (11MB)。</LI>
<LI><CODE>Format</CODE> 这个分割区。</LI>
<LI>运行 <CODE>a:\setup.exe</CODE>，安装 MSDOS 在这个分割区内。</LI>
<LI>启动 OS/2。</LI>
<LI>选 Advanced installation.</LI>
<LI>运行 <CODE>FDISK</CODE>。（在 OS/2 安装中，它会自动出现）</LI>
<LI>在 MSDOS 分割区後增加一个分割区。这个分割区将成为 Windows
95 分割区（349MB）。</LI>
<LI>在下一个分割区安装 Boot Manager （2MB）。</LI>
<LI>增加扩展分割区。</LI>
<LI>在扩展分割区增加逻辑盘。此处将成为 MSDOS 的数据区（511MB）。</LI>
<LI>在扩展分割区再增加逻辑盘。此处将成为 OS/2 HPFS (``High Performance File System'') 分割区 （127MB）。</LI>
<LI>在扩展分割区增加最後一个逻辑盘，包含所有剩馀空间。
以後这个逻辑盘会分割成两个分割区，分别为 Linux 和 swap 分割区。
因为 OS/2 （和 DOS）至多只认一个硬盘上的 6 个分割区（3 个主分割区和 1 个扩展分割区内的 3 个逻辑盘），所以现在只设一个 Linux 逻辑盘。注意：此处必需先设这个逻辑盘，
把空间占满，别以为以後 Linux 还能加设空间。因为 OS/2 的 FDISK 在设定最後一个逻辑盘後会加附 END 标志。在此之後就不能再加任何逻辑盘，不论是否还有空间。
所以先把所有空间占下来，等以後用 Linux 的 FDISK 再来划分最後一个分割区。 </LI>
<LI>将分割区 1, 2, 和 5 加附到 Boot Manager。</LI>
<LI>将分割区 5 设置成 installable 。

此时 <CODE>FDISK</CODE> 屏幕应显示如下(或接近这样的设置)：
<BLOCKQUOTE><CODE>
<HR>
<PRE>

                               FDISK

Disk 1
___________________________________________________________________________

Partition Information
Name            Status          Access          FS Type         MBytes
___________________________________________________________________________

MSDOS           Bootable        C: Primary      FAT              11
WIN 95          Bootable         : Primary      FAT             350
                Startable        : Primary      BOOT MANAGER      2
                None            D: Logical      Unformatted     511
OS/2            Installable     E: Logical      FAT             127
                None            F: Logical      Unformatted     219
        
</PRE>
<HR>
</CODE></BLOCKQUOTE>

</LI>
<LI>继续用 OS/2 进行安装。</LI>
<LI>重新启动并从 Boot Manager 选取分割区 2 (Windows 95)。 </LI>
<LI>屏幕出现 missing operating system 信息时，安装 MSDOS。
我们选这个分割区来“躲藏”MSDOS 分割区。OS/2 Boot Manager 有一个特别性质，每次只能看见一个启动分割区（此处为 MSDOS 和OS/2），换言之，
当用 MSDOS 启动时，就看不到另一个分割区（WIN95）。这就是为什麽分享一个盘号。
所以在上面“Access”下，MSDOS 有盘号 C，而 WIN95 就没有盘号的缘故。在这种情况下，MSDOS 在 C 盘，WIN95 却看不见。如果用
WIN95 启动，情况正好相反，WIN95 在 C 盘，而 MSDOS 就完全看不到。
<B>看不到的盘，就完全无法使用</B>。如果想在两个盘间抄送文件，
就得借助一个共用盘。此处就是 DOS/WIN95 的数据盘（D 盘 511 MB）。</LI>
<LI>将 MSDOS 安装在分割区 2。（以便安装 Win95）</LI>
<LI>用分割区 2 启动。</LI>
<LI>在这个分割区上安装 Windows 95。</LI>
<LI>用分割区 1 启动。</LI>
<LI>格式化分割区 4 。</LI>
<LI>将 DOS 数据抄回分割区 1 和 4。</LI>
<LI>用 Linux Boot 软盘启动。</LI>
<LI>然後用 Linux Ramdisk (Root) 软盘。</LI>
<LI>用 root 登录，出现 <CODE>#</CODE> 号时键入“<CODE>fdisk</CODE>”，
然後按 enter。</LI>
<LI>删除最後一个分割区（步骤 18 设立的分割区）。</LI>
<LI>增加一个 16MB 的分割区，并设置成 Linux Swap。 (17MB)</LI>
<LI>将硬盘的所有剩馀部分设置成一个分割区，并将其设成 Linux native。 (198MB)</LI>
<LI>将改变写入并重新启动。</LI>
<LI>当出现 <CODE>#</CODE> 时运行 <CODE>setup</CODE>。</LI>
<LI>将 Linux 安装在最後一个分割区。</LI>
<LI>安装 LILO时务必将其安装在最後一个分割区的 root 下（不是 MBR，否则前功尽弃）。只把最後一个分割区放在 LILO 内，并将时间（timer）设为 0。这样在 OS/2 的 Boot Manager 内选取 Linux 时，LILO 会启动，
并从扩展分割区的逻辑盘启动 Linux。因为这个有 Linux 的分割区是唯一需要从 LILO 启动的分割区，所以可以把时间设为 0。（如有其他版本的 Linux，则可设定时间）。</LI>
<LI>设定 Linux swap 分割区。（参考 Matt Welsh 编写的 Linux Installation  and Getting Started 手册）</LI>
<LI>启动 OS/2。</LI>
<LI>运行 FDISK。</LI>
<LI>将 Linux 加载到 Boot Manager （Linux NATIVE 分割区格式 <CODE>83</CODE>， <B>不是</B>格式 <CODE>82</CODE>！）。</LI>
</OL>

现在 <CODE>FDISK</CODE> 屏幕应显示如下(或接近这样的设置)：
<BLOCKQUOTE><CODE>
<HR>
<PRE>

                               FDISK

Disk 1
___________________________________________________________________________

Partition Information
Name            Status          Access          FS Type         MBytes
___________________________________________________________________________

MSDOS           Bootable        C: Primary      FAT              11
WIN 95          Bootable         : Primary      FAT             350
                Startable        : Primary      BOOT MANAGER      2
                None            D: Logical      FAT             511
OS/2            Bootable        E: Logical      HPFS            127
                None             : Logical      Type 82          17
Linux           Bootable         : Logical      Type 83         198
</PRE>
<HR>
</CODE></BLOCKQUOTE>

...至此，大功告成！
<P>如有建议/评论/问题（最好没有），请寄
<A HREF="mailto:r3mdh@raex.com">r3mdh@raex.com</A>。
<P>Mike Harlan，1997年11月11日
<HR>
<IMG SRC="../img/next.gif" ALT="Next">
<A HREF="Linux+DOS+Win95+OS2-1.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Linux+DOS+Win95+OS2.html#toc2"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
