<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>从源代码打造一个最小化的Linux系统实作篇: MAKEDEV(设备生成器)</TITLE>
 <LINK HREF="BuildMin-4.html" REL=next>
 <LINK HREF="BuildMin-2.html" REL=previous>
 <LINK HREF="BuildMin.html#toc3" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="BuildMin-4.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s3">3. MAKEDEV(设备生成器)</A></H2>

<P>我们要把源代码放置到目标系统的<CODE>/usr/src</CODE>目录下面．因此，举个例
子吧，如果您的目标系统是挂载在<CODE>/mnt/target</CODE>这个地方，且您的tar
包是放在<CODE>/root</CODE>里面，那么您要做的就是∶
<P>
<PRE>
 
        cd /mnt/target/usr/src
        tar -xzvf /root/MAKEDEV-2.5.tar.gz
</PRE>
<P>
<P>然后就把这些tar包复制到您要解开它们的地方就行了．千万别迷糊了哦．;->
<P>
<P>当您安装软件的时候，通常情况下您会把它们安装在正在使用的系统上．但是我们
并不想这么做，因为我们是要把<CODE>/mnt/target</CODE>当做根文件系统(root 
filesystem)，就是要把这些软件安装到这个地方．不同的软件包有不同的处理
方式．比如说MAKEDEV设备生成器包，您要做的是∶
<P>
<PRE>
        ROOT=/mnt/target make install
</PRE>
<P>
<P>您得先在这个包当中的README说明文件和INSTALL安装说明文件当中查出这些选项，
或者执行命令<CODE>./configure --help</CODE>查看帮助说明．
<P>
<P>查看一下MAKEDEV包当中的<CODE>Makefile</CODE>文件，看看它是怎样处理我们在命令
行当中设置的<CODE>ROOT</CODE>变量的．接著通过执行<CODE>man ./MAKEDEV.man</CODE>来
查看一下它的手册页，看看它是怎么起到作用的．您会发现生成我们自己的设备的
方式就是执行<CODE>cd /mnt/target/dev</CODE>然后<CODE>./MAKEDEV generic</CODE>．
请使用<CODE>ls</CODE>命令来看看它都为我们生成了哪些设备文件吧．
<P>
<HR>
<A HREF="BuildMin-4.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
