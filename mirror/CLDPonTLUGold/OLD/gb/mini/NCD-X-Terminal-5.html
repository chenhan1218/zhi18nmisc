<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE> NCD X terminal mini HOWTO: 设定 NCD X 终端机的开机程序</TITLE>
 <LINK HREF="NCD-X-Terminal-6.html" REL=next>
 <LINK HREF="NCD-X-Terminal-4.html" REL=previous>
 <LINK HREF="NCD-X-Terminal.html#toc5" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="NCD-X-Terminal-6.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="NCD-X-Terminal-4.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="NCD-X-Terminal.html#toc5"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s5">5. 设定 NCD X 终端机的开机程序</A></H2>

<P>电源打开以後， X 终端机试著去开机。
这个步骤是将 X 的相关软体载入到记忆体之中并执行之。
如果 X 终端机不能开机，那麽开机管理程式的提示符号 '>' 将会出现。
这个开机监视软体是一种存在於终端机里面的 PROMs (programmable read-only memory) 的韧体。基本的开机监控软体介面，它可能是设定终端机如何开机以及
自主机获取 X server 的软体。
使用 '?' 以获取开机监控程式的指令协助。
<P>
<P>利用存在 NVRAM (Non-volatile Random-Access Memory) 的开机监控程式设定参数
并且在关机时保留设定值。
<P>
<P>在开机监控程式中，'bt' 这个指令或是一个系统选单能够用来起始终端机。
基本而论，两者都提供同样的能力，但是选单能提供更多的选项设定。
<P>
<H2><A NAME="ss5.1">5.1 开机监控程式的命令文法</A>
</H2>

<P><CODE>>bt file terminal_IP host_IP gateway_IP subnet_mask</CODE>
<P>
<P>
<DL>
<DT><B><B>file</B></B><DD><P>这个名称是欲自远端主机要求的档案名称，它包含了
被 X 终端机开机使用的 X server 的软体 (例如：' Xncd19r ' ) 。
确定这个档案名称符合储存於 bootptab 档案 ( 我们之前提过它 ) 中 X 终端机的资讯。
<P>
<DT><B><B>terminal_IP</B></B><DD><P>这个 IP 位址是指定给 X 终端机的 ( 例如 10.0.0.2 )。
同样的，这组组机训也要和 bootptab 档案中 X 终端机的资讯相同。
<P>
<DT><B><B>host_IP</B></B><DD><P>这个 IP 位址是指定给开机主机的 ( 例如 10.0.0.1)。
<P>
<DT><B><B>gateway</B></B><DD><P>这个 IP 位址是指定给闸道的  ( 例如  10.0.0.1)。
<P>
<DT><B><B>subnet_mask</B></B><DD><P>子网路遮罩，以十进制或是十六进制表达 (例如 255.0.0.0 或是 ff000000)。
</DL>
<P>
<H2><A NAME="ss5.2">5.2 开机监控软体设定选单</A>
</H2>

<P>使用 '设定键' 或是在命令提示符号 '>' 後面键入 'se'。 
<P>
<DL>
<DT><B><B>Get IP Addresses From</B></B><DD><P>X 终端机的 IP 位址应该被储存由开机监控程式的设定工具储存於 NVRAM 中。
如果你有在使用 RARP ( reverse ARP ) 去从选端的主机取得 IP，那麽你可以选择 'Network'。
<P>
<DT><B><B>Terminal IP Address</B></B><DD><P>这个 IP 位址是指定给 X 终端机的 ( 例如 10.0.0.2 )。
这如同上面所提及的 'terminal_IP'。
<P>
<DT><B><B>First Boot Host IP Address</B></B><DD><P>这个 IP 位址是指定给开机主机的 ( 例如 10.0.0.1 )。
这如同上面所提及的 'host_IP'。
<P>
<DT><B><B>Gateway IP Address</B></B><DD><P>这个 IP 位址是指定给闸道的。
这如同上面所提及的 'gateway' 。
<P>
<DT><B><B>Subnet Mask</B></B><DD><P>子网路遮罩，以十进制表达。 
这如同上面所提及的 'subnet_mask'。
<P>
<DT><B><B>Broadcast IP Address</B></B><DD><P>这个 IP 位址是用来广播讯息至子网路的 ( 例如 10.255.255.255)。
<P>
<DT><B><B>Boot File</B></B><DD><P>这个名称是欲自远端主机要求的档案名称，它包含了
被 X 终端机开机使用的 X server 的软体 (例如： 'Xncd19r' )。
这如同上面所提及的 'file'。
<P>
<DT><B><B>TFTP Boot Directory</B></B><DD><P>这项资料是主机存放开机档案的路径 ( 例如 '/usr/X11/lib/X11/ncd/' 或是 '/tftpboot/' )。
<P>
<DT><B><B>Config file</B></B><DD><P>X 终端机在远端主机上设定档的资料名称 ( 往下看 )。
<P>
<DT><B><B>UNIX Config Directory</B></B><DD><P>主机存放设定档的路径名称
(eg "/usr/X11/lib/X11/ncd/")。
<P>
<DT><B><B>TFTP Order, NFS Order, Local Order</B></B><DD><P>指定优先使用的开机用协定为 '1'。
指定为 TFTP 为 '1' 当开机时使用 BootP 开机。
</DL>
<P>
<H2><A NAME="ss5.3">5.3 X 终端机设定档</A>
</H2>

<P>在开机的程序中，X 终端机会试图从开机主机传送，下载档案到本端执行。
X 终端机开机是否成功并不一定要求这些档案。如果档案没有被找到，终端机将会使用预设值。
<P>设定档在开机时开始传送：
<UL>
<LI>X 终端机设定档 ( 例如 ncd.conf ) 是用来维护终端机的设定。</LI>
<LI>色彩设定档 ( 例如 rgb.txt )。</LI>
<LI>X 键盘符号表的资料库 ( 例如 XKeysymDB )。</LI>
<LI>字型目录档案 ( 例如 font.dir, font.alias)。</LI>
</UL>
<P>
<P>开机成功後，X 终端机视窗将会伴随一个功能表选单出现。
终端机设定的键值贴在这个终端机视窗上。
这个终端机视窗有一个 'setup' 下拉式选单，
终端机的一些特性能在此被显示，修改以及储存在这个开机用主机的设定档之中，以便将来使用。
<P>如果使用 TFTP 自开机主机下载档案至 X 终端机上，
那麽这个档案的权限必须设定为全部的使用者都能存取。
相同的，为了能存放设定档至开机主机，这个档案必须存在并且打开所有的控制权限。
如果安全的 TFTP 被使用 ( 因为安全的理由这是被强烈建议的 )，
那麽档案只限定於某些特定的目录才能被存取。
<P>
<P><B>Note:</B> 如果终端机先前被设定为使用另一部主机，或是不同的设定参数，也许它不能正常开机。
重置 NVRAM 以移除设定，应该能解决这个问题。 
<P>
<P>从开机监控程式重置 NVRAM 只要键入 'nv' 这道命令。在子选单里选择 ' l ' 载入预设值。 ' s ' 来储存， 'q'  用以离开。 
确定开机程序如上所描述。
<P>
<H2><A NAME="ss5.4">5.4 登入主机</A>
</H2>

<P>在 X 终端机的下拉式选单中，选择 'terminals'
这一项选单，接著选择 ' New Telnet... ' 。
当远端登入的视窗出现时，在服务这个项目里键入网路主机的 IP 位址，在来选择 'OK'。
这时选端只机的登入提示应该会出现。在登入以後，X 的程式，
包含视窗管理员，都能在这个远端登入的视窗中被执行。
<P>
<HR>
<A HREF="NCD-X-Terminal-6.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="NCD-X-Terminal-4.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="NCD-X-Terminal.html#toc5"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
