<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>¦p¦ó¨ú±o¡A¦w¸Ë¡A³]©w shadow ±K½X: ±N Shadow Suite ©ñ¶i¨Ó¨Ï¥Î¡C</TITLE>
 <LINK HREF="Shadow-Password-HOWTO-8.html" REL=next>
 <LINK HREF="Shadow-Password-HOWTO-6.html" REL=previous>
 <LINK HREF="Shadow-Password-HOWTO.html#toc7" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="Shadow-Password-HOWTO-8.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="Shadow-Password-HOWTO-6.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="Shadow-Password-HOWTO.html#toc7"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="sec-work"></A> <A NAME="s7">7. ±N Shadow Suite ©ñ¶i¨Ó¨Ï¥Î¡C</A></H2>

<P>³o¸`´y­z§A»Ý­nª¾¹D¦³¨Çµ{¦¡¦b¦w¸Ë®É´N¤w¸g¦³ <EM>Shadow Suite</EM>¡C
¤j³¡¤Àªº¸ê°T¦b¾Þ§@¤â¥U¥i¥H§ä¨ì¡C
<P>
<H2><A NAME="ss7.1">7.1 ·s¼W¡B­×§ï©M§R°£¨Ï¥ÎªÌ</A>
</H2>

<P><EM>Shadow Suite</EM> ·s¼W¤U¦C«ü¥O¥Î¨Ó·s¼W¡B­×§ï©M§R°£¨Ï¥ÎªÌ¡C ³o¤]¬O¥i¥H¦w¸Ë
<CODE>adduser</CODE> µ{¦¡¡C
<P>
<H3>useradd</H3>

<P><CODE>useradd</CODE> ¨Ï¥O¥i¥Î¦b¨t²Î¤¤·s¼W¨Ï¥ÎªÌ¡C §A¤]¥i¥H±Ä¥Î¦¹«ü¥O¨Ó§ïÅÜ¹w³]¦r¦ê¡C
<P>§AÀ³¸Ó°µªº²Ä¤@¥ó¨Æ¬OÀË¬d¹w³]­È³]©w©M°w¹ï§Aªº¨t²Î¶i¦æ§ïÅÜ¡G
<BLOCKQUOTE><CODE>
<PRE>
useradd -D
</PRE>
</CODE></BLOCKQUOTE>
<HR>
<PRE>
GROUP=1
HOME=/home
INACTIVE=0
EXPIRE=0
SHELL=
SKEL=/etc/skel
</PRE>
<HR>
<P>¹w³]­È¤£¥þ¬O§A­nªº¡A©Ò¥H¦pªG§A¶}©l·s¼W¨Ï¥ÎªÌ¡A§A¥²¶·¸Ô¾\¨C­Ó¨Ï¥ÎªÌ¸ê°T¡C
¦Ó¥B¡A§Ú­Ì¥i¯à©MÀ³¸Ó§ïÅÜ³]©w­È¡C
<P>¦b§Úªº¨t²Î¤W¡G
<UL>
<LI>§Ú­n¹w³]¸s²Õ¬O 100</LI>
<LI>§Ú­n±K½X¨C¨ì 60 ¤Ñ´N¨ì´Á</LI>
<LI>§Ú¤£­nÂê¦í±b¸¹¦]¬°±K½X·|¨ì´Á</LI>
<LI>§Ú­n¹w³] shell ¬O <CODE>/bin/bash</CODE></LI>
</UL>

¬°¤F³o¨Ç§ïÅÜ¡A§Ú­n¨Ï¥Î¡G
<BLOCKQUOTE><CODE>
<PRE>
useradd -D -g100 -e60 -f0 -s/bin/bash
</PRE>
</CODE></BLOCKQUOTE>
 
<P>²{¦b°õ¦æ <CODE>useradd -D</CODE> ±N±o¨ì¡G
<HR>
<PRE>
GROUP=100
HOME=/home
INACTIVE=0
EXPIRE=60
SHELL=/bin/bash
SKEL=/etc/skel
</PRE>
<HR>
<P>
<P>¾¨ºÞ¨Ì·Ó§A»Ý­n­×§ï¡A¹w³]­È±N¦s¦b <CODE>/etc/default/useradd</CODE>.
<P>¥ý¦b§A¥i¥H¨Ï¥Î <CODE>useradd</CODE> ¨Ó·s¼W¨t²Î¨Ï¥ÎªÌ¡CÁ|¨Ò»¡©ú¡A·s¼W¤@¨Ï¥ÎªÌ <CODE>fred</CODE>
¨Ï¥Î¹w³]­È¤è¦¡¦p¤U¡G
<BLOCKQUOTE><CODE>
<PRE>
useradd -m -c "Fred Flintstone" fred
</PRE>
</CODE></BLOCKQUOTE>
<P>³o±N¦b <CODE>/etc/passwd</CODE> ÀÉ¤¤ªº¤@¦æ«Ø¥ß¦p¤U¡G
<BLOCKQUOTE><CODE>
<PRE>
fred:*:505:100:Fred Flintstone:/home/fred:/bin/bash
</PRE>
</CODE></BLOCKQUOTE>

¥B¦b <CODE>/etc/shadow</CODE> ÀÉ¤¤ªº¤@¦æ«Ø¥ß¦p¤U¡F
<BLOCKQUOTE><CODE>
<PRE>
fred:!:0:0:60:0:0:0:0
</PRE>
</CODE></BLOCKQUOTE>

<CODE>fred</CODE>ªº®Ú¥Ø¿ý±N³Q«Ø¥ß¥B <CODE>/etc/skel</CODE> ªº¤º®e±N³Q½Æ»s¦]¬°«ü¥O¥y¤¤¦³
<CODE>-m</CODE> ³]©w¡C
<P>¦]¬°§Ú­Ì¨Ã¥¼¸Ô­z UID¡A¨t²Î·|ª½±µ´M§ä¤U¤@­Ó¥iÀò±oªº½s¸¹¡C
<P><CODE>fred</CODE>ªº±b¸¹³Q«Ø¥ßÅo¡A¦ý¬O <CODE>fred</CODE> ¤´µM¤£¯àÃ±¤Jª½¨ì§Ú­Ì¤£¦AÂê¦í(unlock)³o­Ó±b¸¹¡C
³z¹L§ó§ï±K½X§¹¦¨ unlock ±b¸¹¡A¤èªk¦p¤U¡G
<P>
<BLOCKQUOTE><CODE>
<PRE>
passwd fred
</PRE>
</CODE></BLOCKQUOTE>

<HR>
<PRE>
Changing password for fredó
Enter the new password (minimum of 5 characters)
Please use a combination of upper and lower case letters and numbers.
New Password: *******
Re-enter new password: *******
</PRE>
<HR>

²{¦b <CODE>/etc/shadow</CODE> ÀÉ±N¥]§t¡G
<BLOCKQUOTE><CODE>
<PRE>
fred:J0C.WDR1amIt6:9559:0:60:0:0:0:0
</PRE>
</CODE></BLOCKQUOTE>

¥B <CODE>fred</CODE> ±N¥i¥HÃ±¤J©M¨Ï¥Î¸Ó¨t²Î¡C 
<CODE>useradd</CODE> ©M¨ä¥Lªþ±a <EM>Shadow Suite</EM> ¤ñ¸û¦nªº¦a¤è¬O¥i¥H¦Û°Ê§ïÅÜ
<CODE>/etc/passwd</CODE> ©M <CODE>/etc/shadow</CODE> ¡C ©Ò¥H¦pªG§A¥¿¦b·s¼W¤@­Ó¨Ï¥ÎªÌ¡A
¥B¥t¤@­Ó¨Ï¥ÎªÌ¥¿¦b§ó§ï±K½X¡A³o¨â­Ó¾Þ§@³£¥i¥H¥¿½Tªº°õ¦æ¡C
<P>§A¨Ï¥Î´£¨Ñªº«ü¥O¤ñª½±µ¦s¨ú <CODE>/etc/passwd</CODE> ©M <CODE>/etc/shadow</CODE> ÀÉÁÙ¦n¡C  
¦pªG§A¥¿½s¿è <CODE>/etc/shadow</CODE> ÀÉ¡A¥B¦³­Ó¨Ï¥ÎªÌ¦b§A½s¿è®É­n§ïÅÜ¥Lªº±K½X¡A
µM«á§AÀx¦s½s¿èµ²ªG¡A³o­Ó¨Ï¥ÎªÌªº±K½X±N·|¿ò¥¢±¼¡C
<P>³o¸Ì¬O¨Ï¥Î <CODE>useradd</CODE> ©M <CODE>passwd</CODE> ·s¼W¨Ï¥ÎªÌªº¤@¨Ç interactive script ¡G
<HR>
<PRE>
#!/bin/bash
#
# /sbin/newuser - A script to add users to the system using the Shadow
#                 Suite's useradd and passwd commands.
#
# Written my Mike Jackson &lt;mhjack@tscnet.com> as an example for the Linux
# Shadow Password Howto.  Permission to use and modify is expressly granted.
#
# This could be modified to show the defaults and allow modification similar
# to the Slackware Adduser program.  It could also be modified to disallow
# stupid entries.  (i.e. better error checking).
#
##
#  Defaults for the useradd command
##
GROUP=100        # Default Group
HOME=/home       # Home directory location (/home/username)
SKEL=/etc/skel   # Skeleton Directory
INACTIVE=0       # Days after password expires to disable account (0=never)
EXPIRE=60        # Days that a passwords lasts
SHELL=/bin/bash  # Default Shell (full path)
##
#  Defaults for the passwd command
##
PASSMIN=0        # Days between password changes
PASSWARN=14      # Days before password expires that a warning is given
##
#  Ensure that root is running the script.
##
WHOAMI=`/usr/bin/whoami`
if [ $WHOAMI != "root" ]; then
        echo "You must be root to add news users!"
        exit 1
fi
##
#  Ask for username and fullname.
##
echo ""
echo -n "Username: "
read USERNAME
echo -n "Full name: "
read FULLNAME
#
echo "Adding user: $USERNAME."
#
# Note that the "" around $FULLNAME is required because this field is
# almost always going to contain at least on space, and without the "'s
# the useradd command would think that you we moving on to the next
# parameter when it reached the SPACE character.
#
/usr/sbin/useradd -c"$FULLNAME" -d$HOME/$USERNAME -e$EXPIRE \
        -f$INACTIVE -g$GROUP -m -k$SKEL -s$SHELL $USERNAME
##
#  Set password defaults
##
/bin/passwd -n $PASSMIN -w $PASSWARN $USERNAME >/dev/null 2>&amp;1
##
#  Let the passwd command actually ask for password (twice)
##
/bin/passwd $USERNAME
##
#  Show what was done.
##
echo ""
echo "Entry from /etc/passwd:"
echo -n "   "
grep "$USERNAME:" /etc/passwd
echo "Entry from /etc/shadow:"
echo -n "   "
grep "$USERNAME:" /etc/shadow
echo "Summary output of the passwd command:"
echo -n "   "
passwd -S $USERNAME
echo ""
</PRE>
<HR>
 
<P>·s¼W¨Ï¥ÎªÌ¬O¥Î script ¤ñª½±µ½s¿è <CODE>/etc/passwd</CODE> / <CODE>/etc/shadow</CODE> ÀÉ©Î¨Ï¥Î
¹³ Slackware ªº <CODE>adduser</CODE> µ{¦¡ÁÙ­n¦n¡C 
<P>»Ý­n§ó¦h <CODE>useradd</CODE> ¸ê°T½Ð°Ñ·Ó½u¤W¾Þ§@¤â¥U¡C
<P>
<H3>usermod</H3>

<P><CODE>usermod</CODE> µ{¦¡¬O¥Î¦b­×§ï¨Ï¥ÎªÌ¸ê°T¡C
¥¦ªº°Ñ¼Æ¨Ï¥Î©M <CODE>useradd</CODE> µ{¦¡Ãþ¦ü¡C 
<P>¦pªG§A­n§ó·s <CODE>fred</CODE> ªº shell¡A§A­n§@¤U¦C¨BÆJ¡G
<BLOCKQUOTE><CODE>
<PRE>
usermod -s /bin/tcsh fred
</PRE>
</CODE></BLOCKQUOTE>
<P>²{¦b <CODE>fred</CODE> ªº <CODE>/etc/passwd</CODE> ÀÉ±NÅÜ¦¨¡G
<BLOCKQUOTE><CODE>
<PRE>
fred:*:505:100:Fred Flintstone:/home/fred:/bin/tcsh
</PRE>
</CODE></BLOCKQUOTE>

¦pªG­n¨Ï <CODE>fred</CODE> ªº±b¸¹¨ì´Á¤é¬° 09/15/97¡G
<BLOCKQUOTE><CODE>
<PRE>
usermod -e 09/15/97 fred
</PRE>
</CODE></BLOCKQUOTE>

²{¦b <CODE>fred</CODE> ¦b <CODE>/etc/shadow</CODE> ªºÄæ¦ìÅÜ¦¨¡G
<BLOCKQUOTE><CODE>
<PRE>
fred:J0C.WDR1amIt6:9559:0:60:0:0:10119:0
</PRE>
</CODE></BLOCKQUOTE>
<P>»Ý­n§ó¦h <CODE>usermod</CODE> ¸ê°T½Ð°Ñ·Ó½u¤W¾Þ§@¤â¥U¡C
<P>
<H3>userdel</H3>

<P><CODE>userdel</CODE> ¥Î¦b§R°£¨Ï¥ÎªÌ¡A¨Ï¥Î¤èªk¬°¡G
<BLOCKQUOTE><CODE>
<PRE>
userdel -r username
</PRE>
</CODE></BLOCKQUOTE>

<CODE>-r</CODE> °Ñ¼Æ¥i¥H±N¸Ó¨Ï¥ÎªÌ®Ú¥Ø¿ý¥þ³¡²¾°£¡C¦ì¦b´Á«Ý¥Ø¿ýªºÀÉ®×«h»Ý¤â°Ê²¾°£¡C
<P>¦pªG§A¥u¬O­nÂ²³æªºÂê¦í±b¸¹¦Ó¨S¦³­n§R°£¥¦¡A«ØÄ³§A¨Ï¥Î <CODE>passwd</CODE> «ü¥O¡C
<P>
<H2><A NAME="ss7.2">7.2 passwd «ü¥O©M passwd ¦Ñ¤Æ</A>
</H2>

<P><CODE>passwd</CODE> «ü¥O«Ü©úÅã¨Ï¥Î¦b§ïÅÜ±K½X¡A°£¦¹¤§¥~¡A
¥i¥Ñ <EM>root</EM> ¨Ï¥Î¦b¡G
<UL>
<LI>Lock ©M unlock ±b¸¹ (<CODE>-l</CODE> and <CODE>-u</CODE>)</LI>
<LI>³]©w±K½X¦Xªkªº³Ì¤j¤Ñ¼Æ
(<CODE>-x</CODE>)</LI>
<LI>³]©w±K½X§ïÅÜ¶¡ªº³Ì¤p¤Ñ¼Æ (<CODE>-n</CODE>)</LI>
<LI>³]©w±K½X¨ì´ÁªºÄµ§i¤Ñ¼Æ
(<CODE>-w</CODE>)</LI>
<LI>³]©w¦b±b¸¹¥¼³QÂê¦º±K½X¨ì´Á«áªºÄµ§i¤Ñ¼Æ (<CODE>-i</CODE>)</LI>
<LI>¤¹³\¬d¸ß±b¸¹¸ê°T (<CODE>-S</CODE>)</LI>
</UL>
<P>Á|¨Ò»¡©ú¡A¦pªG­nÂê¦º <CODE>fred</CODE> ±b¸¹¡G
<BLOCKQUOTE><CODE>
<PRE>
passwd -S fred
fred P 03/04/96 0 60 0 0
</PRE>
</CODE></BLOCKQUOTE>

³oªí¥Ü <CODE>fred</CODE> ªº±K½X¬O¦³®Äªº¡A¥¦¦b 03/04/96 ³Q­×§ï¥B¥ô¦ó®É¶¡³£¥i³Q­×§ï
¡A fred ±N¤£·|¦¬¨ìÄµ§i¥B±b¸¹±N¤£·|¦]±K½X¨ì´Á¦ÓÃö³¬¡C
<P>
<P>³oªí¥Ü¦pªG <CODE>fred</CODE> ¦b±K½X¨ì´Á«áÃ±¤J¡A¥¦±N³Q­n¨D¥Î¤@­Ó·s±K½XÃ±¤J¡C
<P>
<P>¦pªG§Ú­Ì¨M©w­nÄµ§i <CODE>fred</CODE> ¦b±K½X¹L´Á«e 14 ¤Ñ¡A¥BÅý¥¦ªº±b¸¹¦b¨ì´Á«á14¤ÑÄµ§i¡A
§Ú­Ì»Ý­n§@¤U¦C¨BÆJ¡G
<P>
<BLOCKQUOTE><CODE>
<PRE>
passwd -w14 -i14 fred
</PRE>
</CODE></BLOCKQUOTE>

²{¦b <CODE>fred</CODE> §ïÅÜ¬°¡G
<BLOCKQUOTE><CODE>
<PRE>
fred P 03/04/96 0 60 14 14
</PRE>
</CODE></BLOCKQUOTE>

»Ý­n§ó¦h <CODE>passwd</CODE> ¸ê°T½Ð°Ñ·Ó½u¤W¾Þ§@¤â¥U¡C
<P>
<H2><A NAME="ss7.3">7.3 login.defs ÀÉ</A>
</H2>

<P><CODE>/etc/login</CODE> ÀÉ¬O¹ï <CODE>login</CODE> µ{¦¡ªº configuration file ¥B ¹ï
<EM>Shadow Suite</EM>¡C
<P><CODE>/etc/login</CODE> ¥]§t±q¹w³]­È±K½X§ïÅÜªºÅX°Ê³]©w¡C
<P><CODE>/etc/login.defs</CODE> ÀÉ¬O¤@­Ó«Ü¦nªº¤å¥óÀÉ¡AµM¦Ó¤´¦³¨Ç¨Æ±¡­nª`·N¡G
<P>
<UL>
<LI>It contains flags that can be turned on or off that determine the
amount of logging that takes place.</LI>
<LI>It contains pointers to other configuration files.</LI>
<LI>It contains defaults assignments for things like password aging.</LI>
</UL>
<P>¸ò¥h¤W­z§A¥i¥Hµo²{³o¬O¤@­Ó­«­nÀÉ¡A¥B§AÀ³¸Ó½T»{¥Ø«e³]©w¤Î§A±N¹ï§A¨t²Îªº³]©w¤º®e¡C
<P>
<H2><A NAME="ss7.4">7.4 ¸s²Õ±K½X</A>
</H2>

<P><CODE>/etc/groups</CODE> ÀÉ¥]¬A¤¹³\¬O¥ÎªÌ¦s¨ú¸s²Õ¤§±K½X¡C ¦pªG§A©w¸q
<CODE>SHADOWGRP</CODE> ¦b <CODE>/usr/src/shadow-YYMMDD/config.h</CODE> ÀÉ±N¶}±Ò¸Ó¥\¯à¡C
<P>¦pªG§A©w¸q¸Ó±`¼Æ¥B½sÄ¶¥¦¡A§A»Ý«Ø¥ß¤@­Ó <CODE>/etc/gshadow</CODE> ÀÉ¨Ó«O¦s¸s²Õ±K½X
©M¸s²ÕºÞ²zªÌ¸ê°T¡C
<P>
<P>·í§A«Ø¥ß <CODE>/etc/shadow</CODE>¡C§A¨Ï¥Î¤@­Ó©I¥sµ{¦¡¥s°µ <CODE>pwconv</CODE>¡A
¸Óµ{¦¡¤£·|«Ø¥ß <CODE>/etc/gshadow</CODE> ÀÉ¡A¦ý¬O³o¨SÃö«Y¡A¥u­n§A¦Û¦æ«Ø¥ß§Y¥i¡C
<P>
<P>¬°¤F«Ø¥ß°_©l <CODE>/etc/gshadow</CODE> ÀÉ­n°õ¦æ¤U¦C¨BÆJ¡G
<BLOCKQUOTE><CODE>
<PRE>
touch /etc/gshadow
chown root.root /etc/gshadow
chmod 700 /etc/gshadow
</PRE>
</CODE></BLOCKQUOTE>
<P>¨C¦¸§A«Ø¥ß¤@­Ó·s¸s²Õ¡A¥¦­Ì·|³Q¥[¨ì <CODE>/etc/group</CODE> ©M <CODE>/etc/gshadow</CODE> ÀÉ¡C
¦pªG§A³z¹L·s¼W©Î²¾°£¨Ï¥ÎªÌ¨Ó­×§ï¸s²Õ©Î§ïÅÜ¸s²Õ±K½X¡A<CODE>/etc/gshadow</CODE> ÀÉ³£±N³Q§ïÅÜ¡C
<P>
<P><CODE>groups</CODE>, <CODE>groupadd</CODE>, <CODE>groupmod</CODE>, ©M 
<CODE>groupdel</CODE> µ{¦¡¬O¥Î¨Ó¨ÑÀ³  <EM>Shadow Suite</EM> ³¡¤À¥i¥HÅÜ§ó¸s²Õ¡C
<P><CODE>/etc/group</CODE> ÀÉ®æ¦¡¦p¤U¡G
<BLOCKQUOTE><CODE>
<PRE>
groupname:!:GID:member,member,...
</PRE>
</CODE></BLOCKQUOTE>

¨ä¤¤¡G
<DL>
<DT><B><CODE>groupname</CODE></B><DD><P>The name of the group
<DT><B><CODE>!</CODE></B><DD><P>The field that normally holds the password, but that
is now relocated to the <CODE>/etc/gshadow</CODE> file.
<DT><B><CODE>GID</CODE></B><DD><P>The numerical group ID number
<DT><B><CODE>member</CODE></B><DD><P>List of group members
</DL>
<P><CODE>/etc/gshadow</CODE> ÀÉ®æ¦¡¦p¤U¡G
<BLOCKQUOTE><CODE>
<PRE>
groupname:password:admin,admin,...:member,member,...
</PRE>
</CODE></BLOCKQUOTE>

¨ä¤¤¡G
<DL>
<DT><B><CODE>groupname</CODE></B><DD><P>The name of the group
<DT><B><CODE>password</CODE></B><DD><P>The encoded group password.
<DT><B><CODE>admin</CODE></B><DD><P>List of group administrators 
<DT><B><CODE>member</CODE></B><DD><P>List of group members
</DL>
<P><CODE>gpasswd</CODE> «ü¥O¬O¥Î¦b·s¼W©Î²¾°£ºÞ²zªÌ©M¸s²Õ¦¨­û¡C <CODE>root</CODE> ©Î¨ä¥L¦b
¸s²ÕºÞ²zªÌ¤H­û¥i·s¼W©Î²¾°£¸s²Õ¦¨­û¡C
<P>¸s²Õ±K½X¥i¥H³z¹L <CODE>passwd</CODE> «ü¥O§ïÅÜ¡A»Ý³z¹L 
<EM>root</EM> ©Î¦b¸Ó¸s²ÕºÞ²zªÌ¦³Åv­­ªº±b¸¹¤è¥i­×§ï¡C
<P>Despite the fact that there is not currently a manual page for
<CODE>gpasswd</CODE>, typing <CODE>gpasswd</CODE> without any parameters gives a
listing of options.  It's fairly easy to grasp how it all works once you
understand the file formats and the concepts.
<P>
<P>
<H2><A NAME="ss7.5">7.5 ÀË¬dµ{¦¡¤@­P©Ê</A>
</H2>

<P>
<P>
<H3>pwck</H3>

<P><CODE>pwck</CODE> µ{¦¡´£¨Ñ¦b <CODE>/etc/passwd</CODE> ©M <CODE>/etc/shadow</CODE> ÀÉªº¤@­P©ÊÀË¬d¡C
¥¦±NÀË¬d¨C­Ó¨Ï¥ÎªÌ¦WºÙ¥B¨Ì·Ó¤U¦C¨BÆJ½T»{¡G
<P>
<UL>
<LI>the correct number of fields</LI>
<LI>unique user name</LI>
<LI>valid user and group identifier</LI>
<LI>valid primary group</LI>
<LI>valid home directory</LI>
<LI>valid login shell</LI>
</UL>
<P>¥¦¤]·|Äµ§i¨S¦³±K½Xªº±b¸¹¡C
<P>¦b¦w¸Ë <EM>Shadow Suite</EM> «á°õ¦æ <CODE>pwck</CODE> ¬O¤@­Ó«Ü¦nªºÂI¤l¡C
¥¦¤]¥i¥H¨C¶g©Î¨C¤ë¶g´Á©Êªº°õ¦æ¡C ¦pªG§A¨Ï¥Î <CODE>-r</CODE> °Ñ¼Æ¡A§A¥i¥H¥Î <CODE>cron</CODE> 
¨Ó°õ¦æ¥B¦¬¨ì¹q¤l¶l¥ó³ø§i
<P>
<H3>grpck</H3>

<P><CODE>grpck</CODE> ÀË¬d <CODE>/etc/group</CODE> ©M <CODE>/etc/gshadow</CODE> ÀÉ¤@­P©Êªºµ{¦¡¡C
¥¦§@¤U¦CÀË¬d¡G
<UL>
<LI>the correct number of fields</LI>
<LI>unique group name</LI>
<LI>valid list of members and administrators</LI>
</UL>
<P>¥¦¤]¦³ <CODE>-r</CODE> °Ñ¼Æ¦Û°Ê²£¥Í³øªí¡C
<P>
<H2><A NAME="ss7.6">7.6 Dial-up ±K½X</A>
</H2>

<P>Dial-up ±K½X¬O¥t¤@­Ó¹ï¨t²Î¨¾¿mªº¿ï¶µ¦C¡A¸Ó¨t²Î¤¹³\¼·±µ¦s¨ú¡C 
¦pªG§A¦³¤@­Ó¨t²Î¤¹³\³\¦h¤H°Ï°ìºô¸ô³sµ²¡A¦ý¬O§A·Q­­¨î¼·±µªºÅv­­¡A¨º§A»Ý¨Ï¥Î dial-up
±K½X¡C ¬°¤F­n¶}±Ò dial-up ±K½X¡A§A¥²¶·½s¿è <CODE>/etc/login.defs</CODE> ÀÉ¥B½T©w±N 
<CODE>DIALUPS_CHECK_ENAB</CODE> ³]©w¬° <CODE>yes</CODE>.
<P>¦³¨â­ÓÀÉ®×¥]¬A dial-up ¸ê°T¡A <CODE>/etc/dialups</CODE> ¥]¬A ttys 
(one per line, with the leading "/dev/" removed)¡C
¦pªG tty ¦³³Q¦C¥X¡A dial-up ªí¥Ü¤w¸g³QÀË¬d¡C
<P>²Ä¤G­ÓÀÉ¬O <CODE>/etc/d_passwd</CODE> ¡C  ³o­ÓÀÉ¥]¬A shell ¥þ³¡¦Xªk¸ô®|¦WºÙ¡C
<P>¦pªG¥H­Ó¨Ï¥ÎªÌÃ±¤J¤@±ø¦C¦b <CODE>/etc/dialups</CODE> ªº½u(line)¡A¥B¥Lªº shell ³Q¦C¦b
<CODE>/etc/d_passwd</CODE> ÀÉ¡A¥L±N³Q¤¹³\¦s¨ú³z¹L´£¨Ñ¥¿½Tªº±K½X¡C
<P>¥t¤@­Ó¨Ï¥Î dial-up ±K½Xªº¥Øªº¬O³]©w«ü¤¹³\¬Y¨Ç§Î¦¡³sµ²ªº½u(¥i¯à¬OPPP ©Î UUCP ³sµ²)¡C
¦pªG¤@­Ó¨Ï¥ÎªÌ¸ÕµÛ±o¨ì¥t¤@ºØ§Î¦¡³sµ² (i.e. a list of shells)¡A¥L¥²¶·ª¾¹D¨Ï¥Î³o±ø½uªº±K½X¡C
<P>¦b§A¥i¥H¦b¥¼¨Ó¨Ï¥Î dial-up «e¡A§A±K»Ý«Ø¥ß¤@¨ÇÀÉ®×¡C
<P><CODE>dpasswd</CODE> «ü¥O´£¨Ñ¹ï¦b <CODE>/etc/d_passwd</CODE> ÀÉªº shells «ü¬£±K½X¡C
¥i¥H¬Ý¾Þ§@¤â¥Uªº¨ì§ó¦h¸ê°T¡C
<P>
<P>
<P>
<HR>
<A HREF="Shadow-Password-HOWTO-8.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="Shadow-Password-HOWTO-6.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="Shadow-Password-HOWTO.html#toc7"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
