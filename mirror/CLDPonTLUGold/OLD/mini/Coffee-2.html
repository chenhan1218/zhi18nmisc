<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>COFFEE-HOWTO --如何用 Linux 來煮咖啡: 電路</TITLE>
 <LINK HREF="Coffee-3.html" REL=next>
 <LINK HREF="Coffee-1.html" REL=previous>
 <LINK HREF="Coffee.html#toc2" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="Coffee-3.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Coffee-1.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Coffee.html#toc2"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s2">2. 電路</A></H2>

<P>總的圖解如下:
<P>
<BLOCKQUOTE><CODE>
<PRE>
--------- 0-5V  --------- ~220V   ----------------
|  PC   |===>===|電子回路|========|     咖啡機   |
---------       ---------         ----------------
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>我們的想法是從電腦輸出一個控制電壓，然后通過繼電器或者雙向晶閘管電路驅動被電隔離的電子回路。
<P>
<P>你必須選擇一個繼電器電路，如果你有一個大的咖啡機（功率大于200 W ），你還可以用一個雙向晶閘管電路。
<P>所有列出的電路都至少被測試過一次，不過使用者自己承擔所有的后果。
如果你對電子學一點沒經驗，你不應嘗試這些，要不然，你會有一個糟糕的結局...
<P>
<P>對 220V 電壓的操作應該非常小心，而且還應用上一根合適的保險絲。
<P>
<H2><A NAME="ss2.1">2.1 從電腦提取0-5V電源</A>
</H2>

<P>下面是一個從電腦并口提取0-5V電源的例子：
<P>
<BLOCKQUOTE><CODE>
<PRE>
      公 DB-25           -----    針腳 10 - ACK（應答）
      連 接 器           |   |    針腳  9 - D7
      后 視 圖           |   |                           針腳 2 - D0
                         v   v                           v   針腳 1 -濾波

       ____________________________________________________________
      /                                                            \
      \     13  12  11  10   9   8   7   6   5   4   3   2   1     /
       \                                                          /
        \     25  24  23  22  21  20  19  18  17  16  15  14     /
         \______________________________________________________/
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>針腳 1 濾波 (反邏輯)
<P>針腳 2-9 是數據總線的信號，通過一個 OUTB 命令發信給并口的門閂線路。
<P>針腳 10 是應答信號( ACK )，由你控制，所以你可以產生一個中斷信號給 CPU 。
<P>針腳 18-25 被短路了，都是地線 ( GND ) 。
<P>
<P>詳細地說明如下:
<BLOCKQUOTE><CODE>
<PRE>
&lt;=發送   DB25    Cent   信號          寄存
=>接收  pin     pin     定義          器位      功能注釋
------  ----    ----    --------        ---     -----------------------------
=>       1       1      -濾波           C0-     設置低位脈沖 > 0.5us 發送
=>       2       2      數據線0         D0      設置最小有效數據
=>       3       3      數據線1         D1      ...
=>       4       4      數據線2         D2      ...
=>       5       5      數據線3         D3      ...
=>       6       6      數據線4         D4      ...
=>       7       7      數據線5         D5      ...
=>       8       8      數據線6         D6      ...
=>       9       9      數據線7         D7      設置最大有效數據
&lt;=      10      10      -應答           S6+ IRQ 接受應答后，低位脈沖 5us
&lt;=      11      11      +忙             S7-     忙/出錯/斷線時高位
&lt;=      12      12      +無紙           S5+     無紙時高位
&lt;=      13      13      +已選擇         S4+     已選擇打印機時高位
=>      14      14      -自動注入       C1-     低位時自動注入一行
&lt;=      15      32      -錯誤           S3+     錯誤/斷線/無紙時低位
=>      16      31      -初始化         C2+     設置低位脈沖 > 50us 初始化
=>      17      36      -選擇           C3-     設置低位選擇打印機
==      18-25   19-30,  地線
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss2.2">2.2 用繼電器電路控制</A>
</H2>

<P>最簡單的電路如下:
<BLOCKQUOTE><CODE>
<PRE>

                             Vcc
                              |
                              +------+
                              |    __|__
                           繼電器   /^\  二極管 1N4002
                             線圈  /---\
                              |      |
                              +------+
                              |
                           | / 
                 4.7K    B |/  C
    并口數據腳>-\/\/\/\/---|        NPN 三極管: BC547A or 2N2222A
                           |\  E
                           | V
                             |
    并口地線  >--------------+
                             |
                           接地
</PRE>
</CODE></BLOCKQUOTE>

Vcc 的選擇應同所選繼電器型號的電壓一樣( 通常是 5V 或者是 12V )。很明顯，繼電器的規格應該由咖啡機的功率決定。
<P>酒保們通常傾向于在三極管之后再放置繼電器，然后用發射極( E 腳 ) 代替集電極( C 腳 ) 連接繼電器，這是一個錯誤的經歷，因為三極管被錯誤的偏置了，結果是得到了一杯糟糕的咖啡　:-)。二極管　1N4002　對保護三極管避免被從繼電器流出的電流燒壞很有幫助，如果你不用它，三極管很可能會變黑，發臭，且被燒壞。
<P>
<H2><A NAME="ss2.3">2.3 用雙向晶閘管電路控制 #1</A>
</H2>

<P>如果你只想要一個簡單的電路，你可以選用摩托羅拉的 MOC301[012] 雙向晶閘管驅動器，它跟通常用的 SC141D 雙向晶閘管一起搭配使用。這種電路有個優點就是它不需要額外的電源供給。
<P>以下是為非感應負荷設計的電路:
<BLOCKQUOTE><CODE>
<PRE>

        270     1 +-------+ 6    180
  +5v -VAVAVA-----+       +----VAVAVA-----+-------------- Line Hot
                2 |  MOC  |               |
  TTL in ---------+ 3012  +nc            VA  SC141D
                  |       | 4           / |
                nc+       +------------/  |
                  +-------+               +----\/\/\/---- Line Neutral
                                                LOAD
</PRE>
</CODE></BLOCKQUOTE>
<P>如果你正在使用 220V 電壓，MOC3021 可能更好。
感性負載應該和旁路電容相連，查閱 <EM>摩托羅拉應用手冊 AN-780</EM>.
咖啡機一般是非感性負載（就象馬達一樣），但誰知道你的會是什么樣的.....
<P>
<H2><A NAME="ss2.4">2.4 用雙向晶閘管電路控制 #2</A>
</H2>

<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
+5VDC
|    180                      180            2.2k
+---/\/\/\----+-----+   +----/\/\/-+--/\/\/\---+-------> 120V
              |    1|   |6         |           |         Hot
              |    +=====+         |           | MT1
              |    | MC  | 雙向晶閘|          +-+
              |    | 3032| 管驅動器|        G | | 雙向晶閘管
              |    +=====+         |         /| |
              \    2|   |4         |        / +-+
       2N3904  |----+   |          |        |  | MT2
              /     |   +--------- | -------+  |
             V      \              |        |  |
             |      /              |        \  |
             |      \ 43    .01u  ---   10k /  |
             |      /       500V  ---       \  |
             |      |              |        /  |
             +------+              |        |  |            Neutral
             |                     +--------+--+---o    o--> 120V
             /                                      load
 >-/\/\--|  2N3904
             \
              V
              |
             ---
            ///
你應該以 220V 的標准調整電阻值。
</PRE>
</CODE></BLOCKQUOTE>
<P>電路詳解:
<P>MC3032 是光隔離雙向晶閘管驅動器。
180 歐姆的電阻設定了光隔離器里面的發光二極管的電流。如果需要，你可以調整這個電阻從而得到一個合理的電流。（比如 15 mA）。
<P>注意你不能在沒有負載的情況下測試電路。除非連上了交流電源，雙向晶閘管不會切換，所以你也不能在有交流電源和負載的情況下測試它的簡單切換，注意這個 .01u 的電容要達到 500V 的耐壓。
<P>
<HR>
<A HREF="Coffee-3.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Coffee-1.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Coffee.html#toc2"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
