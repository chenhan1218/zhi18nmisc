<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>從源代碼打造一個最小化的Linux系統實作篇: Glibc庫</TITLE>
 <LINK HREF="BuildMin-7.html" REL=next>
 <LINK HREF="BuildMin-5.html" REL=previous>
 <LINK HREF="BuildMin.html#toc6" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 2, 6);</SCRIPT>
<A HREF="BuildMin-7.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-5.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc6"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s6">6. Glibc庫</A></H2>

<P>下一步我們要安裝<CODE>init</CODE>，但是同運行在Linux上几乎全部的程序一樣，
<CODE>init</CODE>使用了GNU C語言庫glibc所提供庫函數，因此我們先得把這個東東
安裝上．
<P>
<P>Glibc庫是一個很大而且很復雜的軟件包．在我那個舊型的帶8兆內存的386sx/16機器
上，得花掉我90個小時來完成編譯工作．但是在我那帶有64兆內存的賽楊(Celeron)
433上只花掉了33分鐘．如果您只有8兆內存(或者少得讓人打顫的容量)的話，那就
做好苦熬的准備吧．
<P>
<P>glibc的安裝文檔建議在不同的獨立分離目錄里面編譯．這樣做就能夠讓您很輕松
地再次編譯，因為您可以該目錄下面接著編譯．您可能也會想這么做，因為可以為
您節省大約265兆的磁盤空間哦!
<P>
<P>跟平常一樣，把<CODE>glibc-2.1.3.tar.gz</CODE>(或者其它版本)這個tar包解壓到
<CODE>/mnt/target/usr/src</CODE>這個目錄下面．接下來，我們得把附加庫也解壓
到glibc庫目錄下面．所以先<CODE>cd glibc-2.1.3</CODE>，然后接著在這個目錄下面
把<CODE>glibc-crypt-2.1.3.tar.gz</CODE>和<CODE>glibc-linuxthreads-2.1.3.tar.gz</CODE>
這兩個tar包解開．
<P>
<P>現在我們就可以生成編譯目錄，設置選項，執行make編譯和安裝glibc庫了．這些
都是我所使用過的命令，但是最好您自己閱讀一下文檔，確認最適合您的狀況的
做法．然而在您開始前，您可能需要執行<CODE>df</CODE>命令來查看一下還有多少
剩余空間．您還可以在編譯并安裝完畢glibc庫之后再執行一次看看這玩意兒到底
得占多大地兒．
<P>
<P>
<PRE>
        cd ..
        mkdir glibc-build
        ../glibc-2.1.3/configure --enable-add-ons --prefix=/usr
        make
        make install_root=/mnt/target install
</PRE>
<P>
<P>注意了，我們還有別的方法來告知一個軟件包該裝到什么地方．
<P>
<HR>
<A HREF="BuildMin-7.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="BuildMin-5.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="BuildMin.html#toc6"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
