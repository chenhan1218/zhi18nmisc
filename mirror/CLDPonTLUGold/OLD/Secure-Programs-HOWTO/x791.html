<HTML
><HEAD
><TITLE
>Perl</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="Linux和Unix安全編程HOWTO"
HREF="book1.html"><LINK
REL="UP"
TITLE="特定語言的問題"
HREF="c760.html"><LINK
REL="PREVIOUS"
TITLE="特定語言的問題"
HREF="c760.html"><LINK
REL="NEXT"
TITLE="Python"
HREF="x801.html"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux和Unix安全編程HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c760.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 9. 特定語言的問題</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x801.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN791"
>Perl</A
></H1
><P
>Perl程序員應該首先閱讀perlsec(1)的man幫助頁，那里描述了許多用Perl編寫安全程序涉及的問題。特別是perlsec(1)描述了“污染”模式，大多數安全Perl程序應該使用該模式。如果真實的用戶或群組ID與有效用戶或群組ID不同，或者使用了命令行標識-T （在以其他人身份運行程序如CGI腳本時使用后一種方式），則自動啟用污染模式。污染模式會打開各種檢查，如檢查路徑目錄以確定它們對其他人是不可寫的。</P
><P
>盡管如此，污染模式最明顯的效果是不可以使用來自程序以外的數據來偶然影響程序之外的事情。在污染模式下，所有外部獲得的輸入，包括命令行參數、環境變量、本地信息（參見perllocale(1)）、特定系統調用（readdir、readlink、getpw*調用的gecos域）的結果和所有文件輸入，都被標記為“被污染”。被污染的數據不可以直接或間接地被應用在執行子shell的命令里，或者被用在修改文件、目錄或進程的命令里。一個重要的例外：如果向system或exec傳遞一個參數列表，該列表中的成員不會被檢查是否被污染，所以在污染模式下使用system或exec要特別小心。</P
><P
>來自被污染數據的任何數據值也是被污染的。這里有一個例外﹔從被污染的數據中提取一個子字符串可以使數據不被污染。但也不要盲目地采用“.*”作為子字符串，因為這樣會失去污染機制的保護。作為替代，應該識別出程序允許的“安全”模板，并用它們來提取“好的”值。在提取出值之后，可能還需要對它進行檢查（特別是它的長度）。</P
><P
>open、glob和backtick函數調用shell來擴展文件名里的通配符﹔這可被用來打開安全漏洞。應該盡量完全避免這些函數，或者在perlsec(1)里描述的低權限的“沙箱”里使用它們。</P
><P
>坦白地說，Perl的open()函數對于大多數安全程序而言“有太多的魔法”﹔如果沒有小心地過濾，它在解釋文本時會制造很多安全問題。在編寫打開或鎖定某個文件的代碼之前，請參考perlopentut(1)的man幫助頁。在大多數情況下，sysopen()提供了打開文件的一個更安全（雖然更為錯綜復雜）的方法。
<A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-03/msg02596.html"
TARGET="_top"
>新的Perl 5.6增加了有三個參數的open()調用，去掉了有魔力的行為，從而不需要錯綜復雜的sysopen()</A
>。</P
><P
>Perl程序應該打開告警標志（-w），來警告有潛在危險的或過時的語句。</P
><P
>也可以在受限制的環境下運行Perl程序。更多的信息可參見標准Perl發行版中的“安全”模塊。我不能確定對它進行的審計情況，所以用戶需要注意。也可以調查一下“安全的分布式Internet腳本編寫的企鵝模型”，雖然在寫作本文時其代碼和文檔還無法得到。</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c760.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x801.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>特定語言的問題</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c760.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Python</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>