<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>Glibc 2 HOWTO 中文版: 編譯 C++ 程式</TITLE>
 <LINK HREF="Glibc2-HOWTO-8.html" REL=next>
 <LINK HREF="Glibc2-HOWTO-6.html" REL=previous>
 <LINK HREF="Glibc2-HOWTO.html#toc7" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="Glibc2-HOWTO-8.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="Glibc2-HOWTO-6.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="Glibc2-HOWTO.html#toc7"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s7">7. 編譯 C++ 程式</A></H2>

<P>
<P>因為 libg++ 使用了部份的數學函式庫，也就是說會連結到 libm。
由於你目前的 libg++ 是用舊版的函式庫所建立的，
所以你必須重新用 glibc 來 compile libg++ 或是取得一份預先編譯好的版本。
最新版的 libg++ source 與用 glibc 所連結的預先編譯版可以在
<A HREF="ftp://ftp.yggdrasil.com/private/hjl/">ftp://ftp.yggdrasil.com/private/hjl/</A>
找到。
<P>
<H2><A NAME="ss7.1">7.1 用測試的 C 函式庫安裝 libg++</A>
</H2>

<P>
<P>假如你已經將 glibc 安裝成測試用的函式庫，那你必須安裝到 glibc 所安裝的目錄下
(例如由前一節所示的 <CODE>/usr/i486-linuxglibc2</CODE>)。
假如你要安裝預先編譯好的版本
(這也是我建議的安裝方式，因為我一直都不能用這種方式成功地編譯 libg++)，
你必須將檔案解到暫存的目錄下，
將 <CODE>usr/lib/</CODE> 下的所有檔案搬到
<CODE>&lt;install directory&gt;/lib/</CODE>，
並將 <CODE>usr/include/</CODE> 下的所有檔案搬到
<CODE>&lt;install directory&gt;/include/</CODE> 下，
(記得先刪除 <CODE>include/g++</CODE> 這個連結！)
再將 <CODE>usr/bin/</CODE> 下的檔案搬到 
<CODE>&lt;install directory&gt;/bin/</CODE>。
<P>
<H2><A NAME="ss7.2">7.2 在主要 glibc 下安裝 libg++</A>
</H2>

<P>若你已經將 glibc 安裝成主要的函式庫，假如還想要用舊的 libc 來編譯 g++ 的程式，
那你必須先將舊的 libg++ 檔案移至舊的 libc 的目錄下。
也許最簡單的方式就是如前一節用 libc 5 來安裝一份新版的拷貝，
然後再正常安裝 glibc 版。
<P>
<H2><A NAME="ss7.3">7.3 使用非主要的 C 函式庫來編譯 C++ 程式</A>
</H2>

<P>假如你想用非主要的 C 函式庫來編譯 C++ 程式，
那你必須要加入 g++ 的 include 目錄。
在上面的例子中，
對測試用的 glibc 是 <CODE>/usr/i486-linuxglibc2/include/g++</CODE>，
而對主要 glibc 則是 <CODE>/usr/i486-linuxlibc5/include/g++</CODE>，
這通常都可以由添加至 <CODE>$CXXFLAGS</CODE> 這個變數來完成：
<BLOCKQUOTE><CODE>
<PRE>
 CXXFLAGS = -nostdinc -I/usr/i486-linuxglibc2/include -I/usr/lib/gcc-lib/i486-linuxglibc2/2.7.2.2/include -I/usr/i486-linuxlibc5/include/g++ -b i486-linuxglibc2
 
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<HR>
<A HREF="Glibc2-HOWTO-8.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="Glibc2-HOWTO-6.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="Glibc2-HOWTO.html#toc7"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
