<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux Quake HOWTO: Quake II</TITLE>
 <LINK HREF="Quake-HOWTO-4.html" REL=next>
 <LINK HREF="Quake-HOWTO-2.html" REL=previous>
 <LINK HREF="Quake-HOWTO.html#toc3" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="Quake-HOWTO-4.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Quake-HOWTO-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Quake-HOWTO.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s3">3. Quake II</A></H2>

<P>To install Quake II on your Linux system, you'll need some flavor of the
official Quake II distribution from id.  This will be either the retail
Windows CD-ROM that you bought at your favorite software store, or the
demo version you downloaded from the net.  See 
<A HREF="#quake2-shareware">Download the Necessary Files</A> for details on acquiring the demo
version.  Alternatively,
if you've already got Quake installed on a Windows machine, you can use
the relevant files from that installation.
<P>
<H2><A NAME="ss3.1">3.1 Prerequisites</A>
</H2>

<P>You will need, as a bare minimum, the following:
<P>
<UL>
<LI>A Pentium 90 or better (133 recommended) computer</LI>
<LI>16 MB RAM (24 recommended)</LI>
<LI>The Quake 2 CD-ROM <B>or</B> the demo version (q2-314-demo-x86.exe)</LI>
<LI>Linux kernel version 2.0.24 or later</LI>
<LI>libc 5.2.18 or later </LI>
<LI>One of the following:
<UL>
<LI>X11 server that supports the MITSM shared memory extension. 8 and
16 bit displays are supported.   (for X renderer)</LI>
<LI>SVGAlib 1.2.10 or later (for SVGA and GL renderer)</LI>
</UL>
</LI>
<LI>25-400 megabytes free disk space (depending on how you install)</LI>
<LI>Access to the root account of the machine you're installing on</LI>
</UL>
<P>
<P>Optional:
<UL>
<LI>A supported soundcard</LI>
<LI>A 3Dfx Voodoo Graphics or Voodoo2 or Voodoo Rush 3D graphics
accelerator card.</LI>
<LI>3Dfx glide libraries installed (for GL renderer)</LI>
<LI>Mesa 2.6 or later (for GL renderer)</LI>
</UL>
<P>
<H2><A NAME="ss3.2">3.2 Installing Quake II</A>
</H2>

<P>
<P>
<H3><A NAME="quake2-files"></A> Download the Necessary Files**</H3>

<P>All the necessary files for Linux Quake II are available at id Software's
ftp site, 
<A HREF="ftp://ftp.idsoftware.com">ftp.idsoftware.com</A>.  This site can be quite busy at times,so you
may want to use one of these mirror sites instead:
<UL>
<LI>
<A HREF="ftp://ftp.cdrom.com/pub/idgames/idstuff">ftp.cdrom.com/pub/idgames/idstuff</A> (California, USA)</LI>
<LI>
<A HREF="ftp://ftp.gamesnet.net/idsoftware">ftp.gamesnet.net/idsoftware</A> (California, USA)</LI>
<LI>
<A HREF="ftp://ftp.stomped.com/pub/mirror/idstuff">ftp.stomped.com/pub/mirror/idstuff</A> (Minnesota, USA)</LI>
<LI>
<A HREF="ftp://mirrors.telepac.pt/pub/idgames">mirrors.telepac.pt/pub/idgames</A> (Lisbon, Portugal)</LI>
<LI>
<A HREF="ftp://download.netvision.net.il/pub/mirrors/idsoftware">download.netvision.net.il/pub/mirrors/idsoftware</A> (Haifa, Israel)</LI>
</UL>
<P>The Quake II files mentioned in in this section are:
<UL>
<LI>Quake II Linux Binaries
<UL>
<LI>libc5 tar.gz package 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-i386-unknown-linux2.0.tar.gz">ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-i386-unknown-linux2.0.tar.gz</A></LI>
<LI>glibc tar.gz package 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-glibc-i386-unknown-linux2.0.tar.gz">ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-glibc-i386-unknown-linux2.0.tar.gz</A></LI>
<LI>libc5 rpm package 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-2.i386.rpm">ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-2.i386.rpm</A></LI>
<LI>glibc rpm package 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-glibc-2.i386.rpm">ftp.idsoftware.com/idstuff/quake2/unix/quake2-3.19a-glibc-2.i386.rpm</A></LI>
</UL>
</LI>
<LI>Quake II Demo Version for Windows
<A NAME="quake2-shareware"></A> 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/q2-314-demo-x86.exe">ftp://ftp.idsoftware.com/idstuff/quake2/q2-314-demo-x86.exe</A></LI>
<LI>Quake II Game Source 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/source/q2source-3.14.shar.Z">ftp://ftp.idsoftware.com/idstuff/quake2/source/q2source-3.14.shar.Z</A></LI>
<LI>Quake II Capture the Flag 
<A HREF="ftp://ftp.idsoftware.com/idstuff/quake2/ctf/102.zip">ftp://ftp.idsoftware.com/idstuff/quake2/ctf/102.zip</A></LI>
</UL>
<P>Other software mentioned:
<UL>
<LI>SVGAlib graphics library 
<A HREF="http://sunsite.unc.edu/pub/Linux/libs/graphics/svgalib-1.3.0.tar.gz">http://sunsite.unc.edu/pub/Linux/libs/graphics/svgalib-1.3.0.tar.gz</A></LI>
<LI>SVGAlib libc5 binary
<A HREF="http://sunsite.unc.edu/pub/Linux/libs/graphics/svgalib-1.3.0.libc5.bin.tar.gz">http://sunsite.unc.edu/pub/Linux/libs/graphics/svgalib-1.3.0.libc5.bin.tar.gz</A></LI>
<LI>Glide runtime libraries 
<A HREF="http://glide.xxedgexx.com/3DfxRPMS.html">http://glide.xxedgexx.com/3DfxRPMS.html</A></LI>
<LI>Mesa 3D graphics library 
<A HREF="http://www.ssec.wisc.edu/~brianp/Mesa.html">http://www.ssec.wisc.edu/~brianp/Mesa.html</A></LI>
<LI>unzip archive utility 
<A HREF="http://sunsite.unc.edu/pub/Linux/utils/compress/unzip-5.31.tar.gz">http://sunsite.unc.edu/pub/Linux/utils/compress/unzip-5.31.tar.gz</A></LI>
</UL>
<P>
<H3>Create the Installation Directory</H3>

<P>The first thing you'll need to do is decide where you  want to install
Quake II.  Lots of folks like to put it in <CODE>/usr/games/quake</CODE>.  Anal
system administrator that I am, I choose to install anything that's not
part of my Linux distribution under <CODE>/usr/local</CODE>.  So
for me, Quake II goes in <CODE>/usr/local/games/quake2</CODE>.  If you choose
to install somewhere else, please substitute the appropriate path wherever
<CODE>/usr/local/games/quake2</CODE> is mentioned.
<P>So go ahead and create the directory you'll install Quake II in, and cd
to it.  The rest of these instructions will assume that this is your
current directory.
<P>
<BLOCKQUOTE><CODE>
<PRE>
     mkdir /usr/local/games/quake2
     cd /usr/local/games/quake2
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3>Installing from CD</H3>

<P>Place your Quake II CD in your CD ROM drive, and mount it:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     mount -t iso9660 /dev/cdrom /mnt/cdrom
     
</PRE>
</CODE></BLOCKQUOTE>
<P>If your CDROM is typically mounted elsewhere, substitute its location
for <CODE>/mnt/cdrom</CODE>.  If you're not sure where your CDROM is
mounted, please see the documentation for your particular
distribution.
<P>
<UL>
<LI><B>Full Install</B>
The simplest install method is a "full" install, which involves
copying the entire contents of your CD to your hard drive.  This
requires about 350 MB, and is accomplished by issuing the following
commands:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     cp -r /mnt/cdrom/Install/Data/* .
     
</PRE>
</CODE></BLOCKQUOTE>

 
There'll be a bunch of unnecessary Windows files hanging around that you
can safely delete:

<BLOCKQUOTE><CODE>
<PRE>
     rm -f /usr/local/quake2/*.dll
     rm -f /usr/local/quake2/quake2.exe
     rm -f /usr/local/quake2/baseq2/gamex386.dll
     
</PRE>
</CODE></BLOCKQUOTE>

     </LI>
<LI><B>Medium Install</B>
If 450 MB is too much space for you to devote to Quake II, you can skip
installing the movie cutscenes and link to them on the CD-ROM instead.
This will reduce the space requirements to about 200 MB:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     mkdir baseq2
     cp /mnt/cdrom/Install/Data/baseq2/pak0.pak baseq2
     cp -r /mnt/cdrom/Install/Data/baseq2/players baseq2
     ln -s /mnt/cdrom/Install/Data/baseq2/video baseq2/video
     
</PRE>
</CODE></BLOCKQUOTE>


Note that this doesn't mean you have to mount your Quake II CD
every time to want to play Quake II.  If the game can't load the
videos, it just won't display them.
     </LI>
</UL>
<P>
<H3>Windows to Linux install</H3>

<P>If you have Quake II installed under Windows on a different machine, you
can transfer the files in <CODE>quake2\baseq2\</CODE> to your Linux system
via FTP or some other mechanism.  Keep in mind that the filenames on your
Linux system must be in lower case for Quake II to find them, so you may
have to rename them after the transfer.  Also note that it may be
necessary to delete your Windows installation after you do this to remain
in compliance with the terms of id's software license.  It's not my fault
if you do something illegal.
<P>If your Windows and Linux systems are on the same machine, you have two
options: copy the files from your Windows partition to your Linux
partition, or link to the necessary files from Linux.  Both options will
work equally well.  You'll just save a lot of disk space when you link
instead of copy.
As usual, replace <CODE>/win95/games/quake2</CODE> in the following examples
with the correct path to your Windows partition and Quake II installation.
<P>
<UL>
<LI>If you want to copy the files from your Windows partition, do
something like this:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     cp -r /win95/games/quake2/baseq2 .
     
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI>To create links to your Windows Quake II files instead, do this:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ln -s /win95/games/quake2/baseq2 .
     
</PRE>
</CODE></BLOCKQUOTE>

     
This second method requires that the Windows partition you're
linking to be writeable by users, which may not be
appropriate for all systems.  By making your Windows partition
writeable, you are giving all users the opportunity to destroy
your entire Windows installation.  If that's ok with you,
modify your <CODE>/etc/fstab</CODE> to mount the Windows
partition with the options <EM>umask=002,gid=XXX</EM>, where XXX
is the group id number of the "users" group.  Look in
<CODE>/etc/group</CODE> for this information.  When <CODE>fstab</CODE> is
updated, umount and re-mount the Windows partition and you're
done.</LI>
</UL>
<P>You're done installing the Quake II data files.  Move ahead to "
<A HREF="#quake2-linux-binaries">Installing the Linux Binaries</A>".
<P>
<P>
<H3>Installing the demo version **</H3>

<P>id Software has a freely available demo version of Quake II at their
ftp site.  It's a 40 megabyte download.  The demo includes all
features of the full version, including multiplayer, but it only
comes with three levels, so it may be difficult to find a server
to play on.
<P>See the section 
<A HREF="#quake2-files">Download the      Necessary Files</A> above for the location of the Quake II demo.
Download it and place it in your Quake II directory.
<P>The demo distribution is a self-extracting zip file (it's self-extracting
in other OS's anyway).  You can extract it with the <B>unzip(1)</B>
command, which should be included in most modern distributions.  If you
don't have unzip, you can download it from the location listed in
the 
<A HREF="#quake2-files">Download the Necessary Files</A>
section.
<P>cd to your Quake II directory and extract the archive:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     unzip q2-314-demo-x86.exe
     
</PRE>
</CODE></BLOCKQUOTE>
<P>Now we've got to delete some things and move some other things around:
<BLOCKQUOTE><CODE>
<PRE>
     rm -rf Splash Setup.exe
     mv Install/Data/baseq2 .
     mv Install/Data/DOCS docs
     rm -rf Install
     rm -f baseq2/gamex86.dll
     
</PRE>
</CODE></BLOCKQUOTE>
<P>The Quake II demo is now installed.  You just need to add the Linux
binaries.
<P>
<H2><A NAME="quake2-linux-binaries"></A> <A NAME="ss3.3">3.3 Adding the Linux Binaries </A>
**</H2>

<P>There are four Linux Quake II packages available for download:
<UL>
<LI>a libc5 tar.gz package</LI>
<LI>a glibc tar.gz package</LI>
<LI>a libc5 rpm package</LI>
<LI>a glibc rpm package</LI>
</UL>
<P>Install just one of these packages.  Each contains the same
files, they're just linked against different libraries.  Redhat
5.x users should choose the the glibc rpm package.  Users of
glibc based systems without rpm support should use the glibc tar
package.  The libc5 rpm is for Redhat distributions prior to 5.0
and other distributions that use the rpm package format.  The
libc5 tar.gz package is for Slackware and everyone else.
<P>See the 
<A HREF="#quake2-files">Download the Necessary Files</A> section
for the location of the Linux Quake II files.
<P>
<H3>Installing the RPM packages **</H3>

<P>Installation of the rpm packages should be as simple as:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     su root
     rpm -Uvh quake2-xxxxx.i386.rpm
     
</PRE>
</CODE></BLOCKQUOTE>
<P>Rpm may complain that it can't find <CODE>libglide2x.so</CODE>.  The
Glide library is only necessary if you have a 3Dfx card and want
to run Quake II in GL mode.  If you don't plan to use the GL
mode, you can override the glide dependency with the
<CODE>--nodeps</CODE> option:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     su root
     rpm -Uvh quake2-xxxxx.i386.rpm --nodeps
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3>Installing the tar.gz packages **</H3>

<P>To install, just untar the file in your Quake II directory.  Do
it as root so the proper file permissions get set:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake
     su root
     tar -xzf qwcl2.21-i386-unknown-linux2.0.tar.gz
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss3.4">3.4 Setting Permissions **</A>
</H2>

<P>If you ran <CODE>rpm</CODE> or <CODE>tar</CODE> as root when installing
the Quake II package on your system, the file permissions should
be properly set already.  The <CODE>quake2</CODE> executable was
installed setuid root so that it can access the graphics devices
on your system.  For security, the <CODE>ref_*.so</CODE> rendering
libraries are owned by root and writeable only by him.  If root
doesn't own the libraries, or they're world writeable,
<CODE>quake2</CODE> will refuse to run.
<P>If you plan to only run Quake II with the GL or X renderers, your
<CODE>quake2</CODE> doesn't need to be setuid root.  See 
<A HREF="Quake-HOWTO-6.html#no-setuid">Running X and GL games without setuid</A> in
the Tips and Tricks section below for information on running Quake
II without root permissions.
<P>
<H3>Quake2.conf **</H3>

<P>
<P>For security reasons, there is a <CODE>quake2.conf</CODE> file, which
tells Quake II where to find the rendering libraries it needs
(<CODE>ref_*.so</CODE>).  It contains only one line, which should be
the path to your Quake II installation.  Quake II looks for this
file in <CODE>/etc</CODE>.  If you installed Quake II from an
<CODE>.rpm</CODE> file, this file was installed for you.  If you
installed from a <CODE>.tar</CODE> package, you need to create it
like so:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     su root
     cd /usr/local/games/quake2
     pwd > /etc/quake2.conf
     chmod 644 /etc/quake2.conf
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss3.5">3.5 The X Renderer</A>
</H2>

<P>Quake II should be ready to run under X now.  Give it a try:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ./quake2 +set vid_ref softx
     
</PRE>
</CODE></BLOCKQUOTE>
<P>If all is well, after a pretty significant pause, a small Quake II window
will appear with the first demo running in it.  You should hear sound
effects and possibly music, if the CD is mounted.  If any of this fails
to occur, please see section 
<A HREF="Quake-HOWTO-5.html#troubleshooting">Troubleshooting</A> for help.
<P>
<H2><A NAME="quake2-svgalib"></A> <A NAME="ss3.6">3.6 The SVGAlib Renderer </A>
</H2>

<P>You need SVGAlib installed and configured if you're going to use either
the ref_soft or ref_gl renderers.  (Quake II uses SVGAlib to process
keyboard and mouse input, in case you're wondering why you'd need it for 
the GL renderer).   SVGAlib comes with most modern distributions, and
<B>must</B> be properly configured before Quake II will run correctly 
outside of X.
<P><CODE>libvga.config</CODE> is SVGAlib's configuration file.  On
most systems you'll find it in either <CODE>/etc</CODE> or <CODE>/etc/vga</CODE>.
Make sure the mouse, monitor, and video card settings in this file are
correct for your system.  See the SVGAlib documentation for more details.
<P>If you don't already have SVGAlib on your system, download it from
the location mentioned in 
<A HREF="Quake-HOWTO-2.html#quake-files">the files      section</A> above.  If you have a RedHat 5.x or other glibc-based
Linux distribution, see 
<A HREF="Quake-HOWTO-5.html#glibc">Glibc, RedHat 5.x,      Debian 2 considerations</A> in the Troubleshooting/FAQs section for
important information about compiling libraries for Quake II.
A precompiled libc5 SVGAlib binary is available
at 
<A HREF="http://sunsite.unc.edu/pub/Linux/libs/graphics/svgalib-1.3.0.libc5.bin.tar.gz">http://sunsite.unc.edu/pub/Linux/libs/graphics/svgalib-1.3.0.libc5.bin.tar.gz</A>
for those who don't want to deal with the hassle of compiling for libc5.
<P>You should run Quake II from a virtual console when using the ref_soft 
or ref_gl renderers.  It won't run from X unless you're root when you
start it, and that's not advisable. So if you're in X, do a CTRL+ALT+F1,
login and then:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ./quake2
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<A HREF="Quake-HOWTO-6.html#running-from-x">Running SVGA and GL games from X</A>
in the Tips &amp; Tricks section below explains how to launch SVGA
and GL Quake II from X without manually switching to a virtual
console.
<P>
<H2><A NAME="quake2-gl"></A> <A NAME="ss3.7">3.7 The OpenGL Renderer</A>
</H2>

<P>Hardware-accelerated OpenGL Quake is Quake the way God intended it to be.
There is no substitute, and once you've experienced it there's no going
back.
<P>To run Quake II in GL mode, you need a 3D card with the Voodoo,
Voodoo2 or Voodoo Rush graphics chipset on it.  There are
specific issues to be dealt with if you have a Voodoo Rush card,
and I won't go into them now because frankly, I wouldn't know
what I was talking about.  A future version of this HOWTO will
cover Rush issues (If somebody wants to write about Voodoo Rush
issues, I'll gladly include it here).
<P>The SVGAlib, Glide, and Mesa libraries must all be installed and 
configured properly on your system for <CODE>quake2</CODE> to work.  The 
following sections will very briefly cover what you need to do to get
them going.
<P>Bernd Kreimeier's (
<A HREF="mailto:bk@gamers.org">bk@gamers.org</A>) Linux 3Dfx HOWTO (
<A HREF="http://www.gamers.org/dEngine/xf3D/howto/3Dfx-HOWTO.html">http://www.gamers.org/dEngine/xf3D/howto/3Dfx-HOWTO.html</A>) is good
source for further information.  
<P>The 
<A HREF="news://news.3dfx.com/3dfx.glide.linux">3dfx.glide.linux</A> newsgroup on the 3dfx news server
(news.3dfx.com) is another good source of information about the
intersection of Linux, glide, Mesa and Quake.
<P>
<P>
<H3>SVGAlib</H3>

<P>Quake II uses SVGAlib to get input from the mouse and keyboard, so you'll
need to configure it as outlined in section 
<A HREF="#quake2-svgalib">SVGAlib Renderer</A> section.
<P>
<H3><A NAME="quake2-glide"></A> Glide</H3>

<P>Glide is a library that provides an API for programming 3Dfx based cards.
If you want the Mesa graphics library to use your 3Dfx card, you've gotta
have it.
<P>The latest version of glide can always be found at 
<A HREF="http://glide.xxedgexx.com/3DfxRPMS.html">http://glide.xxedgexx.com/3DfxRPMS.html</A>.  Select the package(s)
appropriate for your system, and install according to the instructions on
the web page.
<P>Note that unless you download the 3Dfx device driver package in addition
to the Glide library, you will only be able to run Glide applications
(like GLQuake) as root.  Install the <CODE>/dev/3dfx</CODE> module and you
can play GLQuake as a regular user.
<P>Once you have glide installed, try out the test program that comes with
it.  Remember this program:  it's a good way to reset your display if you
ever have a glide application (like GLQuake) crash and leave your screen
switched off.  <B>NOTE: run this test from a VC, <EM>not</EM> X!</B> It's
possible for the test app to lose mouse and keyboard focus in X, and then
you'll have no way of shutting it down.
<P>
<BLOCKQUOTE><CODE>
<PRE>
     /usr/local/glide/bin/test3Dfx
     
</PRE>
</CODE></BLOCKQUOTE>
<P>Your screen should turn blue and prompt you to hit any key.  After you
press a key you should be returned to the prompt.
<A HREF="news://news.3dfx.com/3dfx.glide.linux">3dfx.glide.linux</A> on 3dfx's news server (news.3dfx.com) is a great
source of information for Linux glide-specific problems.
<P>
<H3>Mesa </H3>

<P>Once glide's installed, you need to install Mesa, a free OpenGL
implementation by 
<A HREF="mailto:brianp@elastic.avid.com">Brian Paul (brianp@elastic.avid.com)</A>.  Luckily, you won't have to
look far, because Mesa 2.6 is included with the Quake II binaries.  All
you have to do is move it to the right place:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     cp libMesaGL.so.2.6 /usr/local/lib
     ldconfig
     
</PRE>
</CODE></BLOCKQUOTE>
<P>If you want to upgrade Mesa to a more recent version (Mesa 3.0 is
the most recent version as of this writing),
you can download the latest from  
<A HREF="ftp://iris.ssec.wisc.edu/pub/Mesa">ftp://iris.ssec.wisc.edu/pub/Mesa</A>
If you have a RedHat 5.x or other glibc-based Linux distribution, see
<A HREF="Quake-HOWTO-5.html#glibc">Glibc, RedHat 5.x, Debian 2 considerations</A> in the
Troubleshooting/FAQs section for important information about compiling
libraries for Quake.
<P>After you've built it according to the instructions, you will have to do
two things:
<P>
<UL>
<LI>Remove your old Mesa installation.  If you previously installed a
<CODE>libMesaGL.so.2.6</CODE> as described above, you must remove it or
Quake II may not use the new version.

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/lib/
     rm -f libMesaGL.so.2*
     
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI>If the new Mesa has a major version number that's greater than 2,
you need to create a link to it with the name <CODE>libMesaGL.so.2</CODE>:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/lib/
     ln -s /wherever/you/installed/it/libMesaGL.so.3.0 libMesaGL.so.2
     ldconfig
     
</PRE>
</CODE></BLOCKQUOTE>

</LI>
</UL>
<P>Now switch to a VC (CTRL+ALT+F1)  and start Quake II:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ./quake2 +set vid_ref gl
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3><A NAME="q2-3dfxgl"></A> lib3dfxgl.so  **</H3>

<P>With Quake II version 3.19, an alternative to the Mesa library is
available.  <CODE>lib3dfxgl.so</CODE> is a mini-GL driver optimized
for Quake that provides slightly better framerates than Mesa.
This is a port of a driver that 3Dfx developed for Quake
under Windows, and apparently not all of its features work
properly yet.  So hopefully we can expect its performance to
improve with time.
<P>Like Mesa, <CODE>lib3dfxgl.so</CODE> requires Glide in order to
access your 3Dfx card.  The Quake II packages come with a script,
<CODE>quake2.3dfxgl</CODE> for running Quake II with this
library on glibc systems.  The next paragraph explains how to run
Quake II with <CODE>lib3dfxgl.so</CODE> on a libc5 system.  On a
glibc system, the <CODE>glqwcl</CODE> executable <B>must not be setuid</B>,
nor should you run it as root.  <CODE>glqwcl</CODE> will silently load
Mesa rather than
<CODE>lib3dfxgl.so</CODE> if it runs with root permissions.  This
non-root requirement implies that you have the <CODE>/dev/3dfx</CODE>
driver installed.  
<P>On a libc5 system, the non-root requirements mentioned above apply,
but you also need to create a symbolic link to <CODE>lib3dfxgl.so</CODE>
called <CODE>libMesaGL.so.2</CODE> like so:
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ln -sf lib3dfxgl.so libMesaGL.so.2
     
</PRE>
</CODE></BLOCKQUOTE>

Then start Quake II from a script that tells
<CODE>$LD_LIBRARY_PATH</CODE> to look in the current directory:
<HR>
<PRE>
     #!/bin/sh

     LD_LIBRARY_PATH=".:$LD_LIBRARY_PATH" ./quake2 +set vid_ref gl $*
     
</PRE>
<HR>
<P>
<P>You can tell which driver is being loaded by looking for output
like the following in your console as Quake II starts:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     GL_VENDOR: 3Dfx Interactive Inc.
     GL_RENDERER: 3Dfx Interactive Voodoo^2(tm)
     GL_VERSION: 1.1
     GL_EXTENSIONS: 3DFX_set_global_palette WGL_EXT_swap_control GL_EXT_paletted_texture GL_EXT_shared_texture_palette GL_SGIS_multitexture
     
</PRE>
</CODE></BLOCKQUOTE>
<P>If <CODE>GL_VENDOR</CODE> says <CODE>Brian Paul</CODE> rather than
<CODE>3Dfx Interactive Inc.</CODE>, that means Mesa is still being
used rather than the miniport dirver.
<P>
<H2><A NAME="quake2-glx"></A> <A NAME="ss3.8">3.8 The GLX Renderer</A>
 **</H2>

<P>
<P><CODE>ref_glx.so</CODE> is linked against standard OpenGL libraries
instead of Mesa.  This allows Quake II to run on other 3D
hardware that is supported by other OpenGL implementations.  At
this time, I dont' know of any OpenGL implementations that
support hardware other than 3Dfx, but this renderer ensures that
when they appear, we'll be able to play Quake II with them.
<P>This is a GLX application, and as such, must be run from X.
<P>You can use this client with Mesa/3Dfx if you install Mesa and
Glide as explained in the previous section, then set the
<CODE>$MESA_GLX_FX</CODE> environment variable to "fullscreen" before
you run <CODE>quake2</CODE>:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     export MESA_GLX_FX=fullscreen
     ./quake2 +set vid_ref glx +set _windowed_mouse 1
     
</PRE>
</CODE></BLOCKQUOTE>
<P>Why the <CODE>+set _windowed_mouse 1</CODE> option?  Remember that
this is an X application which happens to use your 3Dfx card.
Even though the display takes up your entire screen, Quake II is
stil running in a window.  This means that if you're not
<EM>very</EM> careful, you could move the mouse pointer outside
the Quake II window, and Quake II will suddenly stop responding
to mouse and keyboard input.  <CODE>+set _windowed_mouse 1</CODE>
avoids this problem by telling <CODE>quake2</CODE> to grab the mouse
and not let it move outside its window.
<P>
<H2><A NAME="ss3.9">3.9 Linux-Specific Command Line Options</A>
</H2>

<P>This section will cover command line options that are specific to the
Linux version of Quake II.  There are plenty of other Quake II options,
but they're beyond the scope of this HOWTO.  Check out some of the sites
listed in section 
<A HREF="Quake-HOWTO-1.html#general-quake-sources">General Quake Information</A> for this kind of information.
<P>These are actually cvars (client variables) that you can set in the Q2
console, but it makes the most sense to set them on the command line.
Set them with <CODE>+set</CODE> on the command line, like:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     ./quake2 +set cd_dev /dev/hdc
     
</PRE>
</CODE></BLOCKQUOTE>
<P>
<DL>
<DT><B>cd_dev <EM>device</EM></B><DD><P>Name of the CD-ROM device.
<P>
<DT><B>nocdaudio <EM>value</EM></B><DD><P>Disable CD audio if <EM>value</EM> is nonzero
<P>
<DT><B>sndbits <EM>num</EM></B><DD><P>Set  sound bit sample size.  Default is 16.
<P>
<DT><B>sndspeed <EM>num</EM></B><DD><P>Set sound sample speed.  Usual values are 8000, 11025, 22051 and 44100. 
If set to zero, causes the sound driver to attempt speeds in the following
order: 11025, 22051, 44100, 8000.
<P>
<DT><B>sndchannels <EM>num</EM></B><DD><P>Indicates stereo or mono sound.  Defaults to 2 (stereo). Use 1 for mono.
<P>
<DT><B>nostdout <EM>value</EM></B><DD><P>Don't do any output to stdout.  Use this if you don't want all the console
output dumped to your terminal.
</DL>
<P>
<H2><A NAME="ss3.10">3.10 Quake II Servers</A>
</H2>

<P>Linux's strength as an internet server make it a perfect platform for
running an internet Quake II server.  This section will touch on the
basics and Linux-specific aspects of starting up a Quake II server.  More
detailed information about running Quake II servers is available elsewhere
(see section 
<A HREF="Quake-HOWTO-1.html#other-sources">Other Sources of Information</A>
earlier in this document.
<P>
<H3>Listen Servers</H3>

<P>You can start a Quake II "Listen" server from within the game via the
<EM>Multiplayer</EM> menu.  This allows you to host a game and participate
in it at the same time.
<P>To start a Listen server, start Quake II, bring up the Quake II menu with
the ESC key, and select <EM>Multiplayer</EM>.  It should be pretty 
self-explanatory from there. 
<P>
<H3>Dedicated Servers</H3>

<P>For a permanent, stand-alone Quake II server that needs to run without
constant attention, using the Listen server is impractical.  Quake II has
a Dedicated server mode that is better suited to this type of use.  A 
dedicated server is started from the command line and uses fewer system 
resources than a Listen server because it doesn't start the graphical 
client piece at all.  
<P>To start a dedicated server, use the command line option <CODE>+set
dedicated 1</CODE>.  You can set additional server parameters either on the 
command line or in a config file that you <CODE>+exec</CODE> on the command
line.  Your config file should reside in the <CODE>baseq2</CODE> directory.
<P>A few common server options are listed below.  To set options on the
command line, do <CODE>+set fraglimit 30</CODE>.  Options are set the same way
in a config file, only you don't want the <CODE>+</CODE> before the
<CODE>set</CODE>.  Invoke your config file like this: <CODE>+exec
server.cfg</CODE>.
<P>
<DL>
<DT><B>fraglimit</B><DD><P>Number of frags required before the map changes
<DT><B>timelimit</B><DD><P>Time in minutes that must pass before the map changes
<DT><B>hostname</B><DD><P>The name of your Quake II server.  This is an arbitrary string and
has nothing to do with your DNS hostname.
<DT><B>maxclients</B><DD><P>The maximum number of players that can connect to the server at once.
</DL>
<P>For enough Quake II console and command line information to choke a horse,
see Farenheit 176 (
<A HREF="http://www.planetquake.com/f176">http://www.planetquake.com/f176</A>).
<P>
<H3>Other Sources of Server Information</H3>

<P>
<UL>
<LI>The Q2 Server FAQ has a basic step-by-step guide to set up a 
Q2 Server under Linux: 
<A HREF="http://www.bluesnews.com/faqs/q2s-faq.html">http://www.bluesnews.com/faqs/q2s-faq.html</A></LI>
<LI>Grant Cornelius Reticulus Copernicus Sperry (
<A HREF="mailto:flubber@xmission.com">flubber@xmission.com</A>) has some
basic Q2 server config files and startup scripts at 
<A HREF="http://www.atomicage.com:80/quake/server/server_cfg/">http://www.atomicage.com:80/quake/server/server_cfg/</A>.
     </LI>
</UL>
<P>
<H2><A NAME="ss3.11">3.11 Mods &amp; Addons </A>
</H2>

<P>Quake II modifications like Capture the Flag, Jailbreak, and Lithium
II are very popular extensions of the original Quake II game.  Some 
mods reside entirely on the server (Lithium), and some also require changes
to your client (CTF).  For server only mods, you just connect normally
and play.  Client-side mods require you to install additional files in
your <CODE>quake2</CODE> directory before you can play.
<P>
<H3>Client Side Mods </H3>

<P>Generally, installation of a client-side mod consists of just
downloading the client package and upacking it in your Quake II
directory, but you should refer to the mod's documentation for specific
details.  It may be necessary to download a Linux-specific package
in addition to the main (Windows) client package.  Also be aware that all mods
may not be available for Linux.
<P>Client-side mod packages usually contain a new <CODE>gamei386.so</CODE>
file and one or more <CODE>.pak</CODE> files.  Other new files may be 
included as well.  These new files will be installed in a subdirectory
below your Quake II directory.  Use <CODE>+set game <EM>mod-dir</EM></CODE>
on the command line to run the mod.  Rocket Arena 2, for example, gets
installed in a directory called <CODE>arena</CODE>.  To play RA2,
your would start your client like so:
<BLOCKQUOTE><CODE>
<PRE>
      ./quake2 +set game arena
      
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3>Capture the Flag </H3>

<P>Since this is by far the most popular variation of multiplayer Quake II,
I've included specific instructions for installing this mod.  Capture
the Flag for Quake II is available from id's ftp site.  Download
it, then install like so:
<P>
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     mkdir ctf
     cd ctf
     unzip -L /wherever/you/put/it/q2ctf102.zip
     
</PRE>
</CODE></BLOCKQUOTE>
<P>Start Quake II with <CODE>+set game ctf</CODE> to play CTF.
<P>
<H3>Server Side Mods </H3>

<P>Running a Quake II mod on a server isn't much different than running one
on the client side.  Generally you'll need to install <CODE>gamei386.so</CODE>
and <CODE>server.cfg</CODE> files in a new subdirectory and then start your 
server like 
<BLOCKQUOTE><CODE>
<PRE>
     ./quake2 +set game XXXX +set dedicated 1 +exec server.cfg
     
</PRE>
</CODE></BLOCKQUOTE>

Where XXXX above is the name of the mod's new subdirectory.  The exact
procedure will vary from mod to mod, of course.  See the mod's documentation
for specific details.
<P>
<H3>Game Source </H3>

<P>The entire game, with the exception of the engine itself, resides in a
shared library, <CODE>gamei386.so</CODE>.  Quake II mods are created by 
changing the contents of this file.  The C source is freely available
(section 
<A HREF="#quake2-files">Download the Necessary Files</A> above)
for anyone to download and modify.
<P>After you've downloaded the source, here's how to get started with it:
<P>
<BLOCKQUOTE><CODE>
<PRE>
      cd /usr/local/games/quake2
      mkdir mymod
      cd mymod
      gunzip /wherever/you/put/it/q2source-3.14.shar.Z
      sh /wherever/you/put/it/q2source-3.14.shar
      
</PRE>
</CODE></BLOCKQUOTE>
<P>You'll be presented with a bunch of legalese that you must answer
<CODE>yes</CODE> to, then the game source will be extracted.  Building a new
<CODE>gamei386.so</CODE> out of these sources is accomplished with a simple
<CODE>make</CODE>.  You can run Quake II with the newly compiled library like
so:
<P>
<BLOCKQUOTE><CODE>
<PRE>
      cd /usr/local/games/quake2
      ./quake2 +set game mymod
      
</PRE>
</CODE></BLOCKQUOTE>
<P>Not too exciting yet, since what you just built is identical to the 
"stock" <CODE>gamei386.so</CODE>, but this should be good information for
aspiring mod authors.
<P>
<H3>Mission Packs **</H3>

<P>
<UL>
<LI><B>Mission Pack 1: The Reckoning</B>
The Reckoning requires Quake II version 3.15 or later to run.  You'll need at least
95 MB for a minimum installation.  Another 90 MB are required if you want
to install the video sequences as well.  Assuming your CD is mounted on
<CODE>/mnt/cdrom</CODE> and Quake II is installed in
<CODE>/usr/local/games/quake2</CODE>:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     cp -r /mnt/cdrom/Data/all/* xatrix/
     rm -f xatrix/gamex86.dll
     
</PRE>
</CODE></BLOCKQUOTE>


If you want to install the video sequences:

<BLOCKQUOTE><CODE>
<PRE>
     cp -r /mnt/cdrom/Data/max/xatrix/video xatrix
     
</PRE>
</CODE></BLOCKQUOTE>


Play The Reckoning like this:
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ./quake2 +set game xatrix
     
</PRE>
</CODE></BLOCKQUOTE>

</LI>
<LI><B>Mission Pack 2: Ground Zero</B>
It requires Quake II version 3.17 or later to run.  You'll need at least
120 MB for a minimum installation.  Another 115 MB are required if you want
to install the video sequences as well.  Assuming your CD is mounted on
<CODE>/mnt/cdrom</CODE> and Quake II is installed in
<CODE>/usr/local/games/quake2</CODE>:

<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     cp -r /mnt/cdrom/Data/all/* rogue/
     rm -f rogue/gamex86.dll
     
</PRE>
</CODE></BLOCKQUOTE>


If you want to install the video sequences:

<BLOCKQUOTE><CODE>
<PRE>
     cp -r /mnt/cdrom/Data/max/rogue/video rogue
     
</PRE>
</CODE></BLOCKQUOTE>


Play Ground Zero like this:
<BLOCKQUOTE><CODE>
<PRE>
     cd /usr/local/games/quake2
     ./quake2 +set game rogue
     
</PRE>
</CODE></BLOCKQUOTE>

</LI>
</UL>
<P>
<HR>
<A HREF="Quake-HOWTO-4.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Quake-HOWTO-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Quake-HOWTO.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
