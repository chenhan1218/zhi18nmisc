<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Firewall Piercing mini-HOWTO: Reverse piercing</TITLE>
 <LINK HREF="Firewall-Piercing-7.html" REL=next>
 <LINK HREF="Firewall-Piercing-5.html" REL=previous>
 <LINK HREF="Firewall-Piercing.html#toc6" REL=contents>
<SCRIPT src="../../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(2, 8, 2);</SCRIPT>
<A HREF="Firewall-Piercing-7.html"><IMG SRC="../../img/next.gif" ALT="Next"></A>
<A HREF="Firewall-Piercing-5.html"><IMG SRC="../../img/prev.gif" ALT="Previous"></A>
<A HREF="Firewall-Piercing.html#toc6"><IMG SRC="../../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s6">6. Reverse piercing</A></H2>

<P>
<P>
<H2><A NAME="ss6.1">6.1 Rationale</A>
</H2>

<P>Sometimes, only one side of the firewall can launch telnet sessions
into the other side; however, some means of communication is possible
(typically, through e-mail).
Piercing the firewall is still possible, by triggering with
whatever messaging capability is available
a telnet connection from the ``right'' side of the firewall to the other.
<P><CODE>fwprc</CODE> includes code to trigger such connections
from a PGP-authentified e-mail message;
all you need is add <CODE>fwprc</CODE> as a <CODE>procmail</CODE> filter
to messages using the protocol,
(instructions included in <CODE>fwprc</CODE> itself).
Note however, that if you are to launch <CODE>pppd</CODE>
with appropriate privileges,
you might need create your own suid wrapper to become root.
Instructions enclosed in <CODE>fwprc</CODE>.
<P>Also, authentified trigger does not remotely mean secure connection.
You should really use <CODE>ssh</CODE> (perhaps over telnet)
for secure connections.
And then, beware of what happens between the triggering of a telnet
connection, and <CODE>ssh</CODE> taking over that connection.
Contribution in that direction welcome.
<H2><A NAME="ss6.2">6.2 Getting the triggering mail</A>
</H2>

<P>If you are firewalled, your mail may as well be in a central server
that doesn't do procmail filtering or allow telnet sessions.
No problem! You can use <CODE>fetchmail</CODE> to run in daemon mode
to poll and get mail to your client linux system,
and/or add a cron job to automatically poll for mail every 1-5 minutes.
<CODE>fetchmail</CODE> will forward mail to a local address
through <CODE>sendmail</CODE>,
which itself will have been configured to use <CODE>procmail</CODE> for delivery.
Note that if you run <CODE>fetchmail</CODE> as a background daemon,
it will lock away any other fetchmail that you'd like to run
only at other times, like when you open a <CODE>fwprc</CODE>;
of course, if you can also run a fetchmail daemon as a fake user.
Too frequent a poll won't be nice to either the server or your host.
Too infrequent a poll means you'll have to wait before the message gets read
and the reverse connection gets established.
I use two-minute poll frequency.
<HR>
<A HREF="Firewall-Piercing-7.html"><IMG SRC="../../img/next.gif" ALT="Next"></A>
<A HREF="Firewall-Piercing-5.html"><IMG SRC="../../img/prev.gif" ALT="Previous"></A>
<A HREF="Firewall-Piercing.html#toc6"><IMG SRC="../../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
