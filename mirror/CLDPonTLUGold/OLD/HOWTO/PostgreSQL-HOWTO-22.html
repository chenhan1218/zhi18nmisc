<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Database-SQL-RDBMS HOW-TO document for Linux (PostgreSQL Object Relational Database System): PHP Hypertext Preprocessor - Server-side html-embedded scripting language for PostgreSQL  </TITLE>
 <LINK HREF="PostgreSQL-HOWTO-23.html" REL=next>
 <LINK HREF="PostgreSQL-HOWTO-21.html" REL=previous>
 <LINK HREF="PostgreSQL-HOWTO.html#toc22" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="PostgreSQL-HOWTO-23.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="PostgreSQL-HOWTO-21.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="PostgreSQL-HOWTO.html#toc22"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="PHP"></A> <A NAME="s22">22. PHP Hypertext Preprocessor - Server-side html-embedded scripting language for PostgreSQL  </A></H2>

<P>WWW Interface Tool is at -
<UL>
<LI> 
<A HREF="http://www.php.net">http://www.php.net</A></LI>
<LI> 
<A HREF="http://www.vex.net/php">http://www.vex.net/php</A></LI>
</UL>

PHP also has a compiler called Zend which will vastly improve the performance.
First you will write your application in PHP scripting language 
during development, testing and debugging. Once the project is ready for 
deployment you will use the Zend compiler to 
compile the PHP to create executable which will run very fast.
<P>Old name is Professional Home Pages (PHP) and new name is PHP Hypertext Pre-Processor
<UL>
<LI> Mirror sites are in many countries like www.COUNTRYCODE.php.net</LI>
<LI> 
<A HREF="http://www.fe.de.php.net">http://www.fe.de.php.net</A></LI>
<LI> 
<A HREF="http://www.sk.php.net">http://www.sk.php.net</A></LI>
<LI> 
<A HREF="http://php.iquest.net/">http://php.iquest.net/</A></LI>
<LI> Questions e-mail to :
<A HREF="mailto:rasmus@lerdorf.on.ca">rasmus@lerdorf.on.ca</A></LI>
</UL>
<P>PHP is a server-side html-embedded scripting language. It lets
you write simple scripts right in your .HTML files much like
JavaScript does, except, unlike JavaScript PHP is not
browser-dependant. JavaScript is a client-side html-embedded
language while PHP is a server-side language. 
PHP is similar in concept to Netscape's LiveWire Pro product. 
If you like free fast-moving software that comes
with full source code you will probably like PHP.
<P>
<UL>
<LI> The PostgreSQL support code was written by Adam Sussman
<A HREF="mailto: asussman@vidya.com">asussman@vidya.com</A></LI>
</UL>
<H2><A NAME="ss22.1">22.1 Major Features</A>
</H2>

<P>
<UL>
<LI>Standard CGI, FastCGI and Apache module support - 
As a standard CGI program, PHP can be installed on any
Unix machine running any Unix web server. With support for
the new FastCGI standard, PHP can take advantage of the
speed improvements gained through this mechanism. As an
Apache module, PHP becomes an extremely powerful and
<B>lightning fast</B> alternative to CGI programmimg.
</LI>
<LI> Access Logging - 
With the access logging capabilities of PHP, users can
maintain their own hit counting and logging. It does not use
the system's central access log files in any way, and it
provides real-time access monitoring. The Log Viewer Script
provides a quick summary of the accesses to a set of pages
owned by an individual user. In addition to that, the package
can be configured to generate a footer on every page which
shows access information. See the bottom of this page for an
example of this.
</LI>
<LI> Access Control - 
A built-in web-based configuration screen handles access
control configuration. It is possible to create rules for all
or some web pages owned by a certain person which place
various restrictions on who can view these pages and how they
will be viewed. Pages can be password protected, completely
restricted, logging disabled and more based on the client's
domain, browser, e-mail address or even the referring
document.
</LI>
<LI> PostgresSQL Support - 
Postgres is an advanced free RDBMS. PHP supports embedding
PostgreSQL "SQL queries" directly in .html files.
</LI>
<LI> RFC-1867 File Upload Support - 
File Upload is a new feature in Netscape 2.0. It lets users
upload files to a web server. PHP provides the actual Mime
decoding to make this work and also provides the additional
framework to do something useful with the uploaded file once
it has been received.
</LI>
<LI> HTTP-based authentication control -
PHP can be used to create customized HTTP-based
authentication mechanisms for the Apache web server.
</LI>
<LI> Variables, Arrays, Associative Arrays - 
PHP supports typed variables, arrays and even Perl-like
associative arrays. These can all be passed from one web page
to another using either GET or POST method forms.
</LI>
<LI> Conditionals, While Loops - 
PHP supports a full-featured C-like scripting language.
You can have if/then/elseif/else/endif conditions as well as
while loops and switch/case statements to guide the logical
flow of how the html page should be displayed.
</LI>
<LI> Extended Regular Expressions - 
Regular expressions are heavily used for pattern matching,
pattern substitutions and general string manipulation. PHP 
supports all common regular expression operations.
</LI>
<LI> Raw HTTP Header Control - 
The ability to have web pages send customized raw HTTP
headers based on some condition is essential for high-level
web site design. A frequent use is to send a Location: URL
header to redirect the calling client to some other URL. It
can also be used to turn off cacheing or manipulate the last
update header of pages.
</LI>
<LI> On-the-fly GIF image creation - 
PHP has support for Thomas Boutell's GD image library
which makes it possible to generate GIF images on the fly.
</LI>
<LI> ISP "Safe Mode" support - 
PHP supports an unique "Safe Mode" which makes it safe to
have multiple users run PHP scripts on the same server.
</LI>
<LI> Many more new features are being added in newer releases of PHP.
Visit the main web site at 
<A HREF="http://www.php.net">http://www.php.net</A>
</LI>
<LI> It's Free! - 
One final essential feature. The package is completely free.
It is licensed under the GNU/GPL which allows you to use the
software for any purpose, commercial or otherwise. </LI>
</UL>
<H2><A NAME="ss22.2">22.2 PHP - Brief History</A>
</H2>

<P>PHP began life as a simple little cgi wrapper written in Perl. 
The name of this first package was Personal Home Page Tools, which
later became Personal Home Page Construction Kit.
<P>A tool was written to easily embed SQL queries into web pages. It 
was basically another CGI wrapper that parsed SQL queries and 
made it easy to create forms and tables
based on these queries. This tool was named FI (Form Interpreter).
<P>PHP/FI version 2.0 is a complete rewrite of these two packages combined
into a single program. 
It evolved to a simple programming language embedded inside HTML files. 
PHP eliminates the need for numerous small Perl cgi programs
by allowing you to place simple scripts directly in your HTML files. This
speeds up the overall performance of your web pages since the overhead of
forking Perl several times has been eliminated. 
It also makes it easier to manage large web sites by placing 
all components of a web page in a single html file. 
By including support for various databases, it also makes it
trivial to develop database enabled web pages. Many people find the
embedded nature much easier to deal with than trying to create separate
HTML and CGI files.
<P>Now PHP/FI is renamed as PHP.
<H2><A NAME="ss22.3">22.3 So, what can I do with PHP ?</A>
</H2>

<P>The first thing you will notice if you run a page through PHP is that it
adds a footer with information about the number of times your page has been
accessed (if you have compiled access logging into the binary). This is
just a very small part of what PHP can do for you. It serves another
very important role as a form interpreter cgi, hence the FI part of the
old name. For example, if you create a form on one of your web pages, you need
something to process the information on that form. Even if you just want to
pass the information to another web page, you will have to have a cgi
program do this for you. PHP makes it extremely easy to take form data
and do things with it.
<H2><A NAME="ss22.4">22.4 A simple example</A>
</H2>

<P>Suppose you have a form:
<BLOCKQUOTE><CODE>
<PRE>
&lt;FORM ACTION="/cgi-bin/php.cgi/~userid/display.html" METHOD=POST> 
&lt;INPUT TYPE="text" name="name"> 
&lt;INPUT TYPE="text" name="age"> 
&lt;INPUT TYPE="submit"> 
&lt;FORM> 
</PRE>
</CODE></BLOCKQUOTE>

Your display.html file could then contain something like:
<BLOCKQUOTE><CODE>
<PRE>
&lt; ?echo "Hi $ name, you are $ age years old!&lt;p>" &gt;
</PRE>
</CODE></BLOCKQUOTE>

It's that simple! PHP automatically creates a variable for each form
input field in your form. You can then use these variables in the ACTION
URL file.
<P>The next step once you have figured out how to use variables is to start
playing with some logical flow tags in your pages. For example, if you
wanted to display different messages based on something the user inputs,
you would use if/else logic. In our above example, we can display different
things based on the age the user entered by changing our display.html to:
<BLOCKQUOTE><CODE>
<PRE>
&lt;?
    if($age>50);
        echo "Hi $name, you are ancient!&lt;p>";
    elseif($age>30);
        echo "Hi $name, you are very old!&lt;p>";
    else;
        echo "Hi $name.";
    endif;
>
</PRE>
</CODE></BLOCKQUOTE>

PHP provides a very powerful scripting language which will do much more
than what the above simple example demonstrates. See the section on the
PHP Script Language for more information.
<P>You can also use PHP to configure who is allowed to access your pages.
This is done using a built-in configuration screen. With this you could for
example specify that only people from certain domains would be allowed to
see your pages, or you could create a rule which would password protect
certain pages. See the Access Control section for more details.
<P>PHP is also capable of receiving file uploads from any RFC-1867
compliant web browser. This feature lets people upload both text and binary
files. With PHP's access control and logical functions, you have full
control over who is allowed to upload and what is to be done with the file
once it has been uploaded. See the File Upload section for more details.
<P>PHP has support for the PostgreSQL database package. It supports
embedded SQL queries in your .HTML files.
<P>PHP also has support for the mysql database package. It supports
embedded SQL queries in your .HTML files.
<H2><A NAME="ss22.5">22.5 CGI Redirection</A>
</H2>

<P>
<H3>Apache 1.0.x Notes</H3>

<P>A good way to run PHP is by using a cgi redirection module with the
Apache server. Please note that you do not need to worry about
redirection modules if you are using the Apache module version of
PHP. There are two of these redirection modules available. One is
developed by Dave Andersen 
<UL>
<LI>       
<A HREF="mailto:angio@aros.net">angio@aros.net</A></LI>
</UL>

and it is available at
<UL>
<LI>     
<A HREF="ftp://ftp.aros.net/pub/util/apache/mod_cgi_redirect.c">ftp://ftp.aros.net/pub/util/apache/mod_cgi_redirect.c</A> </LI>
</UL>

and the other
comes bundled with Apache and is called mod_actions.c. The modules are
extremely similar. They differ slightly in their usage. Both have been
tested and both work with PHP.
<P>Check the Apache documentation on how to add a module. Generally you
add the module name to a file called Configuration. The line to be
added if you want to use the mod_actions module is:
<P>Module action_module mod_actions.o
<P>If you are using the mod_cgi_redirect.c module add this line:
<P>Module cgi_redirect_module mod_cgi_redirect.o
<P>Then compile your httpd and install it. To configure the cgi
redirection you need to either create a new mime type in your
mime.types file or you can use the AddType command in your srm.conf
file to add the mime type. The mime type to be added should be
something like this:
<BLOCKQUOTE><CODE>
<PRE>
     application/x-httpd-php phtml
</PRE>
</CODE></BLOCKQUOTE>

If you are using the mod_actions.c module you need to add the
following line to your srm.conf file:
<BLOCKQUOTE><CODE>
<PRE>
     Action application/x-httpd-php /cgi-bin/php.cgi
</PRE>
</CODE></BLOCKQUOTE>

If you are using mod_cgi_redirect.c you should add this line to
srm.conf:
<BLOCKQUOTE><CODE>
<PRE>
     CgiRedirect application/x-httpd-php /cgi-bin/php.cgi
</PRE>
</CODE></BLOCKQUOTE>

Don't try to use both mod_actions.c and mod_cgi_redirect.c at the same
time.
<P>Once you have one of these cgi redirection modules installed and
configured correctly, you will be able to specify that you want a file
parsed by PHP simply by making the file's extension .phtml.
Furthermore, if you add index.phtml to your DirectoryIndex
configuration line in your srm.conf file then the top-level page in a
directory will be automatically parsed by php if your index file is
called index.phtml.
<H3>Netscape HTTPD</H3>

<P>You can automatically redirect requests for files with a given
extension to be handled by PHP by using the Netscape Server CGI
Redirection module. This module is available in the File Archives on
the PHP Home Page. The README in the package explicitly explains
how to configure it for use with PHP.
<H3>NCSA HTTPD</H3>

<P>NCSA does not currently support modules, so in order to do cgi
redirection with this server you need to modify your server source
code. A patch to do this with NCSA 1.5 is available in the PHP file
archives.
<H2><A NAME="ss22.6">22.6 Running PHP from the command line</A>
</H2>

<P>If you build the CGI version of PHP, you can use it from the command
line simply typing: php.cgi filename where filename is the file you want to
parse. You can also create standalone PHP scripts by making the first
line of your script look something like:
<BLOCKQUOTE><CODE>
<PRE>
    #!/usr/local/bin/php.cgi -q
</PRE>
</CODE></BLOCKQUOTE>

The "-q" suppresses the printing of the HTTP headers. You can leave off
this option if you like.
<H2><A NAME="ss22.7">22.7 PHPGem package</A>
</H2>

<P>PHPGem is a PHP-script which accelerates the creation of PHP-scripts
for working with tables. It works with different SQL-servers such as
PostgreSQL, MySQL, mSQL, ODBC, and Adabas. You input a description of
and parameters for your tables' fields (field name, on/off searching
in the field, etc.), and PHPGem outputs another PHP-script which will
work with the tables (view/add/edit/delete/duplicate entries and
search). PHPGem works with multi-level nested tables. PHPGem allows
you to specify a level of access for each table and for each field for
each user. PHPGem also support images.
<P>PHPGem is at 
<A HREF="http://sptl.org/phpgem">http://sptl.org/phpgem</A><HR>
<A HREF="PostgreSQL-HOWTO-23.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="PostgreSQL-HOWTO-21.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="PostgreSQL-HOWTO.html#toc22"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
