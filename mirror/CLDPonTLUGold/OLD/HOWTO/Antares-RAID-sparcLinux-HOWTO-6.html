<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Antares-RAID-sparcLinux-HOWTO: Installation</TITLE>
 <LINK HREF="Antares-RAID-sparcLinux-HOWTO-7.html" REL=next>
 <LINK HREF="Antares-RAID-sparcLinux-HOWTO-5.html" REL=previous>
 <LINK HREF="Antares-RAID-sparcLinux-HOWTO.html#toc6" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="Antares-RAID-sparcLinux-HOWTO-7.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Antares-RAID-sparcLinux-HOWTO-5.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Antares-RAID-sparcLinux-HOWTO.html#toc6"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s6">6. Installation</A></H2>

<P>
<P>NOTE: The installation procedure given here for the SBUS controller is
similar to that found in the manual. It has been modified so minor variations
in the SPARCLinux installation may be included.
<H2><A NAME="ss6.1">6.1 SBUS Controller Compatibility</A>
</H2>

<P>
<P>The 5070 / Linux 2.2 combination was tested on SPARCstation (5, 10, &amp;
20), Ultra 1, and Ultra 2 Creator. The 5070 was also tested on Linux with Symmetrical
Multiprocessing (SMP) support on a dual processor Ultra 2 creator 3D with no
problems. Other 5070 / Linux / hardware combinations may work as well.
<H2><A NAME="ss6.2">6.2 Hardware Installation Procedure</A>
</H2>

<P>
<P>If your system is already up and running, you must halt the operating system.
<H3>GNOME:</H3>

<P>
<OL>
<LI>From the login screen right click the &quot;Options&quot; button.</LI>
<LI>On the popup menu select System -&gt; Halt.</LI>
<LI>Click &quot;Yes&quot; when the verification box appears</LI>
</OL>

<H3>KDE:</H3>

<P>
<OL>
<LI>From the login screen right click shutdown.</LI>
<LI>On the popup menu select shutdown by right clicking its radio button.</LI>
<LI>Click OK</LI>
</OL>

<H3>XDM:</H3>

<P>
<OL>
<LI>login as root</LI>
<LI>Left click on the desktop to bring up the pop-up menu</LI>
<LI>select &quot;New Shell&quot;</LI>
<LI>When the shell opens type &quot;halt&quot; at the prompt and press return</LI>
</OL>

<H3>Console Login (systems without X windows):</H3>

<P>
<OL>
<LI>Login as root</LI>
<LI>Type &quot;halt&quot;</LI>
</OL>

<H3>All Systems:</H3>

<P>
<P>Wait for the message &quot;power down&quot; or &quot;system halted&quot;
before proceeding. Turn off your SPARCstation system (Note: Your system may
have turned itself off following the power down directive), its video monitor,
external disk expansion boxes, and any other peripherals connected to the system.
Be sure to check that the green power LED on the front of the system enclosure
is not lit and that the fans inside the system are not running. Do not disconnect
the system power cord.
<P>
<H3>SPARCstation 4, 5, 10, 20 &amp; UltraSPARC Systems:</H3>

<P>
<OL>
<LI>Remove the top cover on the CPU enclosure. On a SPARCstation 10, this is
done by loosening the captive screw at the top right corner of the back of
the CPU enclosure, then tilting the top of the enclosure forward while using
a Phillips screwdriver to press the plastic tab on the top left corner. </LI>
<LI>Decide which SBUS slot you will use. Any slot will do. Remove the filler
panel for that slot by removing the two screws and rectangular washers that
hold it in.</LI>
<LI>Remove the SBUS retainer (commonly called the handle) by pressing outward
on one leg of the retainer while pulling it out of the hole in the printed
circuit board.</LI>
<LI>Insert the board into the SBUS slot you have chosen. To insert the board,
first engage the top of the 5070 RAIDium backpanel into the backpanel of the
CPU enclosure, then rotate the board into a level position and mate the SBUS
connectors. Make sure that the SBUS connectors are completely engaged. </LI>
<LI>Snap the nylon board retainers inside the SPARCstation over the 5070 RAIDium
board to secure it inside the system.</LI>
<LI>Secure the 5070 RAIDium SBUS backpanel to the system by replacing the rectangular
washers and screws that held the original filler panel in place.</LI>
<LI>Replace the top cover by first mating the plastic hooks on the front of
the cover to the chassis, then rotating the cover down over the unit until
the plastic tab in back snaps into place. Tighten the captive screw on the
upper right corner. </LI>
</OL>

<H3>Ultra Enterprise Servers, SPARCserver 1000 &amp;amp; 2000 Systems, SPARCserver 6XO MP Series:</H3>

<P>
<OL>
<LI>Remove the two Allen screws that secure the CPU board to the card cage.
These are located at each end of the CPU board backpanel.</LI>
<LI>Remove the CPU board from the enclosure and place it on a static-free surface.</LI>
<LI>Decide which SBUS slot you will use. Any slot will do. Remove the filler
panel for that slot by removing the two screws and rectangular washers that
hold it in. Save these screws and washers.</LI>
<LI>Remove the SBUS retainer (commonly called the handle) by pressing outward
on one leg of the retainer while pulling it out of the hole in the printed
circuit board. </LI>
<LI>Insert the board into the SBUS slot you have chosen. To insert the board,
first engage the top of the 5070 RAIDium backpanel into the backpanel of the
CPU enclosure, then rotate the board into a level position and mate the SBUS
connectors. Make sure that the SBUS connectors are completely engaged. </LI>
<LI>Secure the 5070 RAIDium board to the CPU board with the nylon screws and
standoffs provided on the CPU board. The standoffs may have to be moved so
that they match the holes used by the SBUS retainer, as the standoffs are used
in different holes for an MBus module. Replace the screws and rectangular washers
that originally held the filler panel in place, securing the 5070 RAIDium SBus
backpanel to the system enclosure.</LI>
<LI>Re-insert the CPU board into the CPU enclosure and re-install the Allen-head
retaining screws that secure the CPU board. </LI>
</OL>

<H3>All Systems:</H3>

<P>
<OL>
<LI>Mate the external cable adapter box to the 5070 RAIDium and gently tighten
the two screws that extend through the cable adapter box. </LI>
<LI>Connect the three cables from your SCSI devices to the three 68-pin SCSI-3
connectors on the Antares 5070 RAIDium. The three SCSI cables must always be
reconnected in the same order after a RAID set has been established, so you
should clearly mark the cables and disk enclosures for future disassembly and
reassembly.</LI>
<LI>Configure the attached SCSI devices to use SCSI target IDs other than 7,
as that is taken by the 5070 RAIDium itself. Configuring the target number
is done differently on various devices. Consult the manufacturer's installation
instructions to determine the method appropriate for your device. </LI>
<LI>As you are likely to be installing multiple SCSI devices, make sure that
all SCSI buses are properly terminated. This means a terminator is installed
only at each end of each SCSI bus daisy chain. </LI>
</OL>

<H3>Verifying the Hardware Installation: </H3>

<P>
<P>These steps are optional but recommended. First, power-on your system and
interrupt the booting process by pressing the &quot;Stop&quot; and &quot;a&quot;
keys (or the &quot;break&quot; key if you are on a serial terminal) simultaneously
as soon as the Solaris release number is shown on the screen. This will force
the system to run the Forth Monitor in the system EPROM, which will display
the &quot;ok&quot; prompt. This gives you access to many useful low-level
commands, including: 
<PRE>
ok show-devs
</PRE>

<PRE>
. . .
</PRE>

<PRE>
/iommu@f,e0000000/sbus@f,e000100SUNW, isp@1,8800000
</PRE>

<PRE>
. . .
</PRE>
<P>The first line in the response shown above means that the 5070 RAIDium
host adapter has been properly recognized. If you don't see a line like this,
you may have a hardware problem.
<P>
<P>Next, to see a listing of all the SCSI devices in your system, you can
use the probe-scsi-all command, but first you must prepare your system as follows:
<PRE>
ok setenv auto-boot? False
</PRE>

<PRE>
ok reset
</PRE>

<PRE>
ok probe-scsi-all
</PRE>
<P>This will tell you the type, target number, and logical unit number of
every SCSI device recognized in your system. The 5070 RAIDium board will report
itself attached to an ISP controller at target 0 with two Logical Unit Numbers
(LUNs): 0 for the virtual hard disk drive, and 7 for the connection to the
Graphical User Interface (GUI). Note: the GUI communication channel on LUN
7 is currently unused under Linux. See the discussion under &quot;SCSI Monitor
Daemon (SMON)&quot; in the &quot;Advanced Topics&quot; section for more
information.
<P>
<P>REQUIRED: Perform a reconfiguration boot of the operating system:
<PRE>
ok boot -r
</PRE>
<P>If no image appears on your screen within a minute, you most likely have
a hardware installation problem. In this case, go back and check each step
of the installation procedure. This completes the hardware installation procedure.
<P>
<H2><A NAME="ss6.3">6.3 Serial Terminal</A>
</H2>

<P>
<P>If you have a serial terminal at your disposal (e.g. DEC-VT420) it may
be connected to the controller's serial port using a 9 pin DIN male to DB25
male serial cable. Otherwise you will need to supplement the above cable with
a null modem adapter to connect the RAID controller's serial port to the serial
port on either the host computer or a PC. The terminal emulators I have successfully
used include Minicom (on Linux), Kermit (on Caldera's Dr. DOS), and Hyperterminal
(on a windows CE palmtop), however, any decent terminal emulation software
should work. The basic settings are 9600 baud , no parity, 8 data bits, and
1 stop bit. 
<H2><A NAME="ss6.4">6.4 Hard Drive Plant</A>
</H2>

<P>
<P>Choosing the brand and capacity of the drives that will form the hard drive
physical plant is up to you. I do have some recommendations:
<UL>
<LI>Remember, you generally get what you pay for. I strongly recommend paying
the extra money for better (i.e. more reliable) hardware especially if you
are setting up a RAID for a mission critical project. For example, consider
purchasing drive cabinets with redundant hot-swappable power supplies, etc.
 </LI>
<LI>You will also want a UPS for your host system and drive cabinets. Remember,
RAID levels 3 and 5 protect you from data loss due to drive failure NOT power
failure.</LI>
<LI>The drive cabinet you select should have hot swappable drive bays, these
cost more but are definitely worth it when you need to add/change drives. </LI>
<LI>Make sure the cabinet(s) have adequate cooling when fully loaded with drives.</LI>
<LI>Keep your SCSI cables (internal and external) as short as possible</LI>
<LI>Mark the drives/cabinet(s) in such a way that you will be able to reconnect
them to the controller in their original configuration. Once the RAID is configured
you cannot re-organize you drives without re-configuring the RAID (and subsequently
erasing the data stored on it).</LI>
<LI>Keep in mind that although it is physically possible to connect/configure
up to 6 drives per channel, performance will sharply decrease for RAIDs with
more than three drives per channel. This is due to the 25 MHz bandwidth limitation
of the SBUS. Therefore, if read/write performance is an issue go with a small
number of large drives. If you need a really large RAID (~ 1 terabyte)
then you will have no other choice but to load the channels to capacity and
pay the performance penalty. NOTE: if you are serving files over a 10/100 Base
T network you may not notice the performance decrease since the network is
usually the bottleneck not the SBUS.</LI>
</UL>
<HR>
<A HREF="Antares-RAID-sparcLinux-HOWTO-7.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Antares-RAID-sparcLinux-HOWTO-5.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Antares-RAID-sparcLinux-HOWTO.html#toc6"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
