<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux IP Masquerade HOWTO: Frequently Asked Questions</TITLE>
 <LINK HREF="IP-Masquerade-HOWTO-8.html" REL=next>
 <LINK HREF="IP-Masquerade-HOWTO-6.html" REL=previous>
 <LINK HREF="IP-Masquerade-HOWTO.html#toc7" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="IP-Masquerade-HOWTO-8.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="IP-Masquerade-HOWTO-6.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="IP-Masquerade-HOWTO.html#toc7"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s7">7. Frequently Asked Questions</A></H2>

<P>
<P>
<A NAME="FAQ"></A> <P>If you can think of any useful FAQ suggestions, please send it to 
<A HREF="mailto:dranch@trinnet.net">dranch@trinnet.net</A>.  Please clearly state the question and an appropriate answer (if you have it).  Thank you!
<P>
<P>
<A NAME="MASQ-supported-Distributions"></A> <P>
<H2><A NAME="ss7.1">7.1 What Linux Distributions support IP Masquerading out of the box?</A>
</H2>

<P>If your Linux distribution doesn't support IP MASQ out of the box, don't worry.  All you have to do is 
re-compile a kernel as shown above in this HOWTO.
<P>NOTE:  If you can help us fill out this table, please email 
<A HREF="mailto:ambrose@writeme.com">ambrose@writeme.com</A> or 
<A HREF="mailto:dranch@trinnet.net">dranch@trinnet.net</A>.
<P>
<UL>
<LI>Caldera       &lt; v1.2   : NO  - ?</LI>
<LI>Caldera         v1.3   : YES - 2.0.35 based</LI>
<LI>Caldera         v2.2   : YES - 2.2.5 based</LI>
<LI>Caldera eServer v2.3   : YES - ? based</LI>
<LI>Debian          v1.3   : NO  - ?</LI>
<LI>Debian          v2.0   : NO  - ?</LI>
<LI>Debian          v2.1   : YES - 2.2.1 based</LI>
<LI>Debian          v2.2   : YES - 2.2.15 based</LI>
<LI>DLX Linux       v?     :  ?  - ?</LI>
<LI>DOS Linux       v?     :  ?  - ?</LI>
<LI>FloppyFW          v1.0.2 :  ?  - ?</LI>
<LI>Hal91 Linux     v?     :  ?  - ?</LI>
<LI>Linux Mandrake  v5.3   : YES - ?</LI>
<LI>Linux Mandrake  v6.0   : YES - 2.2.5 based</LI>
<LI>Linux PPC       vR4    :  NO - ?</LI>
<LI>Linux Pro       v?     :  ?  - ?</LI>
<LI>LinuxWare       v?     :  ?  - ?</LI>
<LI>Mandrake        v6.0   : YES - ?</LI>
<LI>Mandrake        v6.1   : YES - ?</LI>
<LI>Mandrake        v7.0   : YES - 2.2.14</LI>
<LI>Mandrake        v7.1   : YES - 2.2.15</LI>
<LI>Mandrake        v7.2   : YES - 2.2.17</LI>
<LI>MkLinux         v?     :  ?  - ?</LI>
<LI>MuLinux         v3rl   : YES - ?</LI>
<LI>Redhat        &lt; v4.x   : NO  - ?</LI>
<LI>Redhat          v5.0   : YES - ?</LI>
<LI>Redhat          v5.1   : YES - 2.0.34 based</LI>
<LI>Redhat          v5.2   : YES - 2.0.36 based</LI>
<LI>Redhat          v6.0   : YES - 2.2.5 based</LI>
<LI>Redhat          v6.1   : YES - 2.2.12 based</LI>
<LI>Redhat          v6.2   : YES - 2.2.14 based</LI>
<LI>Redhat          v7.0   : YES - 2.2.16 based</LI>
<LI>Slackware       v3.0   :  ?  - ?</LI>
<LI>Slackware       v3.1   :  ?  - ?</LI>
<LI>Slackware       v3.2   :  ?  - ?</LI>
<LI>Slackware       v3.3   :  ?  - 2.0.34 based</LI>
<LI>Slackware       v3.4   :  ?  - ?</LI>
<LI>Slackware       v3.5   :  ?  - ?</LI>
<LI>Slackware       v3.6   :  ?  - ?</LI>
<LI>Slackware       v3.9   :  ?  - 2.0.37pre10 based</LI>
<LI>Slackware       v4.0   :  ?  - ?</LI>
<LI>Slackware       v7.0   : YES - 2.2.13 based</LI>
<LI>Slackware       v7.1   : YES - 2.2.16 based</LI>
<LI>Stampede Linux  v?     :  ?  - ?</LI>
<LI>SuSE            v5.2   : YES - 2.0.32 base</LI>
<LI>SuSE            v5.3   : YES - ?</LI>
<LI>SuSE            v6.0   : YES - 2.0.36 based</LI>
<LI>SuSE            v6.1   : YES - 2.2.5 based</LI>
<LI>SuSE            v6.3   : YES - 2.2.13 based</LI>
<LI>Tomsrbt Linux   v?     :  ?  - ?</LI>
<LI>TurboLinux Lite v4.0   : YES - ?</LI>
<LI>TurboLinux v6.0        : YES - 2.2.12 based</LI>
<LI>TriLinux        v?     :  ?  - ?</LI>
<LI>Yggdrasil Linux v?     :  ?  - ?
</LI>
</UL>
<P>
<A NAME="FAQ-Hardware"></A> <H2><A NAME="ss7.2">7.2 What are the minimum hardware requirements and any limitations for IP Masquerade?  How well does it perform?</A>
</H2>

<P>
<P>A 486/66 box with 16MB of RAM was more than sufficient to fill a 1.54Mb/s T1 100%!  MASQ has also be known run quite well on 386SX-16s with 8MB of RAM.  Yet, it should be noted that Linux IP Masquerade starts thrashing with more than 500 MASQ entries. 
<P>The only application that I known that can temporarily break Linux IP Masquerade is GameSpy.  Why?  When it refreshes its lists, it creates 10,000s of quick connections in a VERY short time.  Until these sessions timeout, the MASQ tables become "FULL".  See the 
<A HREF="#No-Free-Ports">No-Free-Ports</A>
 section of the FAQ for more details.
<P>
<P>While we are at it:
<P>There is a hard limit of 4096 concurrent connections each for TCP &amp; UDP.  This limit can be changed by fiddling the values in <EM>/usr/src/linux/net/ipv4/ip_masq.h</EM> - a upwards limit of 32000 should by OK.  If you want to change the limit - you need to change the PORT_MASQ_BEGIN &amp; PORT_MASQ_END values to get an appropriately sized range above 32K and below 64K.
<P>
<H2><A NAME="ss7.3">7.3 When I run the rc.firewall command, I get "command not found" errors.  Why?</A>
</H2>

<P>How did you put the rc.firewall onto your machine?  Did you cut&amp;paste it into a TELNET window, FTP it from a Windows/DOS machine, etc?  Try this.. log into your Linux box and run "vim -b /etc/rc.d/rc.firewall" and see if all your lines end in a ^M.  If they do, delete all the ^M and try again.
<P>
<H2><A NAME="ss7.4">7.4 I've checked all my configurations, I still can't get IP Masquerade to work.  What should I do?</A>
</H2>

<P>
<UL>
<LI>Stay calm.  Get yourself a cup of tea, coffee, soda, etc., and have a rest.  Once your mind is clear, try the suggestions mentioned below.  Setting up Linux IP Masquerading is NOT hard but there are several concepts that will be new to you.
<P>
</LI>
<LI>Again, go through all the steps in the 
<A HREF="IP-Masquerade-HOWTO-5.html#Testing">Testing</A>
 section.  99% of all first-time Masquerade users who have problems haven't looked here.  
<P>
</LI>
<LI>Check the 
<A HREF="http://www.indyramp.com/lists/masq/">IP Masquerade Mailing List Archives</A>, most likely your question or problem is a common one and can be found in a simple Archive search.
<P>
</LI>
<LI>Check out the 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#TrinityOS">TrinityOS</A> document.  It covers IP Masquerading for both the 2.0.x and 2.2.x kernels and MANY other topics including PPPd, DialD, DHCP, DNS, Sendmail, etc.
<P>
</LI>
<LI>Make sure that you aren't running ROUTED or GATED.  To verify, run "ps aux | grep -e routed -e gated"
<P>
</LI>
<LI>Post your question to the IP Masquerade Mailing List (see next the FAQ section for details).  Please only use this if you cannot find the answer from the IP Masquerading Archive.  Be sure to include all the information requested in the 
<A HREF="IP-Masquerade-HOWTO-5.html#Testing">Testing</A>
 section in your email!!
<P>
</LI>
<LI>Post your question to a related Linux NNTP newsgroup.
<P>
</LI>
<LI>Send email to 
<A HREF="mailto:ambrose@writeme.com">ambrose@writeme.com</A> and 
<A HREF="mailto:dranch@trinnet.net">dranch@trinnet.net</A>.   You have a better chance of getting a reply from the IP Masquerading Email list than either of us.  
<P>
</LI>
<LI>Check your configurations again :-)</LI>
</UL>
<P>
<A NAME="Masq-List"></A> <H2><A NAME="ss7.5">7.5 How do I join or view the IP Masquerade and/or IP Masqurade Developers mailing lists and archives?</A>
</H2>

<P>There are two ways to join the two Linux IP Masquerading mailing lists.  The first way is to send an email to 
<A HREF="mailto:masq-request@indyramp.com">masq-request@indyramp.com</A>.  To join the Linux IP Masquerading Developers mailing list, send an email to 
<A HREF="mailto:masq-dev-request@indyramp.com">masq-dev-request@indyramp.com</A>.  Please see the bullet below for more details.
<P>
<UL>
<LI>Subscribe via email:  Now put the word "subscribe" in either the subject or body of the e-mail message.  If you want to only subscribe to the Digest version of either the main MASQ or MASQ-DEV list (all e-mails on the given list during the week are sent to you in one big email), put the words "subscribe digest" instead in either the subject or body of the e-mail message.
<P>Once the server receives your request, it will subscribe you to your requested list and give you a PASSWORD.  Save this password as you will needed to to later unsubscribe from the list or change your options.
</LI>
</UL>
<P>The second method is to use a WWW browser and subscribe via a form at 
<A HREF="http://www.indyramp.com/masq-list/">http://www.indyramp.com/masq-list/</A> for the main MASQ list or 
<A HREF="http://www.indyramp.com/masq-dev-list/">http://www.indyramp.com/masq-dev-list/</A> for the MASQ-DEV list.
<P>
<P>Once subscribed, you will get emails from your subscribed list.  It should be also noted that both subscribed and NON-subscribed users can access the two list's archives.  To do this, please see the above two WWW URLs for more details.
<P>Lastly, please note that you can only post to the MASQ list from an account/address you originally subscribed from.
<P>If you have any problem regarding the mailing lists or the mailing list archive, please contact 
<A HREF="mailto:masq-owner@indyramp.com">Robert Novak</A>. 
<P>
<A NAME="what-is-masq"></A> <H2><A NAME="ss7.6">7.6 How does IP Masquerade differ from Proxy or NAT services? </A>
</H2>

<P>
<PRE>

Proxy:  Proxy servers are available for: Win95, NT, Linux, Solaris, etc.

                Pro:    + (1) IP address ; cheap
                        + Optional caching for better performance (WWW, etc.)

                Con:    - All applications behind the proxy server must both SUPPORT 
                          proxy services (SOCKS) and be CONFIGURED to use the Proxy 
                          server
                        - Screws up WWW counters and WWW statistics

         A proxy server uses only (1) public IP address, like IP MASQ, and acts  
         as a translator to clients on the private LAN (WWW browser, etc.).
         This proxy server receives requests like TELNET, FTP, WWW, 
         etc. from the private network on one interface.  It would then in turn,
         initiate these requests as if someone on the local box was making the
         requests.   Once the remote Internet server sends back the requested
         information, it would re-translate the TCP/IP addresses back to the 
         internal MASQ client and send traffic to the internal requesting host.  
         This is why it is called a PROXY server.  

                Note:  ANY applications that you might want to use on the 
                        internal machines *MUST* have proxy server support 
                        like Netscape and some of the better TELNET and FTP 
                        clients.  Any clients that don't support proxy servers 
                        won't work.

         Another nice thing about proxy servers is that some of them
         can also do caching (Squid for WWW).  So, imagine that you have 50 
         proxied hosts all loading Netscape at once.  If they were installed 
         with the default homepage URL, you would have 50 copies of the same 
         Netscape WWW page coming over the WAN link for each respective computer.  
         With a caching proxy server, only one copy would be downloaded by the proxy
         server and then the proxied machines would get the WWW page from the 
         cache.  Not only does this save bandwidth on the Internet connection, 
         it will be MUCH MUCH faster for the internal proxied machines.



MASQ:    IP Masq is available on Linux and a few ISDN routers such
 or      as the Zytel Prestige128, Cisco 770, NetGear ISDN routers, etc.
1:Many
 NAT     
                Pro:    + Only (1) IP address needed (cheap)
                        + Doesn't require special application support
                        + Uses firewall software so your network can become
                          more secure

                Con:    - Requires a Linux box or special ISDN router
                          (though other products might have this..  )
                        - Incoming traffic cannot access your internal LAN
                          unless the internal LAN initiates the traffic or
                          specific port forwarding software is installed.
                          Many NAT servers CANNOT provide this functionality.
                        - Special protocols need to be uniquely handled by
                          firewall redirectors, etc.  Linux has full support
                          for this (FTP, IRC, etc.) capabilty but many routers
                          do NOT (NetGear DOES). 

         Masq or 1:Many NAT is similar to a proxy server in the sense that the 
         server will do IP address translating and fake out the remote server 
         (WWW for example) as if the MASQ server made the request instead of an 
         internal machine.  
        
         The major difference between a MASQ and PROXY server is that MASQ servers
         don't need any configuration changes to all the client machines.  Just 
         configure them to use the linux box as their default gateway and everything 
         will work fine.  You WILL need to install special Linux modules for things 
         like RealAudio, FTP, etc. to work)!  

         Also, many people use IP MASQ for TELNET, FTP, etc. *AND* also setup a 
         caching proxy on the same Linux box for WWW traffic for the additional 
         performance.


NAT:     NAT servers are available on Windows 95/NT, Linux, Solaris, and some 
         of the better ISDN routers (not Ascend)         

                Pro:    + Very configurable
                        + No special application software needed

                Con:    - Requires a subnet from your ISP (expensive)

         Network Address Translation is a name for a box that would have a pool of 
         valid IP addresses on the Internet interface that it can use.  When on the
         Internal network wanted to goto the Internet, it associates an available 
         VALID IP address from the Internet interface to the original requesting 
         PRIVATE IP address.  After that, all traffic is re-written from the NAT 
         public IP address to the NAT private address.  Once the associated PUBLIC 
         NAT address becomes idle for some pre-determined amount of time, the 
         PUBLIC IP address is returned back into the public NAT pool.  

         The major problem with NAT is, once all of the free public IP addresses are
         used, any additional private users requesting Internet service are out of
         luck until a public NAT address becomes free.
</PRE>
<P>For an excellent and very comprehensive description of the various forms of
NAT, please see:
<UL>
<LI>
<A HREF="http://www.suse.de/~mha/linux-ip-nat/diplom/nat.html">http://www.suse.de/~mha/linux-ip-nat/diplom/nat.html</A></LI>
</UL>
<P>Here is another good site to learn about NAT though many of the URLs are old but still valid:
<UL>
<LI>
<A HREF="http://www.linas.org/linux/load.html">http://www.linas.org/linux/load.html</A></LI>
</UL>
<P>This is a great URL for learning about other NAT solutions for Linux as well as
other platforms:
<UL>
<LI>
<A HREF="http://www.uq.net.au/~zzdmacka/the-nat-page/">http://www.uq.net.au/~zzdmacka/the-nat-page/</A></LI>
</UL>
<P>
<P>
<H2><A NAME="ss7.7">7.7 Are there any GUI firewall creation/management tools? </A>
</H2>

<P>
<P>Yes!  They vary in user interface, complexity, etc. but they are quite good though most are only for the IPFWADM tool so far.  Here is a short list of available tools in alphabetical order.  If you know of any others or have any thoughts on which ones are good/bad/ugly, please email David.
<P>
<UL>
<LI>John Hardin's 
<A HREF="http://www.wolfenet.com/~jhardin/ipfwadm.html">IPFWADM Dot file generator</A> - a IPCHAINS version is in the works
<P>
</LI>
<LI>Sonny Parlin's 
<A HREF="http://www.innertek.com">fBuilder</A>: From the author of FWCONFIG, this new solution is fully WWW based and offers redundancy options, etc for both IPCHAINS and NetFilter.
<P>
</LI>
<LI>William Stearns's 
<A HREF="http://www.pobox.com/~wstearns/mason/">Mason</A> - A Build-a-ruleset on-the-fly type system
</LI>
</UL>
<P>
<P>
<H2><A NAME="ss7.8">7.8 Does IP Masquerade work with dynamically assigned IP addresses? </A>
</H2>

<P><B>Yes</B>, it works with either dynamic IP addressed assigned by your ISP via either PPP or a DHCP/BOOTp server.  As long as you have an valid Internet IP address, it should work.  Of course, static IP works too.  Yet, if you plan on implementing a strong IPFWADM/IPCHAINS ruleset and/or plan on using a Port forwarder, your ruleset will have to be re-executed everytime your IP address changes.  Please see the top of 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#TrinityOS">TrinityOS - Section 10</A> for additional help with strong firewall rulesets and Dynamic IP addresses.  
<P>
<H2><A NAME="ss7.9">7.9 Can I use a cable modem (both bi-directional and with modem returns), DSL, satellite link, etc. to connect to the Internet and use IP Masquerade?</A>
</H2>

<P>
<P><B>Yes</B>, as long as Linux supports that network interface, it should work.  If you receive a dynamic IP address, please see the URL under the "Does IP Masquerade work with dynamically assigned IP" FAQ item above.
<P>
<H2><A NAME="ss7.10">7.10 Can I use Diald or the Dial-on-Demand feature of PPPd with IP MASQ?</A>
</H2>

<P>
<P>Definitely!  IP Masquerading is totally transparent to Diald or PPP.  The only thing that might become
an issue is if you use STRONG firewall rulesets with dynamic IP addresses.  See the FAQ item, "Does IP Masquerade work with dynamically assigned IP addresses?" above for more details.
<P>
<H2><A NAME="ss7.11">7.11 What applications are supported with IP Masquerade?</A>
</H2>

<P>It is very difficult to keep track of a list of "working applications".  However, most of the normal Internet applications are supported, such as WWW browsing (Netscape, MSIE, etc.), FTP (such as WS_FTP), TELNET, SSH, RealAudio, POP3 (incoming email - Pine, Eudora, Outlook), SMTP (outgoing email), etc.  A somewhat more complete list of MASQ-compatible clients can be found in the 
<A HREF="IP-Masquerade-HOWTO-6.html#Clients">Clients</A>
 section of this HOWTO.
<P>Applications involving more complicated protocols or special connection methods such as video conferencing software need special helper tools.  
<P>For more detail, please see the 
<A HREF="http://www.tsmservices.com/masq">Linux IP masquerading Applications</A> page.
<P>
<H2><A NAME="ss7.12">7.12 How can I get IP Masquerade running on Redhat, Debian, Slackware, etc.? </A>
</H2>

<P>No matter what Linux distribution you have, the procedures for setting up IP Masquerade mentioned in this HOWTO should apply.  Some distributions may have GUI or special configuration files that make the setup easier.  We try our best to write the HOWTO as general as possible.
<P>
<P>
<H2><A NAME="ss7.13">7.13 TELNET connections seem to break if I don't use them often.  Why is that? </A>
</H2>

<P>IP Masq, by default, sets its timers for TCP session, TCP FIN, and UDP traffic to 15 minutes.  It is recommend to use the following settings (as already shown in this HOWTO's /etc/rc.d/rc.firewall ruleset) for most users:
<P>Linux 2.0.x with IPFWADM:
<P>
<PRE>
# MASQ timeouts 
#
#   2 hrs timeout for TCP session timeouts
#  10 sec timeout for traffic after the TCP/IP "FIN" packet is received
#  60 sec timeout for UDP traffic (MASQ'ed ICQ users must enable a 30sec firewall timeout in ICQ itself) 
#
/sbin/ipfwadm -M -s 7200 10 60
</PRE>
<P>
<P>Linux 2.2.x with IPCHAINS:
<P>
<PRE>
# MASQ timeouts
#
#   2 hrs timeout for TCP session timeouts
#  10 sec timeout for traffic after the TCP/IP "FIN" packet is received
#  60 sec timeout for UDP traffic (MASQ'ed ICQ users must enable a 30sec firewall timeout in ICQ itself)
#
/ipchains -M -S 7200 10 60
</PRE>
<P>
<P>
<H2><A NAME="ss7.14">7.14 When my Internet connection first comes up, nothing works.  If I try again, everything then works fine.  Why is this?</A>
</H2>

<P>The reason is because you have a dynamic IP address and when your Internet connection first comes up, IP Masquerade doesn't know its IP address.  There is a solution to this.  In your /etc/rc.d/rc.firewall ruleset, add the following:
<P>
<PRE>
# Dynamic IP users:
#
#   If you get your IP address dynamically from SLIP, PPP, or DHCP, enable this following
#       option.  This enables dynamic-ip address hacking in IP MASQ, making the life
#       with Diald and similar programs much easier.
#
echo "1" > /proc/sys/net/ipv4/ip_dynaddr
</PRE>
<P>
<A NAME="MTU-issues"></A> <H2><A NAME="ss7.15">7.15 ( MTU ) - IP MASQ seems to be working fine but some sites don't work.  This usually happens with WWW and FTP.</A>
</H2>

<P>There is two possible reasons for this.  The first one is VERY common and the second is very UNCOMMON.
<P>
<UL>
<LI> As of the 2.0.38 and 2.2.9+ Linux kernels, there is a debatable BUG in the Masquerade code.  
<P>Some users point their finger to the fact that IPMASQ might have problems with packets that have the DF or "Don't Fragment" bit set.  Basically, when a MASQ box connects to the Internet with an MTU of anything less than 1500, some packets will have the DF field set.  Though changing the MTU 1500 on the Linux box will seemingly fix the problem, the possible bug is still there.  What is believed to be happening is that the MASQ code is not properly re-writing the returning ICMP packets with the ICMP 3 Sub 4 code back to the originating MASQed computer.  Because of this, the packets get dropped.  
<P>Other users point their finger at the adminstrators of the problem remote sites (typically SSL connected sites, etc) and say that because they are filtering ALL FORMS of ICMP (including Type4 - Fragmentation Needed) messages in a fray of security paranoia, they are breaking the fundamental aspects of the TCP/IP protocol.  
<P>Both arguments have valid points and people from each camp continue to debate
this to this day.  If you are a network programmer and you think you can either fix or surmise this.. PLEASE TRY!  For more details, check out this following 
<A HREF="http://www.tux.org/hypermail/linux-kernel/1999week10/0124.html">MTU Thread from the Linux-Kernel</A> list.
<P>
<P>No worries though.  A perfectly good workaround is to change your Internet link's MTU to 1500.  Now some users will balk at this because it can hurt some latency specific programs like TELNET and games but the impact is only slight.  On the flip site, most HTTP and FTP traffic will SPEED UP!  
<P>[ -- If you have a PPPoE connection for your DSL/Cablemodem or choose not to change the MTU to 1500, see below for a different solution. -- ]
<P>To fix this, first see what your MTU for your Internet link is now.  To do this, run "/bin/ifconfig".  Now look at the lines that corresponds to your Internet connection and look for the MTU.  This NEEDs to be set to 1500.  Usually, Ethernet links will default to this but serial PPP links will default to 576.
</LI>
</UL>
<P>
<H3>Changing the MTU of a PPP link:</H3>

<P>
<UL>
<LI>To fix the MTU issue on your PPP link, edit your /etc/ppp/options file and towards the top, add the following text on two seperate lines: "mtu 1500" and "mru 1500".  Save these new changes and then restart PPP.  Like above, verify that your PPP link now has the correct MTU and MTU.  
<P>
</LI>
<LI> To fix the MTU issue on a standard Ethernet link to your bridged or routed DSL, Cablemodem, etc. connection, you need to edit the correct network startup scripts for your Linux distribution.  Please see the 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#TrinityOS">TrinityOS - Section 16</A> document for network optimizations.
<P>
</LI>
</UL>
<H3>Old UNIX Serial interfaces:</H3>

<P>
<UL>
<LI>Lastly, though this isn't a common problem, some people have found the following to be their solution.  With PPP users, verify what port is your PPPd code connecting to.  Is it a  /dev/cua* port or a /dev/ttyS* port?  It NEEDS to be a /dev/ttyS* port.  The cua style is OLD and it breaks some things in very odd ways.</LI>
</UL>
<P>
<H3>PPPoE Users:</H3>

<P>For those users who use PPPoE (that has a maximum MTU of 1490) or for those users who choose NOT to use an MTU of 1500, not is all lost.  If you reconfigure ALL of your MASQed PCs to use the SAME MTU as your external Internet link's MTU, everything should work fine.  It should be noted that some PPPoE ISPs might require a MTU of 1460 for proper connectivity.
<P>How do you do this?  Follow these simple steps for your respective operating system.  
<P>The follow examples show an example of an MTU of 1490 for typical PPPoE connections for some DSL and Cablemodem users.  It is recommended to use the HIGHEST values possible for all connections that are 128Kb/s and faster.  
<P>The only real reason to use smaller MTUs is to lower latency but at the cost 
of throughput.  Please see:
<P>
<A HREF="http://www.ecst.csuchico.edu/~dranch/PPP/ppp-performance.html#mtu">http://www.ecst.csuchico.edu/~dranch/PPP/ppp-performance.html#mtu</A><P>for more details on this topic.
<P>
<P>*** If you have had SUCCESS, FAILURE, or have procedures for OTHER operating
*** systems, please email David Ranch.  Thanks!
<P>
<H3>Linux:</H3>

<P>
<HR>
<PRE>

1. The setting of MTU can vary from Linux distribution to distribution.  

   For Redhat: You need to edit the various "ifconfig" statements in 
               the /sbin/ifup script

   For Slackware: You need to edit the various "ifconfig" statements in 
                  the /etc/rc.d/rc1.inet

2. Here is one good, any-distribution-will-work example, edit the 
   /etc/rc.d/rc.local file and put the following at the END of the file: 

        echo "Changing the MTU of ETH0"
        /sbin/ifconfig eth0 mtu 1490

     Replace "eth0" with the interface name that is the machine's upstream 
     connection that is connected to the Internet.

3. For advanced options like "TCP Receive Windows" and such, detailed examples
   on how to edit the respective networking scripts for your specific Linux
   distro, etc., please see Chapter 16 of 
   http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#trinityos 
</PRE>
<HR>
<P>
<H3>MS Windows 95: </H3>

<P>
<HR>
<PRE>
1. Making ANY changes to the Registry is inheritantly risky but
   with a backup copy, you should be safe.  Proceed at your OWN RISK.

2. Goto Start-->Run-->RegEdit

3. You should make a backup copy fo your Registry before doing anything.  To
   do this, copy the "user.dat" and "system.dat" files from the \WINDOWS 
   directory and put them into a safe place.  It should be noted that the
   previously mentioned method of using "Regedit: Registry-->Export Registry 
   File-->Save a copy of your registry" would only do Registry MERGES and NOT 
   do a replacement.

4. Search though each of the Registry trees that end in "n" (e.g. 0007) 
   that have a Registry entry called "IPAddress" that has the IP address
   of your NIC.  Under that key, add the following:

   From http://support.microsoft.com/support/kb/articles/q158/4/74.asp

     [Hkey_Local_Machine\System\CurrentControlset\Services\Class\NetTrans\000n]

         type=DWORD
         name="MaxMTU"           (Do NOT include the quotes)
         value=1490 (Decimal)    (Do NOT include the text "(Decimal)")

         type=DWORD
         name="MaxMSS"           (Do NOT include the quotes)
         value=1450 (Decimal)    (Do NOT include the text "(Decimal>")


5. You can also change the "TCP Receive Window" which sometimes
   increases network performance SUBSTANTIALLY.  If you notice your
   throughput has DECREASED, put these items BACK to their original 
   settings and reboot.

     [HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\VxD\MSTCP]
        type=DWORD
        name="DefaultRcvWindow"   (Do NOT include the quotes)
        value=32768 (Decimal)     (Do NOT include the text "(Decimal>")

        type=DWORD
        name="DefaultTTL"         (Do NOT include the quotes)
        value=128 (Decimal)       (Do NOT include the text "(Decimal>")


6. Reboot to make the changes take effect.
</PRE>
<HR>
<P>
<H3>MS Windows 98: </H3>

<P>
<HR>
<PRE>

1. Making ANY changes to the Registry is inheritantly risky but
   with a backup copy, you should be safe.  Proceed at your OWN RISK.

2. Goto Start-->Run-->RegEdit

3. You should make a backup copy fo your Registry before doing anything.  To
   do this, copy the "user.dat" and "system.dat" files from the \WINDOWS 
   directory and put them into a safe place.  It should be noted that the
   previously mentioned method of using "Regedit: Registry-->Export Registry 
   File-->Save a copy of your registry" would only do Registry MERGES and NOT 
   do a replacement.

4. Search though each of the Registry trees that end in "n" (e.g. 0007) 
   that have a Registry entry called "IPAddress" that has the IP address
   of your NIC.  Under that key, add the following:

   From http://support.microsoft.com/support/kb/articles/q158/4/74.asp

     [Hkey_Local_Machine\System\CurrentControlset\Services\Class\NetTrans\000n]
         type=STRING
         name="MaxMTU"            (Do NOT include the quotes)
         value=1490 (Decimal)     (Do NOT include the text "(Decimal)")


5. You can also change the "TCP Receive Window" which sometimes
   increases network performance SUBSTANTIALLY.  If you notice your
   throughput has DECREASED, put these items BACK to their original 
   settings and reboot.

     [HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\VxD\MSTCP]

        type=STRING
        name="DefaultRcvWindow"    (Do NOT include the quotes)
        value=32768 (Decimal)      (Do NOT include the text "(Decimal>")

        type=STRING
        name="DefaultTTL"          (Do NOT include the quotes)
        value=128 (Decimal)        (Do NOT include the text "(Decimal>")


6. Reboot to make the changes take effect.
</PRE>
<HR>
<P>
<H3>MS Windows NT 4.x</H3>

<P>
<HR>
<PRE>

1. Making ANY changes to the Registry is inheritantly risky but
   with a backup copy, you should be safe.  Proceed at your 
   OWN RISK.

2. Goto Start-->Run-->RegEdit

3. Registry-->Export Registry File-->Save a copy of your registry
   to a reliable place

4. Create the following keys in the the Registry trees two
   possible Registry trees.  Multiple entries are for various 
   network devices like DialUp Networking (ppp), Ethernet NICs, 
   PPTP VPNs, etc.

   http://support.microsoft.com/support/kb/articles/Q102/9/73.asp?LN=EN-US&amp;SD=gn&amp;FR=0


   [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Parameters\Tcpip]
                     and
   [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\&lt;Adapter-name>\Parameters\Tcpip]

      Replace "&lt;Adapter-Name>" with the respective name of your uplink LAN NIC 
      interface

         type=DWORD
         name="MTU"              (Do NOT include the quotes)
         value=1490 (Decimal)    (Do NOT include the text "(Decimal>")

       (Do NOT include the quotes)


 *** If you know how to also change the MSS, TCP Window Size, and the
 *** TTL parameters in NT 4.x, please email dranch@trinnet.net as I 
 *** would love to add it to the HOWTO.

5. Reboot to make the changes take effect.
</PRE>
<HR>
<P>
<H3>MS Windows 2000</H3>

<P>
<HR>
<PRE>
1. Making ANY changes to the Registry is inheritantly risky but
   with a backup copy, you should be safe.  Proceed at your 
   OWN RISK.

2. Goto Start-->Run-->RegEdit

3. Registry-->Export Registry File-->Save a copy of your registry
   to a reliable place

4. Navigate down to the key:

   [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Inter
faces\&lt;ID for Adapter>

   Each ID Adapter has default keys for DNS, TCP/IP address, Default Gateway, 
   subnet mask, etc. Find the key one that is for your network card.

5. Create the following Entry:

      type=DWORD
      name="MTU"                                (Do NOT include the quotes)
      value=1490 (Decimal)      (Do NOT include the text "(Decimal)")

http://support.microsoft.com/support/kb/articles/Q120/6/42.asp?LN=EN-US&amp;SD=gn&amp;FR=0


 *** If you know how to also change the MSS, TCP Window Size, and the
 *** TTL parameters in NT 2000, please email dranch@trinnet.net as I 
 *** would love to add it to the HOWTO.

5. Reboot to make the changes take effect.
</PRE>
<HR>
<P>As stated above, if you know how to make similar changes like these to other OSes like OS/2, MacOS, etc. please email 
<A HREF="mailto:dranch@trinnet.net">David Ranch</A> so it can be included in the HOWTO.
<P>
<P>
<H2><A NAME="ss7.16">7.16 MASQed FTP clients don't work. </A>
</H2>

<P>Check to see that the "ip_masq_ftp" module is loaded.  To do this, log into the MASQ server and run the command "/sbin/lsmod".  If you don't see the "ip_masq_ftp" module loaded, make sure that you followed the BASIC /etc/rc.d/rc.firewall recommendations found in 
<A HREF="IP-Masquerade-HOWTO-3.html#firewall-examples">firewall-examples</A>
 section.  If you are implimenting your own ruleset, make sure you at include most of the examples from the HOWTO or you will have lots of continuing problems.
<P>
<H2><A NAME="ss7.17">7.17 IP Masquerading seems slow</A>
</H2>

<P>There might be a few reasons for this:
<UL>
<LI>You might be expecting more out of your modem line than is realistic.  Lets do the math for a typical 56k modem connection:
<OL>
<LI>56k modems = 56,000 bits per second.</LI>
<LI>You really DON'T have a 56k modem but a 52k modem per US FCC limitations.</LI>
<LI>You'll almost NEVER get 52k, the best connection I used to get was &nbsp;48k</LI>
<LI>48,000 bits per second is 4,800 BYTES per second (8 bits to a byte +
2 bits for the START and STOP RS-232 serial bits)</LI>
<LI>With an MTU of 1500, you will get (3.2) packets in one second.  Since
this will involve fragmentation, you need to round DOWN to (3) packets per
second.</LI>
<LI>Again with MTU of 1500, thats 3.2 x 40 bytes of TCP/IP overhead (8%)</LI>
<LI>So the BEST throughput you could hope for is 4.68KB/s w/o compression.
Compression, be it v.42bis hardware compression, MNP5, or MS/Stac compression can yeild impressive numbers on highly compressable stuff like TEXT files but acutally slow things down when transfering pre-compressed files like ZIPs, MP3s, etc.</LI>
</OL>

<P>
</LI>
<LI>Ethernet attached setups (DSL, Cablemodem, LANs, etc)
<P>
<UL>
<LI>Make sure you don't have both your INTERNAL and EXTERNAL networks running on the same network card with the "IP Alias" feature.  If you <EM>ARE</EM> doing this, it can be made to work but it will be excessively slow due to high levels of collisions, IRQ usage, etc.  It is highly recommended to get another network card so that the internal and external networks have their own interface.
<P>Make sure you have the right Ethernet settings for both SPEED and DUPLEX.  
<P>
<UL>
<LI>Some 10Mb/s Ethernet cards and most 100Mb/s cards support FULL Duplex connections.  Direct connections from Ethernet card to, say, DSL modem (without any hubs in between) *CAN* be set to FULL DUPLEX but only if the DSL modem supports it.  You should also be sure that you have Ethernet cables with all eight wires used and they are good quality.</LI>
<LI>Internal networks that use HUBs -cannot- use Full Duplex.  You need either a 10 or 100Mb.s Ethernet <EM>SWITCH</EM> to be able to do this.</LI>
<LI>Both auto 10/100Mb/s SPEED negotiation and Full/Half DUPLEX negotiation on Ethernet cards can wreck havoc on networks.  I recommend to hard code both the NIC speed and duplex into the NIC(s) if possible.  This is directly possible via Linux NIC kernel modules but isn't directly possible in monolithic kernels.  You will need to either use MII utililies from 
<A HREF="IP-Masquerade-HOWTO-8.html#Donald Becker's NIC drivers and utils FAQ-Hardware">Donald Becker's NIC drivers and utils FAQ-Hardware</A>
 or hardcode the kernel source.</LI>
</UL>
</LI>
</UL>
<P>
</LI>
<LI>Optimize your MTU and set the TCP Sliding window to at least 8192
<P>
<UL>
<LI>Though this is COMPLETELY out of the scope of this document, this helps QUITE A BIT on ANY network link you have be it an internal or external PPP, Ethernet, TokenRing, etc. link.  For more details, this topic is briefly touched on above in the 
<A HREF="#MTU-issues">MTU-issues</A>
 section.  For even more details, check out the Network Optimization section of 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#TrinityOS">TrinityOS - Section 16</A>.  </LI>
</UL>
<P>
</LI>
<LI>Serial based modem users with PPP
<P>
<UL>
<LI>If you have an external modem, make sure you have a good serial cable.  Also, many PCs have cheesy ribbon cables connecting the serial port from the motherboard or I/O card to the serial port connection.  If you have one of these, make sure it is in good condition.  Personally, I have ferrite coils (those grey-black metal like rings) around ALL of my ribbon cables.
<P>
</LI>
<LI>Make sure your MTU is set to 1500 as described in the FAQ section of this HOWTO above
<P>
</LI>
<LI>Make sure that your serial port is a 16550A or better UART.  Run "dmesg | more" to verify
<P>
</LI>
<LI>Setup IRQ-Tune for your serial ports
<P>
<UL>
<LI>On most PC hardware, the use of Craig Estey's 
<A HREF="http://www.best.com/~cae/irqtune/">IRQTUNE</A> tool and significantly increase serial port performance including SLIP and PPP connections.</LI>
</UL>
<P>
</LI>
<LI>Make sure that your serial port for your PPP connection is running at 115200 (or faster if both your modem and serial port can handle it.. a.k.a  ISDN terminal adapters)
<P>
<UL>
<LI>2.0.x kernels:  The 2.0.x kernels are kind of an odd ball because you can't directly tell the kernel to clock the serial ports at 115200.  So, in one of your startup scripts like the /etc/rc.d/rc.local or /etc/rc.d/rc.serial file, execute the following commands for a modem on COM2:  
<P>
<UL>
<LI> setserial /dev/ttyS1 spd_vhi
<P>
</LI>
<LI>In your PPPd script, edit the actual pppd execution line to include the speed "38400" per the pppd man page.</LI>
</UL>
<P>
</LI>
<LI>2.2.x kernels:  Unlike the 2.0.x kernels, both the 2.1.x and 2.2.x kernels don't have this "spd_vhi" issue.
<P>
<UL>
<LI>So, in your PPPd script, edit the actual pppd execution line to include the speed "115200" per the pppd man page.</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
<P>
</LI>
<LI>All interface types:
<P>
</LI>
</UL>
<P>
<H2><A NAME="ss7.18">7.18 IP Masquerading with PORTFWing seems to break when my line is idle for long periods</A>
</H2>

<P>If you have a DSL or Cablemode, this behavior is unfortunately quite common.
Basically what is happening is your ISP is putting your connection into a very
low priority queue to better service non-idle connections.  The problem is that
some enduser's connections will actually be taken OFFLINE until some traffic
from the user's DSL/Cablemodem connection wakens the ISP's hardware
<UL>
<LI><P>
</LI>
<LI>Some DSL installations can take an idle connection OFFLINE and only be checked for activity once every 30 seconds or so. </LI>
<LI>Some Cablemodem setups can set an idle connection into a low priority queue and only be checked for activity every minute or so.</LI>
</UL>
<P>What do I recommend to do?  Ping your default gateway every 30 seconds.  To do this, edit the /etc/rc.d/rc.local file and add the following to the bottom of the file:
<P>
<HR>
<PRE>
         ping -i 30 100.200.212.121 > /dev/null &amp;
</PRE>
<HR>
<P>Replace the 100.200.212.121 with your default router (upstream router).
<P>
<H2><A NAME="ss7.19">7.19 Now that I have IP Masquerading up, I'm getting all sorts of weird notices and errors in the SYSLOG log files.  How do I read the IPFWADM/IPCHAINS firewall errors?</A>
</H2>

<P>There is probably two common things that you are going to see:
<UL>
<LI><B>MASQ: Failed TCP Checksum error:</B>  You will see this error when a packet coming from the Internet gets corrupt in the data section of the packet but the rest of it "seems" ok.  When the Linux box receives this packet, it will calculate the CRC of the packet and determine that its corrupt.  On most machines running OSes like Microsoft Windows, they just silently drop the packets but Linux IP MASQ reports it.  If you get a LOT of them over your PPP link, first follow the FAQ entry above for "Masq is slow".  
<P>
</LI>
<LI>If all of those tips don't help, try adding the line "-vj" to your /etc/ppp/options file and restart PPPd.
<P>
</LI>
<LI><B>Firewall hits</B>:  Being on the Internet with a decent firewall, you are going to be surprised how many people are going to try to get into your Linux box!  So what do all these firewall logs mean?  
<P>From the 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#TrinityOS">TrinityOS - Section 10</A> doc:
<P>
<PRE>
        In the below rulesets, any lines that either DENY or REJECT any
        traffic also have a "-o" to LOG this firewall hit to the SYSLOG
        messages file found either in:

                Redhat:         /var/log
                Slackware:      /var/adm

        If you look at one of these firewall logs, do would see something like:

        ---------------------------------------------------------------------
        IPFWADM:
        Feb 23 07:37:01 Roadrunner kernel: IP fw-in rej eth0 TCP 12.75.147.174:1633 
           100.200.0.212:23 L=44 S=0x00 I=54054 F=0x0040 T=254

        IPCHAINS:
        Packet log: input DENY eth0 PROTO=17 12.75.147.174:1633 100.200.0.212:23 
          L=44 S=0x00 I=54054 F=0x0040 T=254
        ---------------------------------------------------------------------

  There is a LOT of information in this just one line.  Lets break out this example 
  so refer back to the original firewall hit as you read this.  Please note that this
  example is for IPFWADM though it is DIRECTLY readable for IPCHAINS users.

        --------------

        - This firewall "hit" occurred on "Feb 23 07:37:01"

        - This hit was on the "RoadRunner" computer.

        - This hit occurred on the "IP" or TCP/IP protocol

        - This hit came IN to ("fw-in") the firewall
                * Other logs can say "fw-out" for OUT or "fw-fwd" for FORWARD

        - This hit was then "rejECTED".  
                * Other logs can say "deny" or "accept"

        - This firewall hit was on the "eth0" interface (Internet link)

        - This hit was a "TCP" packet 

        - This hit came from IP address "12.75.147.174" on return port "1633".  

        - This hit was addressed to "100.200.0.212" on port "23" or TELNET.
                * If you don't know that port 23 is for TELNET, look at your 
                         /etc/services file to see what other ports are used for.

        - This packet was "44" bytes long

        - This packet did NOT have any "Type of Service" (TOS) set 
                --Don't worry if you don't understand this.. not required to know
                * divide this by 4 to get the Type of Service for ipchains users

        - This packet had the "IP ID" number of "18"
                --Don't worry if you don't understand this.. not required to know

        - This packet had a 16bit fragment offset including any TCP/IP packet 
          flags of "0x0000"
                --Don't worry if you don't understand this.. not required to know
                * A value that started with "0x2..." or "0x3..." means the "More
                  Fragments" bit was set so more fragmented packet will be coming in
                  to complete this one BIG packet.
                * A value which started with "0x4..." or "0x5..." means that the 
                  "Don't Fragment" bit is set.  
                * Any other values is the Fragment offset (divided by 8) to be later 
                  used to recombine into the original LARGE packet

        - This packet had a TimeToLive (TTL) of 20.   
                * Every hop over the Internet will subtract (1) from this number.  Usually,
                  packets will start with a number of (255) and if that number ever reaches 
                  (0), it means that realistically the packet was lost and will be deleted.  

  
</PRE>
<P>
</LI>
</UL>
<P>
<P>
<H2><A NAME="ss7.20">7.20 Can I configure IP MASQ to allow Internet users to directly contact internal MASQed servers?</A>
</H2>

<P>Yes!  With IPPORTFW, you can allow ALL or only a select few Internet hosts to contact ANY of your internal MASQed computers.  <B>This topic is completely covered in the 
<A HREF="IP-Masquerade-HOWTO-6.html#Forwarders">Forwarders</A>
 section of this HOWTO.</B>
<P>
<P>
<A NAME="No-Free-Ports"></A> <H2><A NAME="ss7.21">7.21 I'm getting "kernel: ip_masq_new(proto=UDP): no free ports." in my SYSLOG files.  Whats up?</A>
</H2>

<P>One of your internal MASQed machine is creating an abnormally high number of packets destined for the Internet.  As the IP Masq server builds the MASQ table and forwards these packets out over the Internet, the table is quickly filling.  Once the table is full, it will give you this error.
<P>The only application that I known that temporarily creates this situation is a gaming program called "GameSpy".  Why?  Gamespy builds a server list and then pings all of the servers in the list (1000s of game servers).  By creating all these pings, it creates 10,000s of quick connections in a VERY short time.  Until these sessions timeout via the IP MASQ timeouts, the MASQ tables become "FULL".  
<P>So what can you do about it?  Realistically, don't use programs that do things like this.  If you do get this error in your logs, find it and stop using it.  If you really like GameSpy, just don't do a lot of server refreshes.  Regardless, once you stop running this MASQ'ed program, this MASQ error will go away as these connections timeout in the MASQ tables.
<P>
<H2><A NAME="ss7.22">7.22 I'm getting "ipfwadm: setsockopt failed: Protocol not available" when I try to use IPPORTFW! </A>
</H2>

<P>If you get the error message "ipfwadm: setsockopt failed: Protocol not available", you AREN'T running your new kernel.  Make sure that you moved the new kernel over, re-run LILO, and then reboot again.
<P>Please see the end of the 
<A HREF="IP-Masquerade-HOWTO-6.html#Forwarders">Forwarders</A>
 section for full details.
<P>
<A HREF="http://support.microsoft.com/support/kb/articles/q172/2/27.asp">this Microsoft KnowledgeBase article</A>.
<H2></H2>

<P>The first work-around is to configure IPPORTFW from the 
<A HREF="IP-Masquerade-HOWTO-6.html#Forwarders">Forwarders</A>
 section and portfw TCP ports 137, 138, and 139 to the internal Windows machine's IP address.  Though this solution works, it will only works for ONE internal machine.
<P>The second solution is to install and configure 
<A HREF="http://www.samba.org">Samba</A> on the Linux MASQ server.  With Samba running, you can then map your internal Windows File and Print shares onto the Samba server.  Then, you can mount these newly mounted SMB shares to all of your external clients.  Configuring Samba is fully covered in a HOWTO found in a Linux Documentation Project and in the TrinityOS document as well.
<P>The third solution is to configure a VPN (virtual private network) between the two Windows machines or between the two networks.  This can either be done via the PPTP or IPSEC VPN solutions.  There is a 
<A HREF="#PPTP">PPTP</A>
 patch for Linux and also a full IPSEC implimentation available for both 2.0.x and 2.2.x kernels.  This solution will probably be the most reliable and secure method of all three solutions.
<P>All of these solutions are NOT covered by this HOWTO.  I recommend that you look at the TrinityOS documentation for IPSEC help and JJohn Hardin's PPTP page for more information.
<P><EM>Also PLEASE understand that Microsoft's SMB protocol is VERY insecure.  Because of this, running either Microsoft File and Print sharing or Windows Domain login traffic over the Internet without any encryption is a VERY BAD idea.</EM>
<P>
<P>
<H2><A NAME="ss7.24">7.24 ( IDENT ) - IRC won't work properly for MASQed IRC users.  Why?</A>
</H2>

<P>The main possible reason is because most common Linux distribution's IDENT or "Identity" servers can't deal with IP Masqueraded links.  No worries though, there are IDENTs out there that will work.
<P>Installing this software is beyond the scope of this HOWTO but each tool has its own documentation.  Here are some of the URLs:
<UL>
<LI>
<A HREF="http://freshmeat.net/projects/oidentd/homepage/">Oident</A> is a favorite IDENT server for MASQ users.
<P>
</LI>
<LI>
<A HREF="ftp://ftp.code.org/pub/linux/midentd/">Mident</A> is another popular IDENT server.
<P>
</LI>
<LI>
<A HREF="http://insecurity.net/sidentd.gz">Sident</A>
<P>
</LI>
<LI>
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/network/daemons/">Other Idents</A></LI>
</UL>
<P>Please note that some Internet IRCs servers still won't allow multiple connections from the same host even if they get Ident info and the users are different though.  Complain to the remote sys admin.  :)
<P>
<H2><A NAME="ss7.25">7.25 ( DCC ) - mIRC doesn't work with DCC Sends</A>
</H2>

<P>This is a configuration problem on your copy of mIRC.  To fix this, first disconnect mIRC from the IRC server.  Now in mIRC, go to File --> Setup and click on the "IRC servers tab".  Make sure that it is set to port 6667.  If you require other ports, see below.  Next, goto File --> Setup --> Local Info and clear the fields for Local Host and IP Address.  Now select the checkboxes for "LOCAL HOST" and "IP address" (IP address may be checked but disabled).  Next under "Lookup Method", configure it for "normal".  It will NOT work if "server" is selected.  That's it.  Try to the IRC server again.
<P>If you require IRC server ports other than 6667, (for example, 6969) you need to edit the /etc/rc.d/rc.firewall startup file where you load the IRC MASQ modules.  Edit this file and the line for "modprobe ip_masq_irc" and add to this line "ports=6667,6969".  You can add additional ports as long as they are separated with commas.
<P>Finally, close down any IRC clients on any MASQed machines and re-load the IRC MASQ module:
<P>/sbin/rmmod ip_masq_irc
/etc/rc.d/rc.firewall
<P>
<P>
<A NAME="aliasing"></A> <H2><A NAME="ss7.26">7.26 ( IP Aliasing ) - Can IP Masquerade work with only ONE Ethernet network card?</A>
</H2>

<P><B>Yes and no</B>. With the "IP Alias" kernel feature, users can setup multiple aliased interfaces such as eth0:1, eth0:2, etc but its is NOT recommended to use aliased interfaces for IP Masquerading.  Why?  Providing a secure firewall becomes very difficult with a single NIC card.  In addition to this, you will experience an abnormal amount of errors on this link since incoming packets will almost simultaneously be sent out at the same time.  Because of all this and NIC cards now cost less than $10, I highly recommend to just get a NIC card for each MASQed network segment.
<P>Users should also understand that IP Masquerading will only work out a physical interface such as eth0, eth1, etc.  MASQing out an aliased interface such as "eth0:1, eth1:1, etc" will NOT work.  In other words, the following WILL NOT WORK:
<P>
<UL>
<LI> /sbin/ipfwadm -F -a m -W eth0:1 -S 192.168.0.0/24 -D 0.0.0.0/0</LI>
<LI> /sbin/ipchains -A forward -i eth0:1 -s 192.168.0.0/24 -j MASQ"</LI>
</UL>
<P>If you are still interested in using aliased interfaces, you need to enable the "IP Alias" feature in the kernel.  You will then need to re-compile and reboot.   Once running the new kernel, you need to configure Linux to use the new interface (i.e. /dev/eth0:1, etc.).  After that, you can treat it as a normal Ethernet interface with some restrictions like the one above.
<P>
<H2><A NAME="ss7.27">7.27 ( MULTI-LAN ) - I have two MASQed LANs but they cannot communicate with eachother!</A>
</H2>

<P>Please see the 
<A HREF="IP-Masquerade-HOWTO-6.html#multiple-masqed-lans">multiple-masqed-lans</A>
 section for full details.
<P>
<A NAME="shaping"></A> <H2><A NAME="ss7.28">7.28 ( SHAPING ) - I want to be able to limit the speed of specific types of traffic</A>
</H2>

<P>This topic really doesn't have anything to do with IPMASQ and everthing to do with Linux's built-in traffic shaping and rate-limiting.  Please see the /usr/src/linux/Documentation/networking/shaper.txt  file from your local kernel sources for more details.
<P>You will also find more information about this including several URLs under the 
<A HREF="IP-Masquerade-HOWTO-2.html#2.2.x-Requirements">2.2.x-Requirements</A>
 section for IPROUTE2.
<P>
<H2><A NAME="ss7.29">7.29 ( ACCOUNTING ) -  I need to do accounting on who is using the network</A>
</H2>

<P>Though this doesn't have much to do with IPMASQ, here are a few ideas.  If you
kow of any better solutions, please email the author of this HOWTO so they can
be added to the HOWTO.
<P>
<UL>
<LI>Idea #1:  Say you want to log ALL WWW traffic going out to the Internet.  You can setup a firewall rule to ACCEPT PORT 80 traffic with with the SYN bit set and LOG it.  Now mind you, this can create VERY large log files.</LI>
<LI>Idea #2:  You could run the command "ipchains -L -M" once a second and log all of those entries.  You then could write a program to merge this information into one large file.</LI>
</UL>
<P>
<H2><A NAME="ss7.30">7.30 ( MULTIPLE IPs ) -  I have several EXTERNAL IP addresses that I want to</A>
PORTFW to several internal machines.  How do I do this?</H2>

<P>You DON'T.  MASQ is a 1:Many NAT setup which not the correct tool to do what
you are looking for.  You are looking for a Many:Many NAT solution which is
traditional NAT setup.  Give a look at the 
<A HREF="#shaping">shaping</A>
 FAQ entry below
for more details on the IPROUTE2 tool that will do what you need.  
<P>For people out there who are considering enabling multiple IP addresses on one internal NIC using "IP Alias" and then PORTFWed ALL of those ports (0-65535) and used IPROUTE2 to maintain the proper source/destination IP pairs, this has been done SUCCESSFULLY on 2.0.x kernels and less successfully on 2.2.x kernels.  Regardless of success, it isn't the proper way to do it and is not a supported MASQ configuration.  Please, give IPROUTE2 a look.. its the right way to do true NAT.
<P>One thing to also note:
<P>If you have a bridged DSL or Cablemodem connection (not PPPoE), things are a
little more difficult because your setup isn't routed.  No worries though,
check out the "Bridge+Firewall, Linux Bridge+Firewall Mini-HOWTO" on the LDP.
It will teach you how to get your Linux box to support multiple IP addresses on
a single interface!
<P>
<H2><A NAME="ss7.31">7.31 I'm trying to use the NETSTAT command to show my Masqueraded connections but its not working</A>
</H2>

<P>There might be a problem with the "netstat" program in 2.0.x-based Linux distros.  After a Linux reboot, running "netstat -M" works fine but after a MASQed computer runs some successful ICMP traffic like ping, traceroute, etc., you might see something like:
<P>
<PRE>
masq_info.c: Internal Error `ip_masquerade unknown type'.
</PRE>
<P>The workaround for this is to use the "/sbin/ipfwadm -M -l" command.  You will also notice that once the listed ICMP masquerade entries timeout, "netstat" works again.
<P>
<P>
<A NAME="PPTP"></A> <H2><A NAME="ss7.32">7.32 ( VPNs ) - I would like to get Microsoft PPTP (GRE tunnels) and/or IPSEC (Linux SWAN) tunnels running through IP MASQ </A>
</H2>

<P>This IS possible.  Though it is somewhat out of the scope of this document, check out John Hardin's 
<A HREF="ftp://ftp.rubyriver.com/pub/jhardin/masquerade/ip_masq_vpn.html">PPTP Masq</A> page for 
all the details.
<P>
<H2><A NAME="ss7.33">7.33 I want to get the XYZ network game to work through IP MASQ but it won't work.  Help!</A>
</H2>

<P>First, check 
<A HREF="http://www.tsmservices.com/masq">Steve Grevemeyer's MASQ Applications page</A>.  If your solution isn't listed there, try patching your Linux kernel with Glenn Lamb's 
<A HREF="ftp://ftp.netcom.com/pub/mu/mumford/loose-udp-2.0.36.patch.gz">LooseUDP</A> patch which is covered in the 
<A HREF="IP-Masquerade-HOWTO-6.html#LooseUDP">LooseUDP</A>
 section above.  Also check out Dan Kegel's 
<A HREF="http://www.alumni.caltech.edu/~dank/peer-nat.html">NAT Page</A> for more information.
<P>If you are technically inclined, use the program "tcpdump" and sniff your network.  Try to find out what protocols and port numbers your XYZ game is using.  With this information in hand, subscribe to the 
<A HREF="mailto://masq-subscribe@tiffany.indyramp.com">IP Masq email list</A> and email your results for help.
<P>
<H2><A NAME="ss7.34">7.34 IP MASQ works fine for a while but then it stops working.  A reboot seems to fix this for a while.  Why?</A>
</H2>

<P>I bet you are using IPAUTOFW and/or you have it compiled into the kernel huh??  This is a known problem with IPAUTOFW.  It is recommend to NOT even configure IPAUTOFW into the Linux kernel and use IPPORTFW option instead.  This is all covered in more detail in the 
<A HREF="IP-Masquerade-HOWTO-6.html#Forwarders">Forwarders</A>
 section.
<P>
<H2><A NAME="ss7.35">7.35 Internal MASQed computers cannot send SMTP or POP-3 mail!</A>
</H2>

<P>      
Though this isn't a Masquerading issue per se but many people do this so it should be mentioned.  
<P>SMTP:  The issue is that you are probably using your Linux box as a SMTP relay server and get the following error:
<P>
<BLOCKQUOTE><CODE>
"error from mail server: we do not relay"
</CODE></BLOCKQUOTE>

Newer versions of Sendmail and other Mail Transfer Agents (MTAs) disable relaying by default (this is a good thing).  So do the following to fix this:
<P>
<UL>
<LI>Sendmail:  Enable specific relaying for your internal MASQed machines by editing the /etc/sendmail.cw file and add the hostname and domain name of your internal MASQed machine.  You should also check to see that the /etc/hosts file has the IP address and Fully Qualified Domain Name (FQDN) configured in it.  Once this is done, you need to restart Sendmail for it to re-read its configuration files.  This is covered in 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html#TrinityOS">TrinityOS - Section 25</A>
</LI>
</UL>
<P>POP-3:  Some users configure their internal MASQ'ed computer's POP-3 clients to connect to some external SMTP server.  While this is fine, many SMTP servers out there will try to IDENT your connection on port 113.  Most likely your problem stems around your default Masquerade policy being set to DENY.  This is BAD.  Set it to REJECT and re-run your rc.firewall ruleset.
<P>
<A NAME="iproute2"></A> <H2><A NAME="ss7.36">7.36 ( IPROUTE2 ) - I need different internal MASQed networks to exit on different external IP addresses</A>
</H2>

<P>Say you have the following setup:  You have multiple internal networks and also multiple external IP addresses and/or networks.  What you want to do is have LAN #1 to only use External IP #1 but you wan LAN #2 to use External IP #2.
<P>Internal LAN ----------> official IP
<P>LAN #1                 External IP #1
192.168.1.x      -->     123.123.123.11
<P>LAN #2                 External IP #2
192.168.2.x      -->     123.123.123.12
<P>
<P>Basically, what we have described here is routing NOT only on the destination
address (typical IP routing) but also routing based upon the SOURCE address as
well.  This is typically called "policy-based routing" or "source routing".
This functionality is NOT available in 2.0.x kernels, it *IS* available for
2.2.x kernels via the IPROUTE2 package, and it is not built into the new 2.4.x
kernels using IPTABLES.
<P>First, you have to understand that both IPFWADM and IPCHAINS get involved *AFTER* the routing system has decided where to send a given packet.  This statement really ought to be stamped in big red letters on all IPFWADM/IPCHAINS/IPMASQ documentation.  The reason for this is that users MUST get their routing setup right first and then start adding IPFWADM/IPCHAINS and/or Masq features.  
<P>Anyway, for the example case shown above, you need to persuade the routing system to direct packets from 192.168.1.x via 123.123.1233.11 and packets from 192.168.2.x via 123.123.123.12.  That is the hard part and adding Masq on top of correct routing is easy.
<P>To do this fancy routing, you will use IPROUTE2.  Because this functionality
has NOTHING to do with IPMASQ, this HOWTO does not cover this topic in great
detail.  Please see 
<A HREF="IP-Masquerade-HOWTO-2.html#2.2.x-Requirements">2.2.x-Requirements</A>
 for complete URLs and documentation for this topic.
<P>The "iprule" and "iproute" commands are the same as "ip rule" and "ip route" commands (I prefer the former since it is easier to search for.)  All the commands below are completely untested, if they do not work, please contact the author of IPROUTE2.. not David Ranch  or anyone on the Masq email list as it has NOTHING to do with IP Masquerading.
<P>The first few commands only need to be done once at boot, say in /etc/rc.d/rc.local file.
<P>
<BLOCKQUOTE><CODE>
<PRE>

# Allow internal LANs to route to each other, no masq.
  /sbin/iprule add from 192.168.0.0/16 to 192.168.0.0/16 table main pref 100
# All other traffic from 192.168.1.x is external, handle by table 101
  /sbin/iprule add from 192.168.1.0/24 to 0/0 table 101 pref 102
# All other traffic from 192.168.2.x is external, handle by table 102
  /sbin/iprule add from 192.168.2.0/24 to 0/0 table 102 pref 102

These commands need to be issued when eth0 is configured, perhaps in 
/etc/sysconfig/network-scripts/ifup-post (for Redhat systems).  Be sure to
do them by hand first to make sure they work.

# Table 101 forces all assigned packets out via 123.123.123.11
  /sbin/iproute add table 101 via 62123.123.123.11
# Table 102 forces all assigned packets out via 123.123.123.12
  /sbin/iproute add table 102 via 62123.123.123.12

At this stage, you should find that packets from 192.168.1.x to the
outside world are being routed via 123.123.123.11, packets from
192.168.2.x are routed via 123.123.123.12.

Once routing is correct, now you can add any IPFWADM or IPCHAINS rules.
The following examples are for IPCHAINS:


/sbin/ipchains -A forward -i ppp+ -j MASQ

If everything hangs together, the masq code will see packets being
routed out on 123.123.123.11 and 123.123.123.12 and will use those addresses
as the masq source address.
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss7.37">7.37 Why do the new 2.1.x and 2.2.x kernels use IPCHAINS instead of IPFWADM?</A>
</H2>

<P>IPCHAINS supports the following features that IPFWADM doesn't:
<P>
<UL>
<LI>"Quality of Service" (QoS  support)
<P>
</LI>
<LI>A TREE style chains system vs. LINEAR system like IPFWADM  (Eg. this allows something like
"if it is ppp0, jump to this chain (which contains its own difference set of rules)"
<P>
</LI>
<LI>IPCHAINS is more flexible with configuration.  For example, it has the "replace" command (in addition to "insert" and "add").  You can also negate rules (e.g. "discard any outbound packets that don't come from my registered IP" so that you aren't the source of spoofed attacks).
<P>
</LI>
<LI>IPCHAINS can filter any IP protocol explicitly, not just TCP, UDP, ICMP</LI>
</UL>
<P>
<H2><A NAME="ss7.38">7.38 I've just upgraded to the 2.2.x kernels, why isn't IP Masquerade working?</A>
</H2>

<P>There are several things you should check assuming your Linux IP Masq box already have proper connection to the Internet and your LAN:
<P>
<UL>
<LI>Make sure you have the necessary features and modules are compiled and loaded.  See earlier sections for detail.
<P>
</LI>
<LI>Check <CODE>/usr/src/linux/Documentation/Changes</CODE> and make sure you have the minimal requirement for the network tools installed.
<P>
</LI>
<LI>Make sure you followed all the tests in the 
<A HREF="IP-Masquerade-HOWTO-5.html#Testing">Testing</A>
 section of the HOWTO. 
<P>
</LI>
<LI>You should use 
<A HREF="http://netfilter.filewatcher.org/ipchains/">ipchains</A> to manipulate IP Masq and firewalling rules.
<P>
</LI>
<LI>The standard IPAUTOFW and IPPORTFW port forwarders have been replaced by 
<A HREF="http://juanjox.kernelnotes.org/">IPMASQADM</A>.  You'll need to apply these patches to the kernel, re-compile the kernel, compile the new IPMASQADM tool and then convert your old IPAUTOFW/IPPORTFW firewall rulesets to the new syntax.  This is completely covered in the 
<A HREF="IP-Masquerade-HOWTO-6.html#Forwarders">Forwarders</A>
 section.
<P>
</LI>
<LI>Go through all setup and configuration again!  A lot of time it's just a typo or a simple mistake you are overlooking.</LI>
</UL>
<P>
<H2><A NAME="ss7.39">7.39 I've just upgraded to a 2.0.38+ kernels later, why isn't IP Masquerade working?</A>
</H2>

<P>There are several things you should check assuming your Linux IP Masq box already have proper connection to the Internet and your LAN:
<P>
<UL>
<LI>Make sure you have the necessary features and modules are compiled and loaded.  See earlier sections for detail.
<P>
</LI>
<LI>Check <CODE>/usr/src/linux/Documentation/Changes</CODE> and make sure you have the minimal requirement for the network tools installed.
<P>
</LI>
<LI>Make sure you followed all the tests in the 
<A HREF="IP-Masquerade-HOWTO-5.html#Testing">Testing</A>
 section of the HOWTO. 
<P>
</LI>
<LI>You should use 
<A HREF="http://www.xos.nl/">ipfwadm</A> to manipulate IP Masq and firewalling rules.  If you want to use IPCHAINS, you'll need to apply a patch the 2.0.x kernels.
<P>
</LI>
<LI>Go through all setup and configuration again!  A lot of time it's just a typo or a simple mistake you overlooked.</LI>
</UL>
<P>
<H2><A NAME="ss7.40">7.40 I need help with EQL connections and IP Masq</A>
</H2>

<P>EQL has nothing to do with IP Masq though they are commonly teamed up on Linux boxes.  Because of this, I recommend to check out the NEW version of 
<A HREF="http://home.indyramp.com/masq/eql/eql.html">Robert Novak's EQL HOWTO</A> for all your EQL needs.
<P>
<H2><A NAME="ss7.41">7.41 I can't get IP Masquerade to work!  What options do I have for Windows Platforms?</A>
</H2>

<P>Giving up a free, reliable, high performance solution that works on minimal hardware and pay a fortune for something that needs more hardware, lower performance and less reliable?  (IMHO.  And yes, I have real life experience with these ;-)
<P>Okay, it's your call.  If you want a Windows NAT and/or proxy solution, here is a decent listing.  I have no preference of these tools since I haven't used them before.
<P>
<UL>
<LI>Firesock (from the makers of Trumpet Winsock) 
<UL>
<LI>Does Proxy</LI>
<LI>
<A HREF="http://www.trumpet.com.au">http://www.trumpet.com.au</A></LI>
</UL>

<P>
</LI>
<LI>Iproute 
<UL>
<LI>DOS program designed to run on 286+ class computers</LI>
<LI>requires another box like Linux MASQ</LI>
<LI>
<A HREF="http://www.mischler.com/iproute/">http://www.mischler.com/iproute/</A></LI>
</UL>

<P>
</LI>
<LI>Microsoft Proxy
<UL>
<LI>Requires Windows NT Server</LI>
<LI>Quite expensive</LI>
<LI>
<A HREF="http://www.microsoft.com">http://www.microsoft.com</A></LI>
</UL>

<P>
</LI>
<LI>NAT32
<UL>
<LI>Windows 95/98/NT compatible</LI>
<LI>
<A HREF="http://www.nat32.com">http://www.nat32.com</A></LI>
<LI>Roughly $25 for Win9x and $47 for Win9x and WinNT</LI>
</UL>

<P>
</LI>
<LI>SyGate 
<UL>
<LI>
<A HREF="http://www.sygate.com">http://www.sygate.com</A></LI>
</UL>

<P>
</LI>
<LI>Wingate
<UL>
<LI>Does proxy</LI>
<LI>Costs roughly $30 for 2-3 IPs</LI>
<LI>
<A HREF="http://www.wingate.com">http://www.wingate.com</A></LI>
</UL>

<P>
</LI>
<LI>Winroute 
<UL>
<LI>Does NAT </LI>
<LI>
<A HREF="http://www.winroute.cz/en/">http://www.winroute.cz/en/</A></LI>
</UL>
</LI>
</UL>
<P>
<P>Lastly, do a web search on "MS Proxy Server", "Wingate", "WinProxy", or goto 
<A HREF="http://www.winfiles.com">www.winfiles.com</A>.  And definitely DON'T tell anyone that we sent you. 
<P>
<H2><A NAME="ss7.42">7.42 I want to help on IP Masquerade development.  What can I do?</A>
</H2>

<P>Join the Linux IP Masquerading DEVELOPERS list and ask the developers there what you can help with.  For more details on joining the lists, check out the 
<A HREF="#Masq-List">Masq-List</A>
 FAQ section. 
<P>Please DON'T ask NON-IP-Masquerade development related questions there!!!!
<P>
<H2><A NAME="ss7.43">7.43 Where can I find more information on IP Masquerade? </A>
</H2>

<P>You can find more information on IP Masquerade at the 
<A HREF="http://ipmasq.cjb.net/">Linux IP Masquerade Resource</A> that David Ranch maintains.  
<P>You can also find more information at 
<A HREF="http://www.ecst.csuchico.edu/~dranch/LINUX/index-linux.html">Dranch's Linux page</A> where the TrinityOS and other Linux documents are kept.
<P>You may also find more information at 
<A HREF="http://www.indyramp.com/masq/">The Semi-Original Linux IP Masquerading Web Site</A> maintained by Indyramp Consulting, who also provides the IP Masq mailing lists.
<P>Lastly, you can look for specific questions in the IP MASQ and IP MASQ DEV email archives or ask a specific question on these lists.  Check out the 
<A HREF="#Masq-List">Masq-List</A>
 FAQ item for more details.
<P>
<H2><A NAME="ss7.44">7.44 I want to translate this HOWTO to another language, what should I do?</A>
</H2>

<P>Make sure the language you want to translate to is not already covered by someone else.  But, most of the translated HOWTOs are now OLD and need to be updated.  A list of available HOWTO translations are available at the 
<A HREF="http://ipmasq.cjb.net/">Linux IP Masquerade Resource</A>.
<P>If a copy of a <B>current</B> IP MASQ HOWTO isn't in your proposed language, please download the newest copy of the IP-MASQ HOWTO SGML code from the 
<A HREF="http://ipmasq.cjb.net/">Linux IP Masquerade Resource</A>.  From there, begin your work while maintaining good SGML coding.  For more help on SGML, check out 
<A HREF="http://www.sgmltools.org">www.sgmltools.org</A><P>
<H2><A NAME="ss7.45">7.45 This HOWTO seems out of date, are you still maintaining it?  Can you include more information on ...?  Are there any plans for making this better?</A>
</H2>

<P>Yes, this HOWTO is still being maintained.  In the past, we've been guilty of being too busy working on two jobs and don't have much time to work on this, my apology.  As of v1.50, David Ranch has begun to revamp the document and get it current again.
<P>If you think of a topic that could be included in the HOWTO, please send email to 
<A HREF="mailto:ambrose@writeme.com">ambrose@writeme.com</A> and 
<A HREF="mailto:dranch@trinnet.net">dranch@trinnet.net</A>.  It will be even better if you can provide that information.  We will then include the information into the HOWTO once it is both found appropriate and tested.  Many thanks for your contributions!
<P>We have a lot of new ideas and plans for improving the HOWTO, such as case studies that will cover different network setup involving IP Masquerade, more on security via strong IPFWADM/IPCHAINS firewall rulesets, IPCHAINS usage, more FAQ entries, etc.  If you think you can help, please do!  Thanks.
<P>
<H2><A NAME="ss7.46">7.46 I got IP Masquerade working, it's great!  I want to thank you guys, what can I do?</A>
</H2>

<P>
<UL>
<LI>Can you translate the newer version of the HOWTO to another language?</LI>
<LI>Thank the developers and appreciate the time and effort they spent on this.  </LI>
<LI>Join the IP Masquerade email list and support new MASQ users</LI>
<LI>Send an email to us and let us know how happy you are  </LI>
<LI>Introduce other people to Linux and help them when they have problems.</LI>
</UL>
<P>
<P>
<HR>
<A HREF="IP-Masquerade-HOWTO-8.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="IP-Masquerade-HOWTO-6.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="IP-Masquerade-HOWTO.html#toc7"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
