<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Le Francophones-HOWTO : Linux &amp; la langue fran&ccedil;aise: Réglage du clavier sous Linux</TITLE>
 <LINK HREF="Francophones-HOWTO-5.html" REL=next>
 <LINK HREF="Francophones-HOWTO-3.html" REL=previous>
 <LINK HREF="Francophones-HOWTO.html#toc4" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="Francophones-HOWTO-5.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Francophones-HOWTO-3.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Francophones-HOWTO.html#toc4"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s4">4. Réglage du clavier sous Linux</A></H2>

<P>
<P>
<H2><A NAME="ss4.1">4.1 Introduction</A>
</H2>

<P>
<P>Il existe deux programmes pour configurer votre clavier : un pour la console :
<CODE>loadkeys</CODE> et un pour XFree : <CODE>xkbd</CODE>.
<P>Pour installer un clavier français sous Linux, tapez selon votre clavier
une des lignes suivantes :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        loadkeys tables-clavier/fr/fr-latin9.map
        loadkeys tables-clavier/qc/qc-latin1.map
        loadkeys tables-clavier/cn/cn-latin1.map
        loadkeys tables-clavier/be/be-latin9.map
        loadkeys tables-clavier/sf/sf-latin1.map
        loadkeys tables-clavier/usx/usx-latin1.map
        loadkeys tables-clavier/usx/usx-happy-hacking-latin9.map
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss4.2">4.2 Attention au stty !</A>
</H2>

<P>
<P>Avec les tables latin 9 recommandées dans ce HOWTO, pour linux-console
aussi bien que pour X window, <CODE>N'UTILISEZ PLUS</CODE> :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        stty erase ^H
</PRE>
</CODE></BLOCKQUOTE>
<P>ou :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        stty erase ^?
</PRE>
</CODE></BLOCKQUOTE>
<P>« stty erase » ne sert en effet qu'à établir une correspondance
entre le code que renvoie une touche et la fonction <CODE>erase</CODE> pour
effacer le caractère.
<P>Les tables ici fournies fonctionnent correctement et ne nécessitent donc
pas de <CODE>stty erase</CODE> qui risquerait surtout de perturber leur bon
fonctionnement !
<P>Supprimez-donc ces lignes de vos fichiers d'initialisation de l'interpréteur de
commandes « shell », comme .bashrc, .bash_profile ou .tcshrc .
<P>
<H2><A NAME="ss4.3">4.3 Faire de ces modifications les défauts au démarrage</A>
</H2>

<P>
<P>D'habitude, loadkeys est exécuté par des scripts au
démarrage ; par exemple dans <CODE>/etc/rc.d/init.d/keytable</CODE> ou
<CODE>/etc/rc.d/rc.local</CODE>, <CODE>init.d/keytable</CODE> ou <CODE>rc.keymap</CODE>.
<P>La commande :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        find /etc/rc.d -type f | xargs grep loadkeys
</PRE>
</CODE></BLOCKQUOTE>
<P>vous fournira le nom exact du fichier lançant loadkeys ; il vous
suffit alors de l'éditer pour que vos modifications soient
désormais prise en en compte à chaque démarrage.
<P>Les distributions RedHat et Debian constituent des exceptions : la table
de clavier par défaut étant définie dans
<CODE>/etc/sysconfig/keyboard</CODE> pour la RedHat et
<CODE>/etc/kbd/config</CODE> pour les Debian.
<P>Remplacer donc dans le fichier propre à votre distribution la table de
clavier en question par la bonne table comme fr-latin9.map (selon votre
modèle de clavier)
<P>Vous devrez mettre une copie de la table que vous utilisez dans
le répertoire où votre distribution va chercher les tables de clavier ;
en général /usr/lib/kbd/keymaps/i386/azerty/ pour une RedHat et
/usr/share/kbd/keymaps/i386/azerty/ pour une Debian.
<P>Allez donc sur télechargez 
<A HREF="http://metalab.unc.edu/guylhem/francophones-howto.tgz">l'archive</A>,
enregistrez-la dans votre répertoire &nbsp;/, puis détarrez-la avec la
commande:
<P>
<BLOCKQUOTE><CODE>
<PRE>
        tar -xzvf francophones-howto.tgz
</PRE>
</CODE></BLOCKQUOTE>
<P>Cela crée un répertoire &nbsp;/french : placez-vous dans ce répertoire
puis tapez :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        cp tables-clavier/linux-console/fr-latin9.map /usr/lib/kbd/keytables/i386/azerty/
</PRE>
</CODE></BLOCKQUOTE>
<P>Pour afficher les caractères latin9, vous devrez exécuter les
instructions de la section « polices de caractère ».
<P>
<H2><A NAME="ss4.4">4.4 Polices de caractère</A>
</H2>

<P>
<P>Si vous utilisez console-tools-1998.08.11.tar.gz, vous pourrez remplacer
« setfont » par « consolechars » : ces programmes servent à charger une
police sous linux console.
<P>
<BLOCKQUOTE><CODE>
<PRE>
        setfont /usr/lib/kbd/consolefonts/xxxE-NN.psf.gz
</PRE>
</CODE></BLOCKQUOTE>
<P>Je vous conseille pour des raisons développées plus bas :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        setfont /usr/lib/kbd/consolefonts/lat9-16u.psf.gz
</PRE>
</CODE></BLOCKQUOTE>
<P>Je ne vous conseille pas les fichiers « lat1 », qui ne supportent pas
l'euro ni les autres caractères français.
<P>Vous trouverez aussi des fichiers « .uni » qui ne sont utiles que pour
créer des polices ou pour ceux qui utilisent l'unicode : ils fixent des
correspondances entre les « dessins » des caractères dans la police et
les codes des dits caractères, un même dessin pouvant correspondre à
plusieurs codes dans l'example de d'unicode.
<P>Pour les polices toutes faites, vous pouvez forcer cette correspondace
avec l'option « -u fichier.uni ».
<P>Si vous tenez à les installer, copiez de la même manière tous les
fichiers commençant par « lat9 » et se terminant par « .uni » dans le
répertoire /usr/lib/kbd/consoletrans avec la commande:
<P>
<BLOCKQUOTE><CODE>
<PRE>
    cp lat9*.uni /usr/lib/kbd/consoletrans
</PRE>
</CODE></BLOCKQUOTE>
<P>D'habitude, setfont est exécuté par des scripts au démarrage ; par
exemple dans <CODE>/etc/rc.d/init.d/keytable</CODE> ou
<CODE>/etc/rc.d/rc.local</CODE>, <CODE>init.d/keytable</CODE> ou
<CODE>rc.keymap</CODE>.
<P>La commande :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        find /etc/rc.d -type f | xargs grep setfont
</PRE>
</CODE></BLOCKQUOTE>
<P>vous fournira sur le nom exact du fichier lançant setfont ; il vous
suffit alors de l'éditer pour que vos modifications soient
désormais prise en en compte à chaque démarrage...
<P>Les distributions RedHat et Debian constituent des exceptions : la
police par défaut étant définie dans <CODE>/etc/sysconfig/i18n</CODE>
pour la RedHat et <CODE>/etc/kbd/config</CODE> pour les Debian.
<P>Dans <CODE>/etc/sysconfig/i18n</CODE> rajouter une ligne de la forme :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        SYSFONT=xxxE-NN.psf
</PRE>
</CODE></BLOCKQUOTE>
<P>
<UL>
<LI> xxx représente le type de police ; il doit s'agir d'une lat
pour les francophones ce qui signifie ISO 8859 ou latin.
Sans cela il n'y a plus de caractères « étendus » comme les voyelles
accentués, symboles de ponctuation comme paragraphe...</LI>
<LI> E représente l'encodage latin, par exemple 1 pour latin1, 0 ou 9
pour latin9</LI>
<LI> NNN représente la taille individuelle de chaque caractère ; 08
est presque illisible mais 16 est un peu gros... &Agrave; régler selon
les go&ucirc;ts de chacun.</LI>
</UL>
<P>Je vous conseille la police lat9-16u.psf ou son équivalent lat0-16.psf
installée par défaut sur la plupart des distributions, très souvent
compressée donc avec le suffixe « .gz » .
<P>[ rajouter une explication sur comment installer la police ]
<P>La section « une police, des polices » vous donnera plus de détails sur
les polices disponibles.
<P>
<H2><A NAME="ss4.5">4.5 Vieilles versions</A>
</H2>

<P>
<P>Si lors du chargement de la table de clavier vous rencontrez un message
d'erreur similaire au suivant :
<P>
<BLOCKQUOTE><CODE>
<PRE>
        (guylhem@victis:guylhem)$ loadkeys fr-latin9.map
        Loading /usr/lib/kbd/keytables/fr-latin9.map
        unknown keysym 'dead_cedilla'
        /usr/lib/kbd/keytables/fr-latin9.map:67: parse error
        syntax error in map file
        key bindings not changed
</PRE>
</CODE></BLOCKQUOTE>
<P>Cela signifie que votre version de kbd dont le programme loadkeys
dépend est trop vieille : il faut vous procurer une version plus
récente du programme.
<P>Il existait et existe encore des versions des tables de clavier pour ceux ne
voulant ni touches mortes ni accents, mais celles-ci tombent actuellement en
désuétude puisque la grande majorité des programmes prennent désormais
en charge ces fameuses touches mortes et les caractères accentués.
<P>De plus, les tables fournies avec ce HOWTO permettent de se servir des
touches mortes ou de s'en passer si un programme les refuse, les deux
cas ayant été prévus :
<P>
<H2><A NAME="ss4.6">4.6 Améliorations spécifiques au clavier français latin9</A>
</H2>

<P>
<P>Ça y est, vous pouvez taper du texte latin 9 sous Linux en mode console !
<P>Seules 2 touches ont été modifiées :
<P>
<H3>a) carré/cube</H3>

<P>Elle sert maintenant à oe/OE liés ; en AltGr on y trouve les guillemets
français.
<P>Le carré &amp; le cube restent respectivement accessibles en AltGr (ù) et Alt
Gr(*), les guillemets étant aussi directement accessibles avec AltGr (w)
et AltGr (x), selon la norme ISO 9995 part 3 appliquée à la norme AZERTY
française.
<P>En résumé :
<UL>
<LI> AltGr (oe) : «</LI>
<LI> AltGr + Shift (oe) : »</LI>
<LI> AltGr (w) : «</LI>
<LI> AltGr (x) : »</LI>
<LI> AltGr (m) : ¹</LI>
<LI> AltGr (ù) : ²</LI>
<LI> AltGr (*) : ³</LI>
</UL>
<P>
<H3>b) dollar / livre / symbole monétaire international</H3>

<P>
<P>Étant donné que le symbole monétaire international n'est plus disponible
dans la norme d'encodage ISO 8859-15, il a été remplacé par la division
centésimale de l'euro : le cent, disponible donc en AltGr ($).
<P>Dans les précédentes versions, le dollar &amp; la livre, des monnaies
étrangères, avaient été déplacés pour laisser la place à l'euro et au
cent, notre monnaie.
<P>De telles modifications étaient permises par les recommandations
officielles de l'EURO WORKSHOP mais allaient à l'encontre de la norme
AZERTY : si la position AltGr (e) est déjà occupée sur un clavier, la
position de l'euro est laissée au libre choix des programmeurs.
<P>AltGr (e) sert à faire « ê » depuis 1992 sous Linux, mais devant les
protestations légitimes d'utilisateurs disposant d'un clavier où l'euro
est sérigraphié en AltGr (e), j'ai du déplacer le ê en AltGr + Shift
($).
<P>Désolé d'avoir rompu la « tradition » linuxienne pour conserver la
compatibilité à la norme AZERTY &amp; aux recommandations officielles de
l'EURO WORKSHOP !
<P>En résumé :
<P>
<UL>
<LI> AltGr (e) : euro</LI>
<LI> AltGr ($) : cent</LI>
<LI> AltGr + Shift ($) : ê</LI>
</UL>
<P>
<H2><A NAME="ss4.7">4.7 Pour les autres claviers latin9</A>
</H2>

<P>
<P>L'euro &amp; les cents ont été rajoutés respectivement en AltGr (e) &amp; en
AltGr (c).
<P>La touche AltGr a donc été rajoutée ; pour utiliser ces
fonctions avec toute table de clavier, il suffit de charger
other-latin9.map après votre table nationale.
<P>La plupart des améliorations du clavier français ont été transposées aux
claviers nationaux par des auteurs externes.
<P>Toutefois, je ne possède pas chaque modèle de clavier et ne peut
expliquer en détail toutes ces modifications ; des sections spécifiques
seront donc rajoutées par la suite par d'autres auteurs.
<P>
<H2><A NAME="ss4.8">4.8 Dans tous les cas</A>
</H2>

<P>
<P>« Home », « End », « Delete » et « BackSpace » ont été corrigées &amp; les
touches « Windows » ont été correctement définies, pour passer d'une
console virtuelle à l'autre.
<P>Des « Composes », séquences à préfixer par la touche compose ( «
ImprÉcran » ou « Print Screen » par défaut) ont été rajoutées, mais cela
reste transparent pour l'utilisateur.
<P>Par exemple:
<UL>
<LI> COMPOSE ^ suivi d'une des lettres (s,S,z,Z) sert à obtenir les lettres finlandaises rajoutées</LI>
<LI> COMPOSE " suivi d'une des lettres (y,Y) sert à obtenir les y trémas franco-néerlandais rajoutés</LI>
<LI> COMPOSE - suivi d'une des lettres (e,c,l,y) sert à obtenir l'euro, le cent, la livre, le yen</LI>
</UL>
<P>
<HR>
<A HREF="Francophones-HOWTO-5.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Francophones-HOWTO-3.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Francophones-HOWTO.html#toc4"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
