<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>  Qmail VMailMgr and Courier-Imap HOWTO: Putting it all together</TITLE>
 <LINK HREF="Qmail-VMailMgr-Courier-imap-HOWTO-2.html" REL=previous>
 <LINK HREF="Qmail-VMailMgr-Courier-imap-HOWTO.html#toc3" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<IMG SRC="../img/next.gif" ALT="Next">
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s3">3. Putting it all together</A></H2>

<H2><A NAME="ss3.1">3.1 Basic Qmail config</A>
</H2>

<P>You will need to add your domains to the /var/qmail/control/virtualdomains 
file in the following format as is normal with qmail and VMailMgr.
<PRE>
  domain1.com:user1
</PRE>

For more detailed setup and config documentation visit the Qmail website
<A HREF="http://www.qmail.org">http://www.qmail.org</A> and the VMailMgr website 
<A HREF="http://em.ca/~bruceg/VMailMgr/">http://em.ca/~bruceg/VMailMgr/</A><H2><A NAME="ss3.2">3.2 Tell Qmail to use VMailMgr for authentication</A>
</H2>

<P>By default qmail uses checkpassword for authentication, to tell Qmail
to use VMailMgr for authentication type the following command:
<PRE>
  echo checkvpw > /var/qmail/control/checkpassword
</PRE>
<P>
<H2><A NAME="ss3.3">3.3 Setup Courier-imap for VMailMgr</A>
</H2>

<P>Copy the VMailMgr auth libs to courier's directory
<P>
<PRE>
  cp /usr/bin/authvmailmgr /usr/lib/courier-imap/libexec/authlib/
</PRE>
<P>Edit <CODE>/usr/lib/courier-imap/etc/imapd.config</CODE>
and add authvmailmgr as the first entry in AUTHMODULES
<P>For more detailed setup and config documentation visit the Courier-imap 
website 
<A HREF="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</A><H2><A NAME="ss3.4">3.4 Setup virtual domain with VMailMgr</A>
</H2>

<P>With the user account that will be managing the domain go to their home dir
and type:
<PRE>
  vsetup
</PRE>
<P>This will setup the users home dir with the necessary structure to handle
incoming email. You will probably want to create a email account by typing
<P>
<PRE>
  vadduser emailuser
</PRE>
<P>For more detailed setup and config documentation visit the VMailMgr 
website 
<A HREF="http://em.ca/~bruceg/VMailMgr/">http://em.ca/~bruceg/VMailMgr/</A><H2><A NAME="ss3.5">3.5 Starting the daemons</A>
</H2>

<P>Start Qmail daemons
<PRE>
  /etc/rc.d/init.d/qmail start
  /etc/rc.d/init.d/pop3d start
  /etc/rc.d/init.d/smtp start
  /etc/rc.d/init.d/qmqpd start (optional)
  /etc/rc.d/init.d/qmtpd start (optional)
</PRE>
<P>Start VMailMgr daemon
<PRE>
  /etc/rc.d/init.d/vmailmgrd start
</PRE>
<P>Start Courier-imap damon
<PRE>
  /etc/rc.d/init.d/courier-imap start
</PRE>
<H2><A NAME="ss3.6">3.6 Some considerations left</A>
</H2>

<P>Qmail and the Maildirs may cause some email apps that run locally to 
not work. Visit the Qmail website 
<A HREF="http://www.qmail.org">http://www.qmail.org</A> for details
on email apps that have been patched to work with Maildirs.
<P>Courier-imap is not as widely used as Cyrus or UWash imap servers.
As such, you may suffer from minor incompatibilities. Courier-imap is
extremely well written, and tries to comply with the imap definition
even if it means some imap clients wont work well. For details visit
the Courier-imap website 
<A HREF="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</A>.
<H2><A NAME="ss3.7">3.7 Known bugs</A>
</H2>

<P>None yet.
<H2><A NAME="ss3.8">3.8 The final word</A>
</H2>

<P>Im tired, and wonder if anyone will ever use this, but I'm happy its done.
I'm sure if you have read this far your tired too. Well, all I can hope is
that you have Qmail, VMailMgr and Courier-imap working. If so, Enjoy!
If not, bummer!
<P>O.K. readers, you're done for today. Feel free to send me your
feedback, eternal gratitude, flowers, ecash, cars, oil sources etc.
<HR>
<IMG SRC="../img/next.gif" ALT="Next">
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO-2.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO.html#toc3"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
