<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>The UPS Howto: Software</TITLE>
 <LINK HREF="UPS-HOWTO-5.html" REL=next>
 <LINK HREF="UPS-HOWTO-3.html" REL=previous>
 <LINK HREF="UPS-HOWTO.html#toc4" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="UPS-HOWTO-5.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="UPS-HOWTO-3.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="UPS-HOWTO.html#toc4"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="software"></A> <A NAME="s4">4. Software</A></H2>

<P>Basically, all you need is a working <CODE>powerd</CODE> binary, usually
found in <CODE>/sbin/powerd</CODE>.  This is usually part of the <CODE>SysVinit</CODE>
package.  As far as I know, all current Linux distributions include a
recent version of <CODE>SysVinit</CODE>.  Very old versions didn't include
<CODE>powerd</CODE>.
<P>The only problem you might have is that your cable might not match how
<CODE>powerd</CODE> is set up, in which case you'll have to either rewire your
cable, or pick up a copy of <CODE>powerd.c</CODE> and modify it to work with your
cable.  Or, for that matter, you can always pick up one of the
following packages, most of which allow you to configure them to match
your cable.
<P>As mentioned, an alternative to using the <CODE>powerd</CODE> that comes with the
<CODE>SysVinit</CODE> package would be to use one of the UPS packages now
available.  There are many packages currently available to aid in
setting up computer/ups communications.  None of this was available
when I first wrote this Howto, which is why I had to write it.  In
fact, there's a good chance that you might be able to use one of these
software packages, and avoid this Howto entirely!
<P>As of 15 March 1997 or so, 
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups">Sunsite's UPS directory</A> had quite a few
packages available.  Other sites seem to have UPS control packages
available too.  Here's what I've found to date (all but two from sunsite):
<P>
<DL>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/Enhanced_APC_BackUPS.tar.gz">Enhanced_APC_BackUPS.tar.gz</A></B><DD><P>A package for controlling APC Smart UPSs.  Seems to basically
follow the BUPS Howto (included here), but also seems to have some
low battery warning support.
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/Enhanced_APC_UPSD-v1.4.tar.gz">Enhanced_APC_UPSD-v1.4.tar.gz</A></B><DD><P>The <CODE>.lsm</CODE> file says that it's formerly the above package,
but it actually includes the above package as a <CODE>.tar.gz</CODE>
file inside of this <CODE>tar.gz</CODE> file!  The documentation is
spotty.  It seems to support APC UPSs in both smart mode and dumb
mode, but I can't be sure.
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/apcd-0.5.tar.gz">apcd-0.5.tar.gz</A></B><DD><P>Another package for controlling APC Smart UPSs.  Seems to include
some sort of master/slave support (i.e. - one machine signals
others to shut down when the power goes out).  Seems to use the UPS
in smart mode, as opposed to via modem signal line toggling.
<P>
<DT><B>
<A HREF="ftp://ftp.redhat.com/pub/contrib/i386/smupsd-0.9-1.i386.rpm">smupsd-0.9-1.i386.rpm</A></B><DD><P>
<DT><B>
<A HREF="ftp://ftp.redhat.com/pub/contrib/i386/smupsd-0.9-1.src.rpm">smupsd-0.9-1.src.rpm</A></B><DD><P>The author (
<A HREF="mailto:dem@netsco.com">David E. Myers, dem@netsco.com</A>) writes:
<P>smupsd monitors an 
<A HREF="http://www.apcc.com">APC    Smart-UPS[TM]</A> under 
<A HREF="http://www.redhat.com">Red Hat[TM] Linux</A>.  Should power fail, smupsd will power
down the system and the UPS in an orderly fashion.
<P>smupsd has the following features:
<P>
<UL>
<LI>Shuts down the system and the UPS based on either remaining UPS
battery charge or elapsed time since power failure.
</LI>
<LI>UPS parameters can be monitored live from any host with the
graphical monitor program upsmon, written in JavaTM].
<LI>UPS parameters can be logged to a file for analysis and reporting.
<LI>When additional systems share the same UPS, instances of smupsd
running on these systems can read UPS parameters from the one
running on the system serially connected to the UPS (master/slave).
<LI>Network access from remote hosts can be controlled via the
<CODE>/etc/hosts.allow</CODE> file.</LI>
</LI>
</LI>
</LI>
</UL>
<P>
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/genpower-1.0.1.tgz">genpower-1.0.1.tgz</A></B><DD><P>A general UPS handling package.  Includes configurations for many
UPSs - two TrippLite configurations, and three APC configurations.
Includes good documentation.  A best buy.
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/powerd-2.0.tar.gz">powerd-2.0.tar.gz</A></B><DD><P>A replacement for the <CODE>powerd</CODE> that comes with the <CODE>SysVinit</CODE> package.
As opposed to comments included in the documentation it doesn't
seem to have been merged into the <CODE>SysVinit</CODE> package as of version
2.62.  Its advantages are that it can act as a server for other
<CODE>powerd</CODE>s running on other machines (for when you have a network of
machines hanging off a single UPS), and it can be configured by
config file - the source code doesn't have to be edited and
recompiled.
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/upsd-1.0.tgz">upsd-1.0.tgz</A></B><DD><P>Another replacement for <CODE>powerd</CODE>.  Seems to be quite comparable in
features to powerd-2.0.tar.gz.  
<P>
<DT><B>
<A HREF="http://www.bestpower.com/section/software/checkups.tar">checkups.tar</A></B><DD><P>This package is for controlling Best UPSs.  It's direct from
Best's web site.  Includes binaries for lots of <CODE>unix</CODE> flavors,
but more importantly, it includes source code, so you can try it 
out under Linux, and if it doesn't work, you can try to fix it.
The source code includes both ``basic checkups'' which controls
the UPS in dumb mode, and ``advanced checkups'' which is a little
more sophisticated - it will signal a shutdown when the UPS says
it has X minutes of power remaining instead of just shutting down
X minutes after the power goes out.  The advanced checkups program
also will shut down when the UPS registers various alarms such as
High Ambient Temperature, Near Low Battery, Low AC Out, or User
Test Alarm.
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/bestups-0.9.tar.gz">bestups-0.9.tar.gz</A></B><DD><P>A package that might very well be on sunsite by the time you read
this.  It's a pair of communications module which works with Best
Ferrups UPSs.  It operates the UPS in smart mode.  It inter-operates
well with powerd-2.0 - useful if you have a big Best Ferrups UPS
keeping up all the machines on a network.
<P>NOTE - This package has yet to be uploaded to Sunsite.  I keep
begging the author to finish and upload it, but he has yet to find
the time.
<P>
<P>
<DT><B>
<A HREF="http://www.deltecpower.com/soft.html">LanSafe III</A></B><DD><P>Deltec Electronics (and Exide) sell a software package called
LanSafe III.  They have a Linux version.  It comes with their UPSs.
They also say that it works with other UPSs (on the dumb level).
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/apcupsd-2.8.tar.gz">apcupsd-2.8.tar.gz</A></B><DD><P>The author (
<A HREF="mailto:hedrick@astro.dyer.vanderbilt.edu">Andre Hedrick, hedrick@astro.dyer.vanderbilt.edu</A>) writes:
<P>apcupsd-2.1.tar.gz replaces Enhanced-APC-UPSD.tar.gz
<P>It is a very complete package for APC UPSs.  There is support for
the entire range of UPSs in their product line.  I have now added
smart mode signaling to the package and support with APC's own
cables or a custom cable if you don't have an APC cable that is
supported to date.
<P>
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/smartups-1.1.tgz">smartups-1.1.tgz</A></B><DD><P>From the LSM:
<P>A powerd and an X11 graphing utility which shows you the
voltages, frequencies, load percentage and battery level in
realtime. The protocol that the "Safeware" software uses,
and "Tripplite" UPSs are supported. Source + ELF binaries.
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/ups.tar.gz">ups.tar.gz</A></B><DD><P>From the LSM:
<P>Program to interact with battery backups (Powerbox UPS).
<P>
<DT><B>
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/usvd-2.0.0/usvd-2.0.0.tgz">usvd-2.0.0.tgz</A></B><DD><P>From the LSM:
<P>usvd is a daemon that monitors the state of an uninterrupted
power supply and reacts upon state changes (line fail,
line back, battery low situations). You can write your
own scripts that are called in these cases. It does *not*
require SYSVINIT.
<P>
</DL>
<P>
<P>Note that I've only glanced at these packages.  I haven't used them.
We were just about to start using 
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/bestups-0.9.tar.gz">bestups-0.9.tar.gz</A>
in conjunction with 
<A HREF="http://sunsite.unc.edu:/pub/Linux/system/ups/powerd-2.0.tar.gz">powerd-2.0.tar.gz</A>,
but we never quite got around to it.
<P>
<HR>
<A HREF="UPS-HOWTO-5.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="UPS-HOWTO-3.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="UPS-HOWTO.html#toc4"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
