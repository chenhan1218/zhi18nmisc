<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>  Qmail VMailMgr and Courier-Imap HOWTO: Component installation</TITLE>
 <LINK HREF="Qmail-VMailMgr-Courier-imap-HOWTO-3.html" REL=next>
 <LINK HREF="Qmail-VMailMgr-Courier-imap-HOWTO-1.html" REL=previous>
 <LINK HREF="Qmail-VMailMgr-Courier-imap-HOWTO.html#toc2" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO-3.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO-1.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO.html#toc2"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s2">2. Component installation</A></H2>

<H2><A NAME="ss2.1">2.1 Preparations</A>
</H2>

<P>You have two options
<UL>
<LI> Get and compile source rpms. 
This has the benefit of being able to review the source before compiling,
and compiling for your specific setup.</LI>
<LI> Or simply get the binary rpms. 
This has the benefit of simplicity, and not having to worry about having the
necessary libraries installed.</LI>
</UL>

I recommend using Bruce Guenter's rpm releases, since they are well patched, and
its what I used for building my systems. 
<H3>Get source rpms</H3>

<P>You will need:
<UL>
<LI> ucspi-tcp-0.88-1.src.rpm - 
<A HREF="http://em.ca/~bruceg/rpms/ucspi-tcp/">http://em.ca/~bruceg/rpms/ucspi-tcp/</A></LI>
<LI> daemontools-0.70-1.src.rpm - 
<A HREF="http://em.ca/~bruceg/rpms/daemontools/">http://em.ca/~bruceg/rpms/daemontools/</A> </LI>
<LI> supervise-scripts-2.4-1.src.rpm - 
<A HREF="http://em.ca/~bruceg/supervise-scripts/">http://em.ca/~bruceg/supervise-scripts/</A></LI>
<LI> qmail-1.03+patches-12.src.rpm - 
<A HREF="http://em.ca/~bruceg/qmail+patches/">http://em.ca/~bruceg/qmail+patches/</A></LI>
<LI> vmailmgr-0.96.6-1.src.rpm - 
<A HREF="http://em.ca/~bruceg/vmailmgr/">http://em.ca/~bruceg/vmailmgr/</A></LI>
<LI> courier-imap-0.31.tar.gz - 
<A HREF="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</A></LI>
</UL>

For Courier-imap you must build the source rpm from the tar 
file (instructions will follow).
<H3>Get binary rpms</H3>

<P>Qmail does not come in binary form. Such packages are explicitly disallowed by 
the author of Qmail, and frustrating as it may be, I understand his reasoning. 
<P>Courier-imap does not come in binary form, unless you want to use the one 
I built. If you want mine, visit 
<A HREF="http://www.clearrivertech.com/linux/HOWTO/supportfiles/">http://www.clearrivertech.com/linux/HOWTO/supportfiles/</A>.
<P>VMailMgr does not come in binary form that supports Courier-imap, unless you 
want to use the one I built. If you want mine, email me, and I will send it.
<UL>
<LI> ucspi-tcp-0.88-1.i386.rpm - 
<A HREF="http://em.ca/~bruceg/rpms/ucspi-tcp/">http://em.ca/~bruceg/rpms/ucspi-tcp/</A></LI>
<LI> daemontools-0.70-1.i386.rpm - 
<A HREF="http://em.ca/~bruceg/rpms/daemontools/">http://em.ca/~bruceg/rpms/daemontools/</A> </LI>
<LI> supervise-scripts-2.4-1.i386.rpm - 
<A HREF="http://em.ca/~bruceg/supervise-scripts/">http://em.ca/~bruceg/supervise-scripts/</A></LI>
<LI> qmail-1.03+patches-12.src.rpm - 
<A HREF="http://em.ca/~bruceg/qmail+patches/">http://em.ca/~bruceg/qmail+patches/</A></LI>
<LI> vmailmgr-0.96.6-1.src.rpm - 
<A HREF="http://em.ca/~bruceg/vmailmgr/">http://em.ca/~bruceg/vmailmgr/</A></LI>
<LI> courier-imap-0.31.tar.gz - 
<A HREF="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</A></LI>
</UL>

For Courier-imap you must build the binary rpm from the tar 
file (instructions will follow) or email me for my binary rpm.
<H3>Get tarred sources (for non-RPM users)</H3>

<P>If your system does not have, or you do not use RPMS, you can install from source.
<UL>
<LI> ucspi-tcp-0.88.tar.gz - 
<A HREF="http://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz">http://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz</A></LI>
<LI> daemontools-0.70.tar.gz - 
<A HREF="http://cr.yp.to/daemontools/daemontools-0.70.tar.gz">http://cr.yp.to/daemontools/daemontools-0.70.tar.gz</A></LI>
<LI> supervise-scripts-2.4.tar.gz - 
<A HREF="http://em.ca/~bruceg/supervise-scripts/">http://em.ca/~bruceg/supervise-scripts/</A></LI>
<LI> qmail-1.03.tar.gz - 
<A HREF="http://cr.yp.to/software/qmail-1.03.tar.gz">http://cr.yp.to/software/qmail-1.03.tar.gz</A> (*)</LI>
<LI> vmailmgr-0.96.6.tar.gz - 
<A HREF="http://em.ca/~bruceg/vmailmgr/">http://em.ca/~bruceg/vmailmgr/</A></LI>
<LI> courier-imap-0.31.tar.gz - 
<A HREF="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</A></LI>
</UL>
<P>
<BLOCKQUOTE><CODE>
(*) There may be minor differences in these instructions due to the use of the standard
Qmail package. Please review the documentation for Qmail and VMailMgr if any of
the files deviates from my instructions.
</CODE></BLOCKQUOTE>
<H2><A NAME="ss2.2">2.2 Install support packages</A>
</H2>

<H3>Install with RPMS</H3>

<H3>Compiling SRC.RPM's</H3>

<P>Simply run the following command for each package
<PRE>
rpm --rebuild &lt;package.src.rpm&gt;
</PRE>

-Example-
<HR>
<PRE>
  rpm --rebuild ucspi-tcp-0.88-1.src.rpm  
  rpm --rebuild daemontools-0.70-1.src.rpm
  rpm --rebuild supervise-scripts-2.4-1.src.rpm
</PRE>
<HR>
<H3>Installing RPM's</H3>

<P>If you compiled the source rpms, the binaries will be located 
in <CODE>/usr/src/redhat/RPMS/i386/</CODE> or something similar.
<P>Simply run the following command for each package
<PRE>
rpm -ivh &lt;location&gt;/&lt;package.i386.rpm&gt;
</PRE>
<P>-Example-
<HR>
<PRE>
  rpm -ivh /usr/src/redhat/RPMS/i386/ucspi-tcp-0.88-1.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/daemontools-0.70-1.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/supervise-scripts-2.4-1.i386.rpm
</PRE>
<HR>
<H3>Install with source</H3>

<P>Run the following commands for each package
<PRE>
  (As non-root user)
  tar zxf &lt;package.tar.gz>
  cd &lt;newly created dir>
  ./configure
  make
  (As root)
  make setup check (for ucspi-tcp and daemontools)
  or
  make install (for supervise-scripts)
</PRE>
<P>-Example-
<HR>
<PRE>
  (As non-root user)
  tar zxf supervise-scripts-2.4.tar.gz
  cd supervise-scripts-2.4
  ./configure
  make
  (As root)
  make setup check or  make install
</PRE>
<HR>
<H2><A NAME="ss2.3">2.3 Install Qmail</A>
</H2>

<H3>Install with RPMS</H3>

<P>
<H3>Compiling SRC.RPM's</H3>

<P>After installing the support packages, <BR>
Simply run the following command:
<PRE>
rpm --rebuild &lt;package.src.rpm>
</PRE>
<P>-Example-
<HR>
<PRE>
  rpm --rebuild qmail-1.03+patches-12.src.rpm
</PRE>
<HR>
<H3>Installing RPM's</H3>

<P>After compiling the source rpms, the binaries will be located 
in <CODE>/usr/src/redhat/RPMS/i386/</CODE> or something similar.
<P>Simply run the following command for each package
<PRE>
rpm -ivh &lt;location>/&lt;package.i386.rpm>
</PRE>
<P>-Example-
<HR>
<PRE>
  rpm -ivh /usr/src/redhat/RPMS/i386/qmail-1.03+patches-12.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/qmail-pop3d-1.03+patches-12.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/qmail-qmqpd-1.03+patches-12.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/qmail-qmtpd-1.03+patches-12.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/qmail-smtpd-1.03+patches-12.i386.rpm
</PRE>
<HR>
<P>
<PRE>
  * note start *
  - Remove sendmail and any dependant applications prior to installing Qmail
  - by running the following command for each package
  - rpm -e &lt;packagename>*
  - 
  - On my system I had to remove sendmail, so I typed
  - rpm -e sendmail
  * note end *
</PRE>
<H3>Install with source</H3>

<P>As of this writing Bruce Guenter has not released a tar.gz package of
his patched qmail. So until Bruce does this, I am having you download the
standard Qmail package, and forcing you to read the included INSTALL file.
<P>Installing the standard build may cause minor differnces in the config, one 
example that comes to mind is that the init scripts are named differently.
This should not cause too much confusion, I just want you to be aware.
<P>Run the following command
<PRE>
  (As non-root user)
  tar zxf &lt;package.tar.gz>
  cd &lt;newly created dir>
  (Now read the INSTALL file and follow the steps to install Qmail)
</PRE>

-Example-
<HR>
<PRE>
  (As non-root user)
  tar zxf qmail-1.03.tar.gz
  cd qmail-1.03
  vi INSTALL (Read and follow steps)
</PRE>
<HR>
<H2><A NAME="ss2.4">2.4 Install Courier-imap</A>
</H2>

<H3>Install with RPMS</H3>

<H3>Compiling SRC.RPM's</H3>

<P>Build the courier-imap rpms from the tar file
<CODE>rpm -ta courier-imap-0.31.tar.gz</CODE>
<P>
<PRE>
  * note start *
  - This errors out if you compile as root, but if your not root you
  - wont have permissions to /usr/src/redhat. You will want to build as a 
  - non-root user, so create a ".rpmmacros" file (for rpm v3 and later) in 
  - your home directory containing the line "%_topdir /path/to/home/redhat".
  - Then create your own "redhat" directory containing all the subdirs that
  - /usr/src/redhat contains.
  - You should never build RPMs as root unless you have to.
  * note end *
</PRE>
<P>* I will mention again, that I have built the binaries, and you can get them at *<BR>
* 
<A HREF="http://www.clearrivertech.com/linux/HOWTO/supportfiles/">http://www.clearrivertech.com/linux/HOWTO/supportfiles/</A>. *
<P>
<H3>Installing RPM's</H3>

<P>After compiling the source rpms, the binary will be located 
in <CODE>/usr/src/redhat/RPMS/i386/</CODE> or something similar.
<P>Simply run the following command for each package
<PRE>
  rpm -ivh &lt;location>/&lt;package.i386.rpm>
</PRE>
<P>-Example-
<HR>
<PRE>
  rpm -ivh /usr/src/redhat/RPMS/i386/courier-imap-0.31-1.i386.rpm
</PRE>
<HR>
<P>
<H3>Install with source</H3>

<P>Run the following command
<PRE>
  (As non-root user)
  tar zxf &lt;package.tar.gz>
  cd &lt;newly created dir>
  ./configure
  make
  (As root)
  make install
</PRE>
<P>-Example-
<HR>
<PRE>
  (As non-root user)
  tar zxf courier-imap-0.31.tar.gz
  cd courier-imap-0.31
  ./configure
  make
  (As root)
  make install
</PRE>
<HR>
<H2><A NAME="ss2.5">2.5 Install VMailMgr</A>
</H2>

<H3>Install with RPMS</H3>

<H3>Compiling SRC.RPM's</H3>

<P>Simply run the following command
<PRE>
rpm --rebuild &lt;package.src.rpm&gt;
</PRE>

-Example-
<HR>
<PRE>
  rpm --rebuild vmailmgr-0.96.6-1.src.rpm  
</PRE>
<HR>
<H3>Installing RPM's</H3>

<P>If you compiled the source rpm, the binaries will be located 
in <CODE>/usr/src/redhat/RPMS/i386/</CODE> or something similar.
<P>Simply run the following command for each package
<PRE>
rpm -ivh &lt;location&gt;/&lt;package.i386.rpm&gt;
</PRE>
<P>-Example-
<HR>
<PRE>
  rpm -ivh /usr/src/redhat/RPMS/i386/vmailmgr-0.96.6-1.i386.rpm
  rpm -ivh /usr/src/redhat/RPMS/i386/VMailMgr-daemon-0.96.6-1.i386.rpm
</PRE>
<HR>
<H3>Install with source</H3>

<P>Run the following commands
<PRE>
  (As non-root user)
  tar zxf &lt;package.tar.gz>
  cd &lt;newly created dir>
  ./configure
  make
  (As root)
  make install
</PRE>

-Example-
<HR>
<PRE>
  (As non-root user)
  tar zxf vmailmgr-0.96.6.tar.gz
  cd vmailmgr-0.96.6
  ./configure
  make
  (As root)
  make setup check or  make install
</PRE>
<HR>

That should do it.
<HR>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO-3.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO-1.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="Qmail-VMailMgr-Courier-imap-HOWTO.html#toc2"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
