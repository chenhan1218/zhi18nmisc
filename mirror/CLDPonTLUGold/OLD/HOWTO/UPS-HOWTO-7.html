<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>The UPS Howto: What to do when you're really stuck</TITLE>
 <LINK HREF="UPS-HOWTO-8.html" REL=next>
 <LINK HREF="UPS-HOWTO-6.html" REL=previous>
 <LINK HREF="UPS-HOWTO.html#toc7" REL=contents>
<SCRIPT src="../menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(1, 8, 1);</SCRIPT>
<A HREF="UPS-HOWTO-8.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="UPS-HOWTO-6.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="UPS-HOWTO.html#toc7"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s7">7. What to do when you're really stuck</A></H2>

<P>Here's a novel solution to UPS control for when the UPS and the
computer just aren't on speaking terms.  I must say that every time I
read this, I'm struck by how clever a solution it is.
<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
From: " Raymond A. Ingles" &lt;inglesra@frc.com>
To: hjstein@math.huji.ac.il
Subject: UPS HOWTO tip
Date: Mon, 24 Feb 1997 11:48:32 -0500 (EST)


 I don't know if others would find this useful, but I thought I might 
pass this along for possible inclusion in the HOWTO. Thanks for 
maintaining a HOWTO that I found very useful!

-----------------

 My fiancee bought me a UPS as a present, a Tripp-Lite 400, I believe. It 
was very welcome and seems to operate as expected, but unfortunately 
doesn't have a serial interface to let the computer know the line power 
has failed. It's apparently intended for home or office use where the 
computer will not be left unattended.

 This, of course, was unacceptable and I began working on a line monitor, 
planning on opening up the case and figuring out how to add the hardware 
that the manufacturer had left out. Then I realized that there was a 
quicker and simpler and cheaper (if somewhat less functional) way.

 I had an old 2400 baud modem that I wasn't using, and hooked it up to an 
unused serial port on my computer. I then plugged the modem into a surge 
supressor plugged into the wall power. I set up powerd with the options 
as follows:

-----
serialline    /dev/ttyS1
monitor     DCD
failwhen    low
-----

 Now, when the wall power fails (or, since that hasn't happened lately, 
when I pull the surge supressor from the wall to test this setup) the modem 
fails but the UPS starts supplying power to the computer. When powerd 
notices the modem has dropped DCD, it triggers the powerfail sequence.

 Obviously, this has some limitations. You can't tell from the modem when 
the battery is low and so on. You can only tell that the wall power has 
failed. Still, it's certainly cheap and I hate to see functioning 
computer equipment lie unused. These days you should be able to get a 
2400 baud modem for very nearly free.

 I'd still suggest getting a real UPS with full communication capability. 
But if you're stuck with a less-functional one, this may at least make it 
useful.

 Sincerely,

 Ray Ingles               (810) 377-7735                inglesra@frc.com

 "Anybody who has ever seen a photograph showing the kind of damage that
a trout traveling that fast can inflict on the human skull knows that
such photographs are very valuable. I paid $20 for mine." - Dave Barry
</PRE>
</CODE></BLOCKQUOTE>
<P>
<HR>
<A HREF="UPS-HOWTO-8.html"><IMG SRC="../img/next.gif" ALT="Next"></A>
<A HREF="UPS-HOWTO-6.html"><IMG SRC="../img/prev.gif" ALT="Previous"></A>
<A HREF="UPS-HOWTO.html#toc7"><IMG SRC="../img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
