<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=big5">
 <META NAME="GENERATOR" CONTENT="ZH-SGML-Tools 1.0.9">
 <TITLE>SMB HOWTO: 分享 Windows 磁碟給 Linux 機器</TITLE>
 <LINK HREF="SMB-HOWTO-8.html" REL=next>
 <LINK HREF="SMB-HOWTO-6.html" REL=previous>
 <LINK HREF="SMB-HOWTO.html#toc7" REL=contents>
<SCRIPT src="menu.js"> function BeginPage() {} function EndPage() {} </SCRIPT> </HEAD> <BODY bgcolor=#EEEEFF MARGINHEIGHT=0 MARGINWIDTH=0> <SCRIPT>BeginPage(0, 2, 5);</SCRIPT>
<A HREF="SMB-HOWTO-8.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="SMB-HOWTO-6.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="SMB-HOWTO.html#toc7"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<HR>
<H2><A NAME="s7">7. 分享 Windows 磁碟給 Linux 機器</A></H2>

<P>一種給 UNIX 機器用的 SMB client 程式被包含在 Samba 發行套件之中.它提供一種在命令列下的像ftp的介面.
<P>想要看在給定的主機上有哪些分享可取得, 執行:
<P>
<HR>
<PRE>
    /usr/sbin/smbclient -L host
</PRE>
<HR>
<P>這堛 'host' 是你想要瀏覽的機器名子. 這將會回應一串 'service' 的名稱 - 也就是, 它所分享給你的磁碟或印表機的名稱. 除非 SMB 伺服器沒有安全上的設定, 否則它將要求你輸入密碼. 給它 'guest' 帳號的密碼或是你個人在那台機器上帳號的密碼.
<P>舉個例子:
<P>
<HR>
<PRE>
    smbclient -L zimmerman
</PRE>
<HR>
<P>這個指令的輸出應該看起來像是這樣:
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
Server time is Sat Aug 10 15:58:27 1996
Timezone is UTC+10.0
Password: 
Domain=[WORKGROUP] OS=[Windows NT 3.51] Server=[NT LAN Manager 3.51]

Server=[ZIMMERMAN] User=[] Workgroup=[WORKGROUP] Domain=[]

        Sharename      Type      Comment
        ---------      ----      -------
        ADMIN$         Disk      Remote Admin
        public         Disk      Public 
        C$             Disk      Default share
        IPC$           IPC       Remote IPC
        OReilly        Printer   OReilly
        print$         Disk      Printer Drivers


This machine has a browse list:

        Server               Comment
        ---------            -------
        HOPPER               Samba 1.9.15p8
        KERNIGAN             Samba 1.9.15p8
        LOVELACE             Samba 1.9.15p8
        RITCHIE              Samba 1.9.15p8
        ZIMMERMAN            
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>這個 browse list 列出其他有資源分享給網路的 SMB 伺服器.
<P>要使用此 client, 請執行:
<P>
<HR>
<PRE>
    /usr/sbin/smbclient service &lt;password>
</PRE>
<HR>
<P>這堛 'service' 是一台機器和分享名稱. 舉例而言,如果你設法連到一台叫做 zimmerman 的機器上之以 'public' 為分享名稱的目錄 ,此 service 要叫做  \\zimmerman\public. 然而,因為 shell 限制, 你會需要脫離 backslashes, 所以你要像這樣的結束:
<P>
<HR>
<PRE>
    /usr/sbin/smbclient \\\\zimmerman\\public mypasswd
</PRE>
<HR>
<P>這樣的 'mypasswd' 是你的密碼之文字串{literal string}.
<P>你將會有 smbclient 的提示符號{prompt}出現:
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
Server time is Sat Aug 10 15:58:44 1996
Timezone is UTC+10.0
Domain=[WORKGROUP] OS=[Windows NT 3.51] Server=[NT LAN Manager 3.51]
smb: \> 
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>鍵入 'h' 取得關於使用 smbclient 的 help:
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
smb: \> h
ls             dir            lcd            cd             pwd            
get            mget           put            mput           rename         
more           mask           del            rm             mkdir          
md             rmdir          rd             prompt         recurse        
translate      lowercase      print          printmode      queue          
cancel         stat           quit           q              exit           
newer          archive        tar            blocksize      tarmode        
setmode        help           ?              !              
smb: \> 
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>如果你能使用ftp,你應該不需要查詢 smbclient 的 man pages.
<P>
<P>
<HR>
<A HREF="SMB-HOWTO-8.html"><IMG SRC="img/next.gif" ALT="Next"></A>
<A HREF="SMB-HOWTO-6.html"><IMG SRC="img/prev.gif" ALT="Previous"></A>
<A HREF="SMB-HOWTO.html#toc7"><IMG SRC="img/toc.gif" ALT="Contents"></A>
<SCRIPT>EndPage();</SCRIPT>  </BODY>
</HTML>
